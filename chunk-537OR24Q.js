import{c as j,d as H}from"./chunk-SWGBIMMQ.js";import{a as Q}from"./chunk-DQIHD3SX.js";import{d as V,g as $,m as q,n as z,o as K,s as G}from"./chunk-UMXV7FSD.js";import{a as W,c as U,f as J}from"./chunk-E3PR7NZM.js";import{j as k,k as Y,m as R,o as P}from"./chunk-KT27TMF4.js";import{Ab as o,Bb as S,Cb as p,Da as i,Db as I,Eb as w,Fb as O,Gb as L,Ja as M,M as y,Mb as s,Nb as d,Ob as C,Pa as F,Q as _,U as T,Ua as v,db as m,eb as l,fb as n,gb as c,o as B,qb as b,sb as u,yb as N,z as D}from"./chunk-IGH6FCT7.js";var h=class r{constructor(a){this.http=a}apiUrl=`${J.apiUrl}`;getBriefs(){let a=`${this.apiUrl}/admin/brief?seeMore=true`;return console.log("AdminBriefsService: Making request to:",a),this.http.get(a,{headers:new W(this.getAuthHeaders())}).pipe(y(e=>{console.log("AdminBriefsService: Response received:",e)}),D(e=>(console.error("AdminBriefsService: Error occurred:",e),B(()=>e))))}getAuthHeaders(){let a=localStorage.getItem("token");return a?{Authorization:`Access ${a}`}:{}}static \u0275fac=function(e){return new(e||r)(T(U))};static \u0275prov=_({token:r,factory:r.\u0275fac,providedIn:"root"})};function de(r,a){if(r&1&&(l(0,"div",19),c(1,"i",20),o(2),n()),r&2){let e=u();i(2),p(" ",e.error," ")}}function pe(r,a){r&1&&(l(0,"div",21),c(1,"app-loading-spinner"),n())}function ce(r,a){if(r&1&&(l(0,"option",22),o(1),n()),r&2){let e=a.$implicit;m("value",e.value),i(),I(" ",e.labelAr," - ",e.label," ")}}function me(r,a){r&1&&(l(0,"div",29),c(1,"i",30),l(2,"p"),o(3),s(4,"translate"),n()()),r&2&&(i(3),S(d(4,1,"ADMIN.BRIEFS.EMPTY_STATE")))}function fe(r,a){if(r&1&&(l(0,"p"),c(1,"i",43),l(2,"strong"),o(3),s(4,"translate"),n(),o(5),s(6,"translate"),n()),r&2){let e=u().$implicit;i(3),p("",d(4,3,"ADMIN.BRIEFS.FIELDS.SOCIAL_MEDIA"),":"),i(2),I(" ",e.socialMediaLinks.length," ",d(6,5,"ADMIN.BRIEFS.FIELDS.LINKS"))}}function ge(r,a){if(r&1&&(l(0,"div",33)(1,"div",34)(2,"h3",35),o(3),s(4,"translate"),n(),l(5,"span",36),o(6),s(7,"date"),n()(),l(8,"div",37)(9,"p"),c(10,"i",38),l(11,"strong"),o(12),s(13,"translate"),n(),o(14),s(15,"translate"),n(),l(16,"p"),c(17,"i",39),l(18,"strong"),o(19),s(20,"translate"),n(),o(21),s(22,"translate"),n(),l(23,"p"),c(24,"i",40),l(25,"strong"),o(26),s(27,"translate"),n(),o(28),s(29,"translate"),n(),l(30,"p"),c(31,"i",41),l(32,"strong"),o(33),s(34,"translate"),n(),o(35),s(36,"translate"),n(),l(37,"p"),c(38,"i",42),l(39,"strong"),o(40),s(41,"translate"),n(),o(42),s(43,"translate"),n(),v(44,fe,7,7,"p",18),n()()),r&2){let e=a.$implicit;i(3),S(e.companyName||d(4,13,"ADMIN.BRIEFS.UNTITLED")),i(3),S(C(7,15,e.createdAt,"medium")),i(6),p("",d(13,18,"ADMIN.BRIEFS.FIELDS.COMPANY"),":"),i(2),p(" ",e.companyName||d(15,20,"COMPONENTS.STATUS.NOT_AVAILABLE")),i(5),p("",d(20,22,"ADMIN.BRIEFS.FIELDS.EMAIL"),":"),i(2),p(" ",e.email||d(22,24,"COMPONENTS.STATUS.NOT_AVAILABLE")),i(5),p("",d(27,26,"ADMIN.BRIEFS.FIELDS.PHONE"),":"),i(2),p(" ",e.mobileNumber||d(29,28,"COMPONENTS.STATUS.NOT_AVAILABLE")),i(5),p("",d(34,30,"ADMIN.BRIEFS.FIELDS.BUSINESS_SECTOR"),":"),i(2),p(" ",e.businessSector||d(36,32,"COMPONENTS.STATUS.NOT_AVAILABLE")),i(5),p("",d(41,34,"ADMIN.BRIEFS.FIELDS.WEBSITE"),":"),i(2),p(" ",e.website||d(43,36,"COMPONENTS.STATUS.NOT_AVAILABLE")),i(2),m("ngIf",e.socialMediaLinks&&e.socialMediaLinks.length>0)}}function ve(r,a){if(r&1&&(l(0,"div",31),v(1,ge,45,38,"div",32),n()),r&2){let e=u(2);i(),m("ngForOf",e.filteredBriefs)}}function ue(r,a){if(r&1&&(l(0,"div")(1,"div",23)(2,"h2",24),c(3,"i",25),o(4),s(5,"translate"),n(),l(6,"span",26),o(7),s(8,"translate"),n()(),v(9,me,5,3,"div",27)(10,ve,2,1,"div",28),n()),r&2){let e=u();i(4),p(" ",d(5,5,"ADMIN.BRIEFS.TABS.ALL")," "),i(3),I("",e.filteredBriefs.length," ",d(8,7,"ADMIN.BRIEFS.COUNT")),i(2),m("ngIf",e.filteredBriefs.length===0),i(),m("ngIf",e.filteredBriefs.length>0)}}var X=class r{constructor(a){this.adminBriefsService=a}briefs=[];newBriefs=[];filteredBriefs=[];loading=!1;error=null;activeTab="all";selectedDateFilter="all";dateFilterOptions=[{value:"all",label:"All Time",labelAr:"\u0643\u0644 \u0627\u0644\u0623\u0648\u0642\u0627\u062A"},{value:"today",label:"Today",labelAr:"\u0627\u0644\u064A\u0648\u0645"},{value:"yesterday",label:"Yesterday",labelAr:"\u0628\u0627\u0644\u0623\u0645\u0633"},{value:"currentWeek",label:"Current Week",labelAr:"\u0627\u0644\u0623\u0633\u0628\u0648\u0639 \u0627\u0644\u062D\u0627\u0644\u064A"},{value:"lastWeek",label:"Last Week",labelAr:"\u0627\u0644\u0623\u0633\u0628\u0648\u0639 \u0627\u0644\u0645\u0627\u0636\u064A"},{value:"currentMonth",label:"Current Month",labelAr:"\u0627\u0644\u0634\u0647\u0631 \u0627\u0644\u062D\u0627\u0644\u064A"},{value:"lastMonth",label:"Last Month",labelAr:"\u0627\u0644\u0634\u0647\u0631 \u0627\u0644\u0645\u0627\u0636\u064A"},{value:"currentYear",label:"Current Year",labelAr:"\u0627\u0644\u0633\u0646\u0629 \u0627\u0644\u062D\u0627\u0644\u064A\u0629"},{value:"lastYear",label:"Last Year",labelAr:"\u0627\u0644\u0633\u0646\u0629 \u0627\u0644\u0633\u0627\u0628\u0642\u0629"}];ngOnInit(){this.loadBriefs()}loadBriefs(){this.loading=!0,this.error=null,this.adminBriefsService.getBriefs().subscribe({next:a=>{this.briefs=a.briefs?.data||[],this.applyDateFilter(),this.loading=!1},error:a=>{this.error="Failed to load briefs",this.loading=!1,console.error("Error loading briefs:",a)}})}refreshData(){this.loadBriefs()}getDateRange(a){let e=new Date,t=new Date(e.getFullYear(),e.getMonth(),e.getDate());switch(a){case"today":return{start:t,end:new Date(t.getTime()+1440*60*1e3)};case"yesterday":return{start:new Date(t.getTime()-1440*60*1e3),end:t};case"currentWeek":let f=new Date(t);f.setDate(t.getDate()-t.getDay());let E=new Date(f);return E.setDate(f.getDate()+7),{start:f,end:E};case"lastWeek":let x=new Date(t);x.setDate(t.getDate()-t.getDay()-7);let A=new Date(x);return A.setDate(x.getDate()+7),{start:x,end:A};case"currentMonth":let Z=new Date(t.getFullYear(),t.getMonth(),1),ee=new Date(t.getFullYear(),t.getMonth()+1,1);return{start:Z,end:ee};case"lastMonth":let te=new Date(t.getFullYear(),t.getMonth()-1,1),ie=new Date(t.getFullYear(),t.getMonth(),1);return{start:te,end:ie};case"currentYear":let ne=new Date(t.getFullYear(),0,1),re=new Date(t.getFullYear()+1,0,1);return{start:ne,end:re};case"lastYear":let ae=new Date(t.getFullYear()-1,0,1),le=new Date(t.getFullYear(),0,1);return{start:ae,end:le};default:return{start:new Date(0),end:new Date}}}applyDateFilter(){if(this.selectedDateFilter==="all")this.filteredBriefs=[...this.briefs];else{let{start:a,end:e}=this.getDateRange(this.selectedDateFilter);this.filteredBriefs=this.briefs.filter(t=>{let g=new Date(t.createdAt);return g>=a&&g<e})}}onDateFilterChange(){this.applyDateFilter()}static \u0275fac=function(e){return new(e||r)(M(h))};static \u0275cmp=F({type:r,selectors:[["app-admin-briefs"]],decls:25,vars:19,consts:[[1,"p-6","bg-[#041f1e]","min-h-screen","text-white","arabic-font"],[1,"flex","justify-between","items-center","mb-8"],[1,"text-3xl","font-bold","flex","items-center","gap-2"],[1,"fas","fa-clipboard-list","text-[var(--icon-color)]"],[1,"px-5","py-2","rounded-lg","bg-[var(--icon-color)]","hover:bg-[#449397]","transition-all","shadow-lg","flex","items-center","gap-2",3,"click","disabled"],[1,"fas","fa-sync-alt"],["class","p-4 bg-red-900/40 border border-red-500 rounded-lg mb-6 flex items-center gap-2",4,"ngIf"],["class","flex flex-col items-center justify-center py-20 text-gray-400",4,"ngIf"],[1,"flex","flex-col","lg:flex-row","gap-4","mb-8"],[1,"flex","gap-4"],[1,"px-5","py-2","rounded-lg","text-sm","font-medium","transition-all","flex","items-center","gap-2",3,"click"],[1,"fas","fa-layer-group"],[1,"flex-1","max-w-md"],[1,"relative"],[1,"w-full","px-4","py-2","rounded-lg","bg-[#133534]","border","border-gray-600","text-white","text-sm","focus:outline-none","focus:border-[var(--icon-color)]","transition-all","appearance-none","cursor-pointer",3,"ngModelChange","change","ngModel"],[3,"value",4,"ngFor","ngForOf"],[1,"absolute","inset-y-0","right-0","flex","items-center","pr-3","pointer-events-none"],[1,"fas","fa-chevron-down","text-gray-400","text-xs"],[4,"ngIf"],[1,"p-4","bg-red-900/40","border","border-red-500","rounded-lg","mb-6","flex","items-center","gap-2"],[1,"fas","fa-exclamation-circle","text-red-400"],[1,"flex","flex-col","items-center","justify-center","py-20","text-gray-400"],[3,"value"],[1,"flex","justify-between","items-center","mb-6"],[1,"text-2xl","font-semibold","flex","items-center","gap-2"],[1,"fas","fa-folder-open","text-[var(--icon-color)]"],[1,"text-gray-400"],["class","text-center py-20 text-gray-500",4,"ngIf"],["class","grid md:grid-cols-2 gap-6",4,"ngIf"],[1,"text-center","py-20","text-gray-500"],[1,"fas","fa-file-circle-xmark","text-5xl","mb-4"],[1,"grid","md:grid-cols-2","gap-6"],["class","p-6 rounded-2xl bg-[#133534]/70 backdrop-blur-lg border border-[rgba(255,255,255,0.08)] hover:border-[var(--icon-color)] transition-all shadow-lg hover:shadow-[var(--icon-color)]/30 transform hover:-translate-y-1 duration-300",4,"ngFor","ngForOf"],[1,"p-6","rounded-2xl","bg-[#133534]/70","backdrop-blur-lg","border","border-[rgba(255,255,255,0.08)]","hover:border-[var(--icon-color)]","transition-all","shadow-lg","hover:shadow-[var(--icon-color)]/30","transform","hover:-translate-y-1","duration-300"],[1,"flex","justify-between","items-center","mb-3"],[1,"text-xl","font-semibold"],[1,"text-sm","text-gray-400"],[1,"space-y-1","text-sm"],[1,"fas","fa-building","mr-2","text-[var(--icon-color)]"],[1,"fas","fa-envelope","mr-2","text-[var(--icon-color)]"],[1,"fas","fa-phone","mr-2","text-[var(--icon-color)]"],[1,"fas","fa-cubes","mr-2","text-[var(--icon-color)]"],[1,"fas","fa-globe","mr-2","text-[var(--icon-color)]"],[1,"fas","fa-share-alt","mr-2","text-[var(--icon-color)]"]],template:function(e,t){e&1&&(l(0,"div",0)(1,"div",1)(2,"h1",2),c(3,"i",3),o(4),s(5,"translate"),n(),l(6,"button",4),b("click",function(){return t.refreshData()}),c(7,"i",5),o(8),s(9,"translate"),n()(),v(10,de,3,1,"div",6)(11,pe,2,0,"div",7),l(12,"div",8)(13,"div",9)(14,"button",10),b("click",function(){return t.activeTab="all"}),c(15,"i",11),o(16),s(17,"translate"),n()(),l(18,"div",12)(19,"div",13)(20,"select",14),L("ngModelChange",function(f){return O(t.selectedDateFilter,f)||(t.selectedDateFilter=f),f}),b("change",function(){return t.onDateFilterChange()}),v(21,ce,2,3,"option",15),n(),l(22,"div",16),c(23,"i",17),n()()()(),v(24,ue,11,9,"div",18),n()),e&2&&(i(4),p(" ",d(5,13,"ADMIN.BRIEFS.TITLE")," "),i(2),m("disabled",t.loading),i(2),p(" ",d(9,15,"COMPONENTS.BUTTONS.REFRESH")," "),i(2),m("ngIf",t.error),i(),m("ngIf",t.loading),i(3),N("bg-[var(--icon-color)]",t.activeTab==="all")("bg-[#133534]",t.activeTab!=="all"),i(2),p(" ",d(17,17,"ADMIN.BRIEFS.TABS.ALL")," "),i(4),w("ngModel",t.selectedDateFilter),i(),m("ngForOf",t.dateFilterOptions),i(3),m("ngIf",t.activeTab==="all"&&!t.loading))},dependencies:[P,k,Y,G,z,K,q,V,$,H,Q,R,j],encapsulation:2})};export{X as AdminBriefs};
