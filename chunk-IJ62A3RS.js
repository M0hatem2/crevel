import{b as $,c as _,d as H,e as z,h as B,k as q,l as K,m as Y,n as W,o as X,r as J,t as Q}from"./chunk-UMXV7FSD.js";import{a as x,c as N,f as I}from"./chunk-E3PR7NZM.js";import{i as V,j as k,k as C,m as L,o as S}from"./chunk-KT27TMF4.js";import{$ as g,Ab as l,Bb as b,Cb as y,Da as a,Ja as F,Mb as G,Ob as R,Pa as E,Q as T,U as j,Ua as u,Wa as M,a as w,aa as h,b as A,db as s,eb as i,fb as o,gb as m,mb as P,qb as p,r as D,sb as c,za as v}from"./chunk-IGH6FCT7.js";function re(n,t){if(n&1&&(i(0,"div",37),m(1,"i",38),i(2,"a",39),l(3," View on GitHub "),o()()),n&2){let e=c(2);a(2),s("href",e.selectedItem==null?null:e.selectedItem.githubRepo,v)}}function ne(n,t){if(n&1&&(i(0,"div",37),m(1,"i",40),i(2,"a",39),l(3," View Live Demo "),o()()),n&2){let e=c(2);a(2),s("href",e.selectedItem==null?null:e.selectedItem.productionUrl,v)}}function le(n,t){if(n&1){let e=P();i(0,"div",43),p("click",function(){let d=g(e).$implicit,f=c(3);return h(f.openImageModal(d.secure_url))}),m(1,"img",44),i(2,"div",45),m(3,"i",46),o()()}if(n&2){let e=t.$implicit,r=t.index;a(),s("src",e.secure_url,v)("alt","Gallery Image "+(r+1))}}function ae(n,t){if(n&1&&(i(0,"div")(1,"p",24),l(2),o(),i(3,"div",41),u(4,le,4,2,"div",42),o()()),n&2){let e=c(2);a(2),y("Gallery (",e.selectedItem==null||e.selectedItem.gallery==null?null:e.selectedItem.gallery.length," images):"),a(2),s("ngForOf",e.selectedItem==null?null:e.selectedItem.gallery)}}function se(n,t){if(n&1){let e=P();i(0,"div",2),p("click",function(){g(e);let d=c();return h(d.closeModal())}),i(1,"div",3)(2,"div",4),p("click",function(d){return g(e),h(d.stopPropagation())}),i(3,"div",5)(4,"div",6)(5,"h3",7),l(6),o(),i(7,"p",8),l(8),o()(),i(9,"button",9),p("click",function(){g(e);let d=c();return h(d.closeModal())}),m(10,"i",10),o()(),i(11,"div",11)(12,"div",12)(13,"div",13)(14,"div")(15,"h4",14),m(16,"i",15),l(17," Project Information "),o(),i(18,"div",16)(19,"span",17),l(20,"Category:"),o(),i(21,"span",18),l(22),o()(),i(23,"div",16)(24,"span",17),l(25,"Created:"),o(),i(26,"span",19),l(27),G(28,"date"),o()(),i(29,"div",16)(30,"span",17),l(31,"Added by:"),o(),i(32,"span",19),l(33),o()(),i(34,"div",20),u(35,re,4,1,"div",21)(36,ne,4,1,"div",21),o()()(),i(37,"div",13)(38,"h4",14),m(39,"i",22),l(40," Project Images "),o(),i(41,"div",23)(42,"p",24),l(43,"Main Project Image:"),o(),i(44,"div",25),m(45,"img",26)(46,"div",27),o()(),u(47,ae,5,2,"div",28),o()(),i(48,"div",29)(49,"h4",14),m(50,"i",30),l(51," Project Description "),o(),i(52,"div",23)(53,"h5",31),l(54,"English:"),o(),i(55,"div",32)(56,"p",33),l(57),o()()(),i(58,"div",23)(59,"h5",31),l(60,"\u0627\u0644\u0639\u0631\u0628\u064A\u0629:"),o(),i(61,"div",34)(62,"p",33),l(63),o()()()()(),i(64,"div",35)(65,"div",36),l(66),o()()()()()}if(n&2){let e=c();a(6),b(e.selectedItem==null?null:e.selectedItem.title_en),a(2),b(e.selectedItem==null?null:e.selectedItem.title_ar),a(14),b(e.selectedItem==null?null:e.selectedItem.category),a(5),b(R(28,12,e.selectedItem==null?null:e.selectedItem.createdAt,"medium")),a(6),b(e.selectedItem==null||e.selectedItem.addedBy==null?null:e.selectedItem.addedBy.fullName),a(2),s("ngIf",e.selectedItem==null?null:e.selectedItem.githubRepo),a(),s("ngIf",e.selectedItem==null?null:e.selectedItem.productionUrl),a(9),s("src",e.selectedItem==null||e.selectedItem.image==null?null:e.selectedItem.image.secure_url,v),a(2),s("ngIf",e.hasGalleryImages()),a(10),b(e.selectedItem==null?null:e.selectedItem.description_en),a(6),b(e.selectedItem==null?null:e.selectedItem.description_ar),a(3),y(" Project ID: ",e.selectedItem==null?null:e.selectedItem._id," ")}}function de(n,t){if(n&1){let e=P();i(0,"div",47),p("click",function(){g(e);let d=c();return h(d.closeImageModal())}),i(1,"div",48),p("click",function(d){return g(e),h(d.stopPropagation())}),m(2,"img",49),i(3,"button",50),p("click",function(){g(e);let d=c();return h(d.closeImageModal())}),m(4,"i",51),o()()()}if(n&2){let e=c();a(2),s("src",e.selectedImageUrl,v)}}var O=class n{isOpen=!1;selectedItem=null;close=new M;edit=new M;delete=new M;refreshList=new M;showImageModal=!1;selectedImageUrl="";ngOnInit(){typeof document<"u"&&(this.isOpen?document.body.style.overflow="hidden":document.body.style.overflow="unset")}ngOnDestroy(){typeof document<"u"&&(document.body.style.overflow="unset")}closeModal(){this.isOpen=!1,this.close.emit(),typeof document<"u"&&(document.body.style.overflow="unset")}editProject(){this.selectedItem&&(this.edit.emit(this.selectedItem),this.closeModal())}confirmDelete(){this.selectedItem?._id&&confirm("Are you sure you want to delete this portfolio item? This action cannot be undone.")&&this.delete.emit(this.selectedItem._id)}openImageModal(t){this.selectedImageUrl=t,this.showImageModal=!0}closeImageModal(){this.showImageModal=!1,this.selectedImageUrl=""}hasGalleryImages(){return!!(this.selectedItem?.gallery&&this.selectedItem.gallery.length>0)}onKeyDown(t){t.key==="Escape"&&this.closeModal()}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=E({type:n,selectors:[["app-portfolio-details-modal"]],inputs:{isOpen:"isOpen",selectedItem:"selectedItem"},outputs:{close:"close",edit:"edit",delete:"delete",refreshList:"refreshList"},decls:2,vars:2,consts:[["class","fixed inset-0 z-50 overflow-y-auto modal-open","style","backdrop-filter: blur(8px); -webkit-backdrop-filter: blur(8px); background: rgba(0,0,0,0.6);",3,"click",4,"ngIf"],["class","fixed inset-0 z-[60] flex items-center justify-center bg-black bg-opacity-90 p-2",3,"click",4,"ngIf"],[1,"fixed","inset-0","z-50","overflow-y-auto","modal-open",2,"backdrop-filter","blur(8px)","-webkit-backdrop-filter","blur(8px)","background","rgba(0,0,0,0.6)",3,"click"],[1,"flex","items-center","justify-center","min-h-screen","p-2","sm:p-4"],[1,"relative","bg-[#081110]","border","border-[#1e2f2d]","rounded-xl","shadow-2xl","max-w-4xl","w-full","h-[95vh]","sm:h-[90vh]","flex","flex-col","mx-auto",3,"click"],[1,"flex","justify-between","items-center","p-3","sm:p-6","border-b","border-[#1e2f2d]","flex-shrink-0"],[1,"min-w-0","flex-1"],[1,"text-lg","sm:text-xl","font-bold","text-white","truncate"],[1,"text-gray-400","text-xs","sm:text-sm","truncate"],["type","button",1,"text-gray-400","hover:text-white","transition-colors","p-1","sm:p-2","rounded-lg","hover:bg-[#1e2f2d]","flex-shrink-0","ml-2",3,"click"],[1,"fas","fa-times","text-lg","sm:text-xl"],[1,"flex-1","p-3","sm:p-6","overflow-y-auto","min-h-0"],[1,"grid","md:grid-cols-2","gap-6","mb-6"],[1,"space-y-4"],[1,"text-lg","font-semibold","text-white","mb-3","flex","items-center","gap-2"],[1,"fas","fa-info-circle","text-[#eec044]"],[1,"mb-3"],[1,"text-gray-400","text-sm"],[1,"text-white","ml-2","px-3","py-1","bg-[#1e2f2d]","rounded-full","text-sm"],[1,"text-gray-300","ml-2"],[1,"space-y-2"],["class","flex items-center gap-2",4,"ngIf"],[1,"fas","fa-images","text-[#eec044]"],[1,"mb-4"],[1,"text-gray-400","text-sm","mb-2"],[1,"relative","group"],["alt","Main Project Image",1,"w-full","h-48","object-cover","rounded-lg","border","border-[#1e2f2d]","transition-transform","group-hover:scale-105",3,"src"],[1,"absolute","inset-0","bg-opacity-1","group-hover:bg-opacity-20","transition-all","rounded-lg"],[4,"ngIf"],[1,"mt-6"],[1,"fas","fa-align-left","text-[#eec044]"],[1,"text-gray-300","font-medium","mb-2"],[1,"bg-[#0f1a19]","border","border-[#1e2f2d]","rounded-lg","p-4"],[1,"text-gray-300","leading-relaxed"],[1,"bg-[#0f1a19]","border","border-[#1e2f2d]","rounded-lg","p-4","arabic-font"],[1,"flex","flex-col","sm:flex-row","sm:justify-between","sm:items-center","p-3","sm:p-6","border-t","border-[#1e2f2d]","bg-[#0a1312]","gap-3","flex-shrink-0"],[1,"text-xs","sm:text-sm","text-gray-400","order-2","sm:order-1"],[1,"flex","items-center","gap-2"],[1,"fab","fa-github","text-gray-400"],["target","_blank",1,"text-blue-400","hover:text-blue-300","transition-colors",3,"href"],[1,"fas","fa-external-link-alt","text-gray-400"],[1,"grid","grid-cols-3","gap-2"],["class","relative group cursor-pointer",3,"click",4,"ngFor","ngForOf"],[1,"relative","group","cursor-pointer",3,"click"],[1,"w-full","h-20","object-cover","rounded","border","border-[#1e2f2d]","transition-all","group-hover:border-[#eec044]","group-hover:scale-105",3,"src","alt"],[1,"absolute","inset-0","bg-opacity-50","group-hover:bg-opacity-30","transition-all","rounded","flex","items-center","justify-center"],[1,"fas","fa-search","text-green-500","opacity-0","group-hover:opacity-100","transition-opacity"],[1,"fixed","inset-0","z-[60]","flex","items-center","justify-center","bg-black","bg-opacity-90","p-2",3,"click"],[1,"relative","max-w-sm","sm:max-w-2xl","md:max-w-4xl","max-h-[90vh]","w-full",3,"click"],["alt","Gallery Image",1,"max-w-full","max-h-full","object-contain","rounded-lg","mx-auto",3,"src"],["type","button",1,"absolute","top-1","right-1","sm:top-2","sm:right-2","text-white","hover:text-gray-300","bg-black","bg-opacity-50","rounded-full","p-1","sm:p-2","transition-colors",3,"click"],[1,"fas","fa-times","text-sm","sm:text-base"]],template:function(e,r){e&1&&u(0,se,67,15,"div",0)(1,de,5,1,"div",1),e&2&&(s("ngIf",r.isOpen),a(),s("ngIf",r.showImageModal))},dependencies:[S,k,C,L],styles:["@keyframes _ngcontent-%COMP%_modalFadeIn{0%{opacity:0;transform:scale(.95)}to{opacity:1;transform:scale(1)}}@keyframes _ngcontent-%COMP%_modalSlideIn{0%{opacity:0;transform:translateY(-20px)}to{opacity:1;transform:translateY(0)}}.portfolio-details-modal[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_modalSlideIn .3s ease-out}.flex.flex-col.h-\\__ph-0__[_ngcontent-%COMP%]{display:flex;flex-direction:column}.flex-1.min-h-0[_ngcontent-%COMP%]{flex:1 1 0;min-height:0}.flex-shrink-0[_ngcontent-%COMP%]{flex-shrink:0}.overflow-y-auto[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.overflow-y-auto[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#0f1a19;border-radius:3px}.overflow-y-auto[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#1e2f2d;border-radius:3px}.overflow-y-auto[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#263c3a}.group[_ngcontent-%COMP%]:hover   .group-hover\\:scale-105[_ngcontent-%COMP%]{transform:scale(1.05)}@media (max-width: 768px){.max-w-4xl[_ngcontent-%COMP%]{max-width:95vw;margin:0 auto}.grid-cols-3[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}.p-6[_ngcontent-%COMP%]{padding:1rem}.text-xl[_ngcontent-%COMP%]{font-size:1.125rem}.text-lg[_ngcontent-%COMP%]{font-size:1rem}.gap-6[_ngcontent-%COMP%]{gap:1rem}.min-h-screen[_ngcontent-%COMP%]{min-height:100vh;min-height:100dvh}.h-\\__ph-0__[_ngcontent-%COMP%]{height:98vh}.md\\:grid-cols-2[_ngcontent-%COMP%]{grid-template-columns:1fr!important}.space-y-4[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] + *[_ngcontent-%COMP%]{margin-top:.75rem}.flex.gap-3[_ngcontent-%COMP%]{flex-direction:column;gap:.75rem}.flex.gap-3[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;justify-content:center}.flex-shrink-0[_ngcontent-%COMP%]{flex-shrink:0}}@media (max-width: 480px){.max-w-4xl[_ngcontent-%COMP%]{max-width:98vw;margin:0 .5rem}.p-6[_ngcontent-%COMP%]{padding:.75rem}.text-xl[_ngcontent-%COMP%]{font-size:1rem}.text-lg[_ngcontent-%COMP%]{font-size:.875rem}.grid-cols-3[_ngcontent-%COMP%]{grid-template-columns:1fr}.h-48[_ngcontent-%COMP%]{height:10rem}.h-20[_ngcontent-%COMP%]{height:4rem}}@media (hover: none) and (pointer: coarse){.group[_ngcontent-%COMP%]:hover   .group-hover\\:scale-105[_ngcontent-%COMP%]{transform:none}.transition-all[_ngcontent-%COMP%]{transition-duration:.2s}button[_ngcontent-%COMP%]{min-height:44px;min-width:44px}.hover\\:bg-blue-700[_ngcontent-%COMP%]:active{background-color:#2563eb}.hover\\:bg-red-700[_ngcontent-%COMP%]:active{background-color:#b91c1c}.hover\\:bg-gray-700[_ngcontent-%COMP%]:active{background-color:#374151}}@media (max-width: 768px) and (orientation: landscape){.max-h-\\__ph-0__[_ngcontent-%COMP%]{max-height:95vh}.min-h-screen[_ngcontent-%COMP%]{min-height:100vh}}@media (prefers-color-scheme: dark){.bg-black.bg-opacity-90[_ngcontent-%COMP%]{background-color:#000000f2}}@media (prefers-contrast: high){.border[_ngcontent-%COMP%]{border-width:2px}.text-gray-400[_ngcontent-%COMP%]{color:#fff}.text-gray-300[_ngcontent-%COMP%]{color:#e5e7eb}}@media (prefers-reduced-motion: reduce){*[_ngcontent-%COMP%]{animation-duration:.01ms!important;animation-iteration-count:1!important;transition-duration:.01ms!important}}button[_ngcontent-%COMP%]:focus-visible{outline:2px solid #eec044;outline-offset:2px}@media print{.fixed[_ngcontent-%COMP%]{position:relative}.bg-black[_ngcontent-%COMP%]{background:#fff}.text-white[_ngcontent-%COMP%]{color:#000}}"]})};var U=class n{constructor(t){this.http=t}apiUrl=`${I.apiUrl}/admin/portfolio?seeMore=true`;getPortfolioItems(){return this.http.get(this.apiUrl,{headers:new x(this.getAuthHeaders())}).pipe(D(t=>t.projects.data.map(e=>A(w({},e),{imageUrl:e.image?e.image.secure_url:null}))))}addPortfolioItem(t){return this.http.post(this.apiUrl,t,{headers:new x(w({},this.getAuthHeaders()))})}updatePortfolioItem(t,e){return this.http.patch(`${this.apiUrl}/${t}`,e,{headers:new x(w({},this.getAuthHeaders()))})}deletePortfolioItem(t){return this.http.delete(`${this.apiUrl}/${t}`,{headers:new x(this.getAuthHeaders()),body:{reason:"Deleted by admin"}})}getCategories(){return this.http.get(`${I.apiUrl}/categories`,{headers:new x(this.getAuthHeaders())})}getBlockedUsers(){return this.http.get(`${I.apiUrl}/admin/user?isBlocked=true`,{headers:new x(this.getAuthHeaders())})}getUnblockedUsers(){return this.http.get(`${I.apiUrl}/admin/user?isBlocked=false`,{headers:new x(this.getAuthHeaders())})}confirmUser(t){return this.http.post(`${I.apiUrl}/admin/user/confirm/${t}`,{reason:"accept"},{headers:new x(this.getAuthHeaders())})}blockUser(t){return this.http.post(`${I.apiUrl}/admin/user/block/${t}`,{},{headers:new x(this.getAuthHeaders())})}unblockUser(t){return this.http.post(`${I.apiUrl}/admin/user/unblock/${t}`,{},{headers:new x(this.getAuthHeaders())})}getAuthHeaders(){let t=localStorage.getItem("token");return t?{Authorization:`Access ${t}`}:{}}static \u0275fac=function(e){return new(e||n)(j(N))};static \u0275prov=T({token:n,factory:n.\u0275fac,providedIn:"root"})};function ce(n,t){if(n&1){let e=P();i(0,"div",39)(1,"button",40),p("click",function(){g(e);let d=c();return h(d.cancelEdit())}),m(2,"i",41),l(3," Cancel Edit "),o()()}}function pe(n,t){if(n&1&&(i(0,"div",42),m(1,"i",43),l(2),o()),n&2){let e=c();s("ngClass",e.submitMessage.includes("Error")?"bg-red-900/40 border border-red-500 text-red-400":"bg-green-900/40 border border-green-500 text-green-400"),a(),s("ngClass",e.submitMessage.includes("Error")?"fa-exclamation-circle":"fa-check-circle"),a(),y(" ",e.submitMessage," ")}}function ue(n,t){n&1&&(i(0,"span"),l(1,"English title is required"),o())}function fe(n,t){n&1&&(i(0,"span"),l(1,"Title must be at least 3 characters"),o())}function ge(n,t){if(n&1&&(i(0,"div",44),u(1,ue,2,0,"span",45)(2,fe,2,0,"span",45),o()),n&2){let e=c();a(),s("ngIf",e.titleEn==null||e.titleEn.errors==null?null:e.titleEn.errors.required),a(),s("ngIf",e.titleEn==null||e.titleEn.errors==null?null:e.titleEn.errors.minlength)}}function he(n,t){if(n&1&&(i(0,"option",46),l(1),o()),n&2){let e=t.$implicit;s("value",e),a(),b(e)}}function be(n,t){n&1&&(i(0,"span"),l(1,"Please enter a valid URL"),o())}function _e(n,t){if(n&1&&(i(0,"div",44),u(1,be,2,0,"span",45),o()),n&2){let e=c();a(),s("ngIf",e.githubRepo==null||e.githubRepo.errors==null?null:e.githubRepo.errors.pattern)}}function xe(n,t){n&1&&(i(0,"span"),l(1,"Please enter a valid URL"),o())}function ve(n,t){if(n&1&&(i(0,"div",44),u(1,xe,2,0,"span",45),o()),n&2){let e=c();a(),s("ngIf",e.productionUrl==null||e.productionUrl.errors==null?null:e.productionUrl.errors.pattern)}}function ye(n,t){if(n&1&&m(0,"img",61),n&2){let e=t.$implicit;s("src",e.secure_url,v)}}function Ie(n,t){if(n&1){let e=P();i(0,"div",47),p("click",function(){let d=g(e).$implicit,f=c();return h(f.openDetailsModal(d))}),i(1,"div",48)(2,"div",49)(3,"h4",50),l(4),o(),i(5,"p",3),l(6),o(),i(7,"p",51),l(8),o()(),i(9,"div",52)(10,"button",53),p("click",function(d){let f=g(e).$implicit;return c().editProject(f),h(d.stopPropagation())}),m(11,"i",54),l(12," Edit "),o(),i(13,"button",55),p("click",function(d){let f=g(e).$implicit;return c().deleteProject(f._id),h(d.stopPropagation())}),m(14,"i",56),l(15," Delete "),o()()(),i(16,"div",7)(17,"div")(18,"p",57),l(19,"Main Image:"),o(),m(20,"img",58),o(),i(21,"div")(22,"p",57),l(23),o(),i(24,"div",59),u(25,ye,1,1,"img",60),o()()()()}if(n&2){let e=t.$implicit;a(4),b(e.title_en),a(2),b(e.title_ar),a(2),b(e.category),a(12),s("src",e.image.secure_url,v),a(3),y("Gallery (",(e.gallery==null?null:e.gallery.length)||0," images):"),a(2),s("ngForOf",e.gallery)}}var ee=class n{constructor(t,e){this.fb=t;this.portfolioService=e}portfolioForm;categories=[];selectedMainImage=null;selectedGalleryImages=[];selectedGalleryImageUrls=[];isSubmitting=!1;submitMessage="";isEditMode=!1;editingProjectId=null;portfolioItems=[];showDetailsModal=!1;selectedPortfolioItem=null;ngOnInit(){this.initializeForm(),this.loadCategories(),this.loadPortfolioItems()}initializeForm(){this.portfolioForm=this.fb.group({title_en:["",[_.required,_.minLength(3)]],title_ar:["",[_.required,_.minLength(3)]],description_en:["",[_.required,_.minLength(10)]],description_ar:["",[_.required,_.minLength(10)]],githubRepo:["",[_.pattern("https?://.+")]],productionUrl:["",[_.pattern("https?://.+")]],category:["",_.required]})}loadPortfolioItems(){this.portfolioService.getPortfolioItems().subscribe({next:t=>{this.portfolioItems=t,console.log("Loaded portfolio items:",this.portfolioItems)},error:t=>{console.error("Error loading portfolio items:",t)}})}loadCategories(){this.portfolioService.getCategories().subscribe({next:t=>{this.categories=t},error:t=>{console.error("Error loading categories:",t),this.categories=["Web Development","Mobile App","Desktop App","UI/UX Design","software"]}})}onMainImageSelected(t){let e=t.target.files[0];e&&(this.selectedMainImage=e)}onGalleryImagesSelected(t){let e=Array.from(t.target.files);e.length>0&&e.length<=5?(this.selectedGalleryImages=e,this.selectedGalleryImageUrls=e.map(r=>URL.createObjectURL(r))):e.length>5&&(alert("Maximum 5 gallery images allowed"),t.target.value="")}removeGalleryImage(t){URL.revokeObjectURL(this.selectedGalleryImageUrls[t]),this.selectedGalleryImages.splice(t,1),this.selectedGalleryImageUrls.splice(t,1)}onSubmit(){if(this.portfolioForm.valid){if(!this.isEditMode&&(!this.selectedMainImage||this.selectedGalleryImages.length===0)){this.submitMessage="Please select both main image and at least one gallery image.";return}this.isSubmitting=!0,this.submitMessage="";let t=new FormData;Object.keys(this.portfolioForm.value).forEach(r=>{this.portfolioForm.value[r]&&t.append(r,this.portfolioForm.value[r])}),this.selectedMainImage&&t.append("image",this.selectedMainImage),this.selectedGalleryImages.forEach((r,d)=>{t.append("gallery",r)});let e="Operation successfully";this.isEditMode&&this.editingProjectId?this.portfolioService.updatePortfolioItem(this.editingProjectId,t).subscribe({next:r=>{this.isSubmitting=!1,this.submitMessage=e,this.loadPortfolioItems(),console.log("Response:",r)},error:r=>{this.isSubmitting=!1,this.submitMessage="Error updating portfolio item. Please try again.",console.error("Error:",r)}}):this.portfolioService.addPortfolioItem(t).subscribe({next:r=>{this.isSubmitting=!1,this.submitMessage=e,this.resetForm(),this.loadPortfolioItems()},error:r=>{this.isSubmitting=!1,this.submitMessage="Error adding portfolio item. Please try again.",console.error("Error:",r)}})}else this.markFormGroupTouched()}editProject(t){this.isEditMode=!0,this.editingProjectId=t._id,this.portfolioForm.patchValue({title_en:t.title_en,title_ar:t.title_ar,description_en:t.description_en,description_ar:t.description_ar,githubRepo:t.githubRepo,productionUrl:t.productionUrl,category:t.category}),this.selectedMainImage=null,this.selectedGalleryImages=[],this.selectedGalleryImageUrls.forEach(d=>URL.revokeObjectURL(d)),this.selectedGalleryImageUrls=[];let e=document.getElementById("mainImage"),r=document.getElementById("galleryImages");e&&(e.value=""),r&&(r.value="")}cancelEdit(){this.isEditMode=!1,this.editingProjectId=null,this.resetForm()}deleteProject(t){if(!t){alert("Invalid item ID");return}confirm("Are you sure you want to delete this portfolio item?")&&this.portfolioService.deletePortfolioItem(t).subscribe({next:e=>{this.loadPortfolioItems(),this.showDetailsModal&&this.selectedPortfolioItem?._id===t&&this.closeDetailsModal()},error:e=>{console.error("Error deleting portfolio item:",e);let r=e?.error?.message||"Error deleting portfolio item. Please try again.";r==="Cannot read properties of undefined (reading 'reason')"?(this.loadPortfolioItems(),this.showDetailsModal&&this.selectedPortfolioItem?._id===t&&this.closeDetailsModal()):alert(r)}})}markFormGroupTouched(){Object.keys(this.portfolioForm.controls).forEach(t=>{this.portfolioForm.get(t)?.markAsTouched()})}resetForm(){this.portfolioForm.reset(),this.selectedMainImage=null,this.selectedGalleryImages=[],this.selectedGalleryImageUrls.forEach(r=>URL.revokeObjectURL(r)),this.selectedGalleryImageUrls=[],this.submitMessage="",this.isEditMode=!1,this.editingProjectId=null;let t=document.getElementById("mainImage"),e=document.getElementById("galleryImages");t&&(t.value=""),e&&(e.value="")}openDetailsModal(t){this.selectedPortfolioItem=t,this.showDetailsModal=!0}closeDetailsModal(){this.showDetailsModal=!1,this.selectedPortfolioItem=null}editProjectFromModal(t){this.editProject(t)}deleteProjectFromModal(t){this.deleteProject(t)}get titleEn(){return this.portfolioForm.get("title_en")}get titleAr(){return this.portfolioForm.get("title_ar")}get descriptionEn(){return this.portfolioForm.get("description_en")}get descriptionAr(){return this.portfolioForm.get("description_ar")}get category(){return this.portfolioForm.get("category")}get githubRepo(){return this.portfolioForm.get("githubRepo")}get productionUrl(){return this.portfolioForm.get("productionUrl")}static \u0275fac=function(e){return new(e||n)(F(J),F(U))};static \u0275cmp=E({type:n,selectors:[["app-admin-portfolio"]],decls:79,vars:14,consts:[[1,"portfolio-form-container","bg-[#081110]","border","border-[#1e2f2d]","shadow-lg","shadow-black/30","rounded-xl","p-8","max-w-3xl","mx-auto","arabic-font"],[1,"form-header","mb-6","text-center"],[1,"text-2xl","font-bold","text-white","mb-2"],[1,"text-gray-400","text-sm"],["class","mb-4 text-right",4,"ngIf"],["class","mb-4 p-3 rounded-lg text-sm font-medium flex items-center gap-2",3,"ngClass",4,"ngIf"],[1,"space-y-6",3,"ngSubmit","formGroup"],[1,"grid","md:grid-cols-2","gap-4"],["for","title_en",1,"block","text-gray-300","mb-1","text-sm"],[1,"text-red-500"],["type","text","id","title_en","formControlName","title_en","placeholder","Enter project title in English",1,"w-full","px-4","py-2","rounded-lg","bg-[#0f1a19]","border","border-[#1e2f2d]","text-white","placeholder-gray-500","focus:ring-2","focus:ring-[#1e2f2d]","focus:outline-none"],["class","text-red-400 text-xs mt-1",4,"ngIf"],["for","title_ar",1,"block","text-gray-300","mb-1","text-sm"],["type","text","id","title_ar","formControlName","title_ar","dir","rtl","placeholder","\u0623\u062F\u062E\u0644 \u0639\u0646\u0648\u0627\u0646 \u0627\u0644\u0645\u0634\u0631\u0648\u0639 \u0628\u0627\u0644\u0644\u063A\u0629 \u0627\u0644\u0639\u0631\u0628\u064A\u0629",1,"w-full","px-4","py-2","rounded-lg","bg-[#0f1a19]","border","border-[#1e2f2d]","text-white","placeholder-gray-500","focus:ring-2","focus:ring-[#1e2f2d]","focus:outline-none"],["for","description_en",1,"block","text-gray-300","mb-1","text-sm"],["id","description_en","formControlName","description_en","rows","4","placeholder","Enter project description in English",1,"w-full","px-4","py-2","rounded-lg","bg-[#0f1a19]","border","border-[#1e2f2d]","text-white","placeholder-gray-500","focus:ring-2","focus:ring-[#1e2f2d]","focus:outline-none"],["for","description_ar",1,"block","text-gray-300","mb-1","text-sm"],["id","description_ar","formControlName","description_ar","rows","4","dir","rtl","placeholder","\u0623\u062F\u062E\u0644 \u0648\u0635\u0641 \u0627\u0644\u0645\u0634\u0631\u0648\u0639 \u0628\u0627\u0644\u0644\u063A\u0629 \u0627\u0644\u0639\u0631\u0628\u064A\u0629",1,"w-full","px-4","py-2","rounded-lg","bg-[#0f1a19]","border","border-[#1e2f2d]","text-white","placeholder-gray-500","focus:ring-2","focus:ring-[#1e2f2d]","focus:outline-none"],["for","category",1,"block","text-gray-300","mb-1","text-sm"],["id","category","formControlName","category",1,"w-full","px-4","py-2","rounded-lg","bg-[#0f1a19]","border","border-[#1e2f2d]","text-white","focus:ring-2","focus:ring-[#1e2f2d]","focus:outline-none"],["value",""],[3,"value",4,"ngFor","ngForOf"],["for","githubRepo",1,"block","text-gray-300","mb-1","text-sm"],["type","url","id","githubRepo","formControlName","githubRepo","placeholder","https://github.com/username/repository",1,"w-full","px-4","py-2","rounded-lg","bg-[#0f1a19]","border","border-[#1e2f2d]","text-white","placeholder-gray-500","focus:ring-2","focus:ring-[#1e2f2d]","focus:outline-none"],["for","productionUrl",1,"block","text-gray-300","mb-1","text-sm"],["type","url","id","productionUrl","formControlName","productionUrl","placeholder","https://your-project.com",1,"w-full","px-4","py-2","rounded-lg","bg-[#0f1a19]","border","border-[#1e2f2d]","text-white","placeholder-gray-500","focus:ring-2","focus:ring-[#1e2f2d]","focus:outline-none"],["for","mainImage",1,"block","text-gray-300","mb-1","text-sm"],["type","file","id","mainImage","accept","image/*",1,"block","w-full","text-sm","text-gray-400","file:mr-4","file:py-2","file:px-4","file:rounded-md","file:border-0","file:bg-[#1e2f2d]","file:text-white","hover:file:bg-[#263c3a]","cursor-pointer",3,"change"],["for","galleryImages",1,"block","text-gray-300","mb-1","text-sm"],["type","file","id","galleryImages","accept","image/*","multiple","",1,"block","w-full","text-sm","text-gray-400","file:mr-4","file:py-2","file:px-4","file:rounded-md","file:border-0","file:bg-[#1e2f2d]","file:text-white","hover:file:bg-[#263c3a]","cursor-pointer",3,"change"],[1,"flex","justify-end","gap-3","pt-4"],["type","button",1,"px-5","py-2","rounded-lg","bg-[#1e2f2d]","text-gray-300","hover:bg-[#263c3a]","transition",3,"click"],[1,"fas","fa-undo"],["type","submit",1,"px-5","py-2","rounded-lg","bg-[#eec044]","text-black","font-semibold","hover:bg-[#d4aa34]","transition",3,"disabled"],[1,"fas","fa-save"],[1,"portfolio-list","mt-8","space-y-4"],[1,"text-xl","font-bold","text-white","mb-4"],["class","bg-[#0f1a19] border border-[#1e2f2d] rounded-xl p-4 shadow-md hover:shadow-lg transition cursor-pointer",3,"click",4,"ngFor","ngForOf"],[3,"close","edit","delete","refreshList","isOpen","selectedItem"],[1,"mb-4","text-right"],["type","button",1,"px-4","py-2","rounded-lg","bg-gray-600","text-white","hover:bg-gray-700","transition","flex","items-center","gap-2",3,"click"],[1,"fas","fa-times"],[1,"mb-4","p-3","rounded-lg","text-sm","font-medium","flex","items-center","gap-2",3,"ngClass"],[1,"fas",3,"ngClass"],[1,"text-red-400","text-xs","mt-1"],[4,"ngIf"],[3,"value"],[1,"bg-[#0f1a19]","border","border-[#1e2f2d]","rounded-xl","p-4","shadow-md","hover:shadow-lg","transition","cursor-pointer",3,"click"],[1,"flex","justify-between","items-start","mb-4"],[1,"flex-1"],[1,"text-lg","font-semibold","text-white","hover:text-[#eec044]","transition-colors"],[1,"text-gray-300","text-sm","mt-1"],[1,"flex","gap-2","ml-4"],["type","button",1,"px-3","py-1","bg-blue-600","text-white","rounded","hover:bg-blue-700","transition","flex","items-center","gap-1",3,"click"],[1,"fas","fa-edit"],["type","button",1,"px-3","py-1","bg-red-600","text-white","rounded","hover:bg-red-700","transition","flex","items-center","gap-1",3,"click"],[1,"fas","fa-trash-alt"],[1,"text-gray-300","text-sm","mb-2"],["alt","Main Image",1,"w-full","h-32","object-cover","rounded","border","border-[#1e2f2d]",3,"src"],[1,"flex","gap-2","overflow-x-auto"],["alt","Gallery Image","class","w-16 h-16 object-cover rounded border border-[#1e2f2d] flex-shrink-0",3,"src",4,"ngFor","ngForOf"],["alt","Gallery Image",1,"w-16","h-16","object-cover","rounded","border","border-[#1e2f2d]","flex-shrink-0",3,"src"]],template:function(e,r){e&1&&(i(0,"div",0)(1,"div",1)(2,"h2",2),l(3),o(),i(4,"p",3),l(5),o()(),u(6,ce,4,0,"div",4)(7,pe,3,3,"div",5),i(8,"form",6),p("ngSubmit",function(){return r.onSubmit()}),i(9,"div",7)(10,"div")(11,"label",8),l(12,"English Title "),i(13,"span",9),l(14,"*"),o()(),m(15,"input",10),u(16,ge,3,2,"div",11),o(),i(17,"div")(18,"label",12),l(19,"Arabic Title "),i(20,"span",9),l(21,"*"),o()(),m(22,"input",13),o()(),i(23,"div",7)(24,"div")(25,"label",14),l(26,"English Description "),i(27,"span",9),l(28,"*"),o()(),m(29,"textarea",15),o(),i(30,"div")(31,"label",16),l(32,"Arabic Description "),i(33,"span",9),l(34,"*"),o()(),m(35,"textarea",17),o()(),i(36,"div")(37,"label",18),l(38,"Category "),i(39,"span",9),l(40,"*"),o()(),i(41,"select",19)(42,"option",20),l(43,"Select a category"),o(),u(44,he,2,2,"option",21),o()(),i(45,"div",7)(46,"div")(47,"label",22),l(48,"GitHub Repository URL"),o(),m(49,"input",23),u(50,_e,2,1,"div",11),o(),i(51,"div")(52,"label",24),l(53,"Production URL"),o(),m(54,"input",25),u(55,ve,2,1,"div",11),o()(),i(56,"div",7)(57,"div")(58,"label",26),l(59,"Main Project Image "),i(60,"span",9),l(61,"*"),o()(),i(62,"input",27),p("change",function(f){return r.onMainImageSelected(f)}),o()(),i(63,"div")(64,"label",28),l(65,"Gallery Images (Max 5)"),o(),i(66,"input",29),p("change",function(f){return r.onGalleryImagesSelected(f)}),o()()(),i(67,"div",30)(68,"button",31),p("click",function(){return r.resetForm()}),m(69,"i",32),l(70," Reset Form "),o(),i(71,"button",33),m(72,"i",34),l(73),o()()(),i(74,"div",35)(75,"h3",36),l(76,"Existing Portfolio Items"),o(),u(77,Ie,26,6,"div",37),o(),i(78,"app-portfolio-details-modal",38),p("close",function(){return r.closeDetailsModal()})("edit",function(f){return r.editProjectFromModal(f)})("delete",function(f){return r.deleteProjectFromModal(f)})("refreshList",function(){return r.loadPortfolioItems()}),o()()),e&2&&(a(3),y(" ",r.isEditMode?"Edit Portfolio Item":"Add New Portfolio Item"," "),a(2),y(" ",r.isEditMode?"Update the details below to modify the project":"Fill in the details below to add a new project to your portfolio"," "),a(),s("ngIf",r.isEditMode),a(),s("ngIf",r.submitMessage),a(),s("formGroup",r.portfolioForm),a(8),s("ngIf",(r.titleEn==null?null:r.titleEn.invalid)&&(r.titleEn==null?null:r.titleEn.touched)),a(28),s("ngForOf",r.categories),a(6),s("ngIf",(r.githubRepo==null?null:r.githubRepo.invalid)&&(r.githubRepo==null?null:r.githubRepo.touched)),a(5),s("ngIf",(r.productionUrl==null?null:r.productionUrl.invalid)&&(r.productionUrl==null?null:r.productionUrl.touched)),a(16),s("disabled",r.isSubmitting),a(2),y(" ",r.isSubmitting?r.isEditMode?"Updating...":"Adding...":r.isEditMode?"Update Portfolio Item":"Add Portfolio Item"," "),a(4),s("ngForOf",r.portfolioItems),a(),s("isOpen",r.showDetailsModal)("selectedItem",r.selectedPortfolioItem))},dependencies:[S,V,k,C,Q,B,W,X,$,Y,H,z,q,K,O],encapsulation:2})};export{ee as AdminPortfolio};
