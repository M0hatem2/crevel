import{a as Z}from"./chunk-7IONWMQ4.js";import{c as j,d as F}from"./chunk-SWGBIMMQ.js";import{a as $}from"./chunk-DQIHD3SX.js";import{b as U,d as z,e as Y,f as q,g as J,h as K,s as Q}from"./chunk-UMXV7FSD.js";import{a as b,c as W,f as X}from"./chunk-E3PR7NZM.js";import{j as O,k,m as P,o as H}from"./chunk-KT27TMF4.js";import{$ as E,Ab as d,Bb as c,Cb as N,Da as i,Eb as A,Fb as f,Gb as u,Ja as D,M,Mb as o,Nb as l,Ob as L,Pa as B,Q as V,U as R,Ua as C,aa as _,db as S,eb as r,fb as n,gb as g,mb as T,o as I,qb as x,r as y,sb as v,z as h,zb as G}from"./chunk-IGH6FCT7.js";var w=class p{constructor(t){this.http=t}apiUrl=`${X.apiUrl}/admin/service`;addService(t){return console.log("AdminServicesService: Adding service:",t),this.http.post(this.apiUrl,t,{headers:new b(this.getAuthHeaders())}).pipe(M(e=>{console.log("AdminServicesService: Add service response:",e)}),y(e=>e.data||e),h(e=>(console.error("AdminServicesService: Add service error:",e),I(()=>e))))}editService(t,e){return console.log("AdminServicesService: Editing service:",t,e),this.http.patch(`${this.apiUrl}/${t}`,e,{headers:new b(this.getAuthHeaders())}).pipe(M(s=>{console.log("AdminServicesService: Edit service response:",s)}),y(s=>s.data||s),h(s=>(console.error("AdminServicesService: Edit service error:",s),I(()=>s))))}deleteService(t){return console.log("AdminServicesService: Deleting service:",t),this.http.delete(`${this.apiUrl}/${t}`,{headers:new b(this.getAuthHeaders()),body:{reason:"Deleted by admin"}}).pipe(M(e=>{console.log("AdminServicesService: Delete service response:",e)}),y(e=>e.data||e),h(e=>(console.error("AdminServicesService: Delete service error:",e),I(()=>e))))}getAuthHeaders(){let t=localStorage.getItem("token");return t?{Authorization:`Access ${t}`}:{}}getServices(){return console.log("AdminServicesService: Getting services"),this.http.get(this.apiUrl,{headers:new b(this.getAuthHeaders())}).pipe(M(t=>{console.log("AdminServicesService: Get services response:",t)}),h(t=>(console.error("AdminServicesService: Get services error:",t),I(()=>t))))}static \u0275fac=function(e){return new(e||p)(R(W))};static \u0275prov=V({token:p,factory:p.\u0275fac,providedIn:"root"})};function ne(p,t){p&1&&(r(0,"div",10),g(1,"app-loading-spinner"),n())}function re(p,t){if(p&1){let e=T();r(0,"div",10)(1,"p",11),g(2,"i",12),d(3),n(),r(4,"button",13),x("click",function(){E(e);let a=v();return _(a.loadServices())}),g(5,"i",14),d(6),o(7,"translate"),n()()}if(p&2){let e=v();i(3),c(e.error),i(3),N(" ",l(7,2,"ADMIN.SERVICES_MANAGEMENT.RETRY")," ")}}function ae(p,t){if(p&1){let e=T();r(0,"tr",22)(1,"td",23),d(2),n(),r(3,"td",18),d(4),n(),r(5,"td",18),d(6),n(),r(7,"td",18),d(8),n(),r(9,"td",19),g(10,"i"),n(),r(11,"td",18)(12,"div",24),d(13),o(14,"date"),n()(),r(15,"td",25)(16,"button",26),o(17,"translate"),x("click",function(){let a=E(e).$implicit,m=v(2);return _(m.editService(a))}),g(18,"i",27),n(),r(19,"button",28),o(20,"translate"),x("click",function(){let a=E(e).$implicit,m=v(2);return _(m.deleteService(a))}),g(21,"i",29),n()()()}if(p&2){let e=t.$implicit;i(2),c(e.title_en),i(2),c(e.title_ar),i(2),c(e.description_en),i(2),c(e.description_ar),i(2),G(e.icon),i(3),c(L(14,9,e.createdAt,"mediumDate")),i(3),S("title",l(17,12,"ADMIN.SERVICES_MANAGEMENT.EDIT")),i(3),S("title",l(20,14,"ADMIN.SERVICES_MANAGEMENT.DELETE"))}}function oe(p,t){if(p&1&&(r(0,"div",15)(1,"table",16)(2,"thead")(3,"tr",17)(4,"th",18),d(5),o(6,"translate"),n(),r(7,"th",18),d(8),o(9,"translate"),n(),r(10,"th",18),d(11),o(12,"translate"),n(),r(13,"th",18),d(14),o(15,"translate"),n(),r(16,"th",18),d(17),o(18,"translate"),n(),r(19,"th",18),d(20),o(21,"translate"),n(),r(22,"th",19),d(23),o(24,"translate"),n()()(),r(25,"tbody",20),C(26,ae,22,16,"tr",21),n()()()),p&2){let e=v();i(5),c(l(6,8,"ADMIN.SERVICES_MANAGEMENT.TITLE_EN")),i(3),c(l(9,10,"ADMIN.SERVICES_MANAGEMENT.TITLE_AR")),i(3),c(l(12,12,"ADMIN.SERVICES_MANAGEMENT.DESCRIPTION_EN")),i(3),c(l(15,14,"ADMIN.SERVICES_MANAGEMENT.DESCRIPTION_AR")),i(3),c(l(18,16,"ADMIN.SERVICES_MANAGEMENT.ICON")),i(3),c(l(21,18,"ADMIN.SERVICES_MANAGEMENT.CREATED_AT")),i(3),c(l(24,20,"ADMIN.SERVICES_MANAGEMENT.ACTIONS")),i(3),S("ngForOf",e.services)}}function le(p,t){if(p&1){let e=T();r(0,"div",30)(1,"div",31)(2,"h3",32),d(3),o(4,"translate"),o(5,"translate"),n(),r(6,"form",33),x("ngSubmit",function(){E(e);let a=v();return _(a.saveService())}),r(7,"div")(8,"label",34),d(9),o(10,"translate"),n(),r(11,"input",35),o(12,"translate"),u("ngModelChange",function(a){E(e);let m=v();return f(m.form.title_en,a)||(m.form.title_en=a),_(a)}),n()(),r(13,"div")(14,"label",34),d(15),o(16,"translate"),n(),r(17,"input",36),o(18,"translate"),u("ngModelChange",function(a){E(e);let m=v();return f(m.form.title_ar,a)||(m.form.title_ar=a),_(a)}),n()(),r(19,"div")(20,"label",34),d(21),o(22,"translate"),n(),r(23,"textarea",37),o(24,"translate"),u("ngModelChange",function(a){E(e);let m=v();return f(m.form.description_en,a)||(m.form.description_en=a),_(a)}),n()(),r(25,"div")(26,"label",34),d(27),o(28,"translate"),n(),r(29,"textarea",38),o(30,"translate"),u("ngModelChange",function(a){E(e);let m=v();return f(m.form.description_ar,a)||(m.form.description_ar=a),_(a)}),n()(),r(31,"div")(32,"label",34),d(33),o(34,"translate"),n(),r(35,"input",39),o(36,"translate"),u("ngModelChange",function(a){E(e);let m=v();return f(m.form.icon,a)||(m.form.icon=a),_(a)}),n()(),r(37,"div",40)(38,"button",41),x("click",function(){E(e);let a=v();return _(a.closeModal())}),g(39,"i",42),d(40),o(41,"translate"),n(),r(42,"button",43),g(43,"i",44),d(44),o(45,"translate"),o(46,"translate"),n()()()()()}if(p&2){let e=v();i(3),c(e.editMode?l(4,18,"ADMIN.SERVICES_MANAGEMENT.EDIT_SERVICE"):l(5,20,"ADMIN.SERVICES_MANAGEMENT.ADD_SERVICE")),i(6),c(l(10,22,"ADMIN.SERVICES_MANAGEMENT.TITLE_ENGLISH")),i(2),A("ngModel",e.form.title_en),S("placeholder",l(12,24,"ADMIN.SERVICES_MANAGEMENT.TITLE_ENGLISH_PLACEHOLDER")),i(4),c(l(16,26,"ADMIN.SERVICES_MANAGEMENT.TITLE_ARABIC")),i(2),A("ngModel",e.form.title_ar),S("placeholder",l(18,28,"ADMIN.SERVICES_MANAGEMENT.TITLE_ARABIC_PLACEHOLDER")),i(4),c(l(22,30,"ADMIN.SERVICES_MANAGEMENT.DESCRIPTION_ENGLISH")),i(2),A("ngModel",e.form.description_en),S("placeholder",l(24,32,"ADMIN.SERVICES_MANAGEMENT.DESCRIPTION_ENGLISH_PLACEHOLDER")),i(4),c(l(28,34,"ADMIN.SERVICES_MANAGEMENT.DESCRIPTION_ARABIC")),i(2),A("ngModel",e.form.description_ar),S("placeholder",l(30,36,"ADMIN.SERVICES_MANAGEMENT.DESCRIPTION_ARABIC_PLACEHOLDER")),i(4),c(l(34,38,"ADMIN.SERVICES_MANAGEMENT.ICON")),i(2),A("ngModel",e.form.icon),S("placeholder",l(36,40,"ADMIN.SERVICES_MANAGEMENT.ICON_PLACEHOLDER")),i(5),N(" ",l(41,42,"ADMIN.SERVICES_MANAGEMENT.CANCEL")," "),i(4),N(" ",e.editMode?l(45,44,"ADMIN.SERVICES_MANAGEMENT.UPDATE"):l(46,46,"ADMIN.SERVICES_MANAGEMENT.SAVE")," ")}}var ee=class p{constructor(t,e){this.adminServicesService=t;this.languageService=e}services=[];loading=!1;error=null;ngOnInit(){this.loadServices()}loadServices(){this.loading=!0,this.error=null,this.adminServicesService.getServices().subscribe({next:t=>{this.services=t.services.data,this.loading=!1},error:t=>{this.error=t.message||"Failed to load services",this.loading=!1}})}isModalOpen=!1;editMode=!1;form={icon:""};editingIndex=null;openAddServiceModal(){this.editMode=!1,this.form={title_en:"",title_ar:"",description_en:"",description_ar:"",icon:""},this.isModalOpen=!0}editService(t){this.editMode=!0,this.form={title_en:t.title_en||"",title_ar:t.title_ar||"",description_en:t.description_en||"",description_ar:t.description_ar||"",icon:t.icon||""},this.editingIndex=this.services.indexOf(t),this.isModalOpen=!0}saveService(){if(this.editMode&&this.editingIndex!==null){let t=this.services[this.editingIndex];this.adminServicesService.editService(t._id,this.form).subscribe({next:()=>{this.loadServices(),this.closeModal()},error:e=>{this.error=e.message}})}else this.adminServicesService.addService(this.form).subscribe({next:()=>{this.loadServices(),this.closeModal()},error:t=>{this.error=t.message}})}deleteService(t){confirm("Are you sure you want to delete this service?")&&this.adminServicesService.deleteService(t._id).subscribe({next:()=>{this.loadServices()},error:e=>{this.error=e.message}})}closeModal(){this.isModalOpen=!1}getTranslation(t){return this.languageService.getTranslationSync(t)}static \u0275fac=function(e){return new(e||p)(D(w),D(Z))};static \u0275cmp=B({type:p,selectors:[["app-admin-services"]],decls:15,vars:10,consts:[[1,"p-4","bg-[#041f1e]","text-white","arabic-font"],[1,"py-20","px-6","md:px-12","text-white"],[1,"max-w-6xl","mx-auto","bg-[#1e4d4e]","rounded-2xl","shadow-lg","p-6","border","border-[var(--icon-color)]"],[1,"flex","justify-between","items-center","mb-6"],[1,"text-2xl","font-semibold"],[1,"bg-[var(--icon-color)]","hover:bg-[#449397]","px-4","py-2","rounded-lg","font-medium","text-white","shadow","flex","items-center","gap-2",3,"click"],[1,"fas","fa-plus"],["class","text-center py-8",4,"ngIf"],["class","overflow-x-auto",4,"ngIf"],["class","fixed inset-0 bg-black/50 flex items-center justify-center z-50",4,"ngIf"],[1,"text-center","py-8"],[1,"text-red-400"],[1,"fas","fa-exclamation-circle","mr-2"],[1,"mt-4","bg-[var(--icon-color)]","hover:bg-[#449397]","px-4","py-2","rounded-lg","font-medium","text-white","flex","items-center","gap-2",3,"click"],[1,"fas","fa-redo"],[1,"overflow-x-auto"],[1,"min-w-full","text-sm","border-collapse"],[1,"text-left","bg-[#154142]","text-gray-300"],[1,"py-3","px-4"],[1,"py-3","px-4","text-center"],[1,"divide-y","divide-gray-600"],["class","hover:bg-[#0f3b3b] transition",4,"ngFor","ngForOf"],[1,"hover:bg-[#0f3b3b]","transition"],[1,"py-3","px-4","font-medium"],[1,"text-xs","text-gray-400"],[1,"py-3","px-4","text-center","space-x-2"],[1,"text-blue-400","hover:text-blue-300",3,"click","title"],[1,"fas","fa-edit"],[1,"text-red-500","hover:text-red-400",3,"click","title"],[1,"fas","fa-trash-alt"],[1,"fixed","inset-0","bg-black/50","flex","items-center","justify-center","z-50"],[1,"bg-[#1e4d4e]","p-6","rounded-xl","shadow-lg","w-full","max-w-2xl","border","border-[var(--icon-color)]","max-h-[90vh]","overflow-y-auto"],[1,"text-lg","font-semibold","mb-4"],[1,"space-y-4",3,"ngSubmit"],[1,"block","text-sm","font-medium","text-gray-300","mb-2"],["type","text","name","title_en",1,"w-full","px-4","py-2","rounded","bg-[#173b3c]","border","border-gray-500","text-white","placeholder-gray-400",3,"ngModelChange","ngModel","placeholder"],["type","text","name","title_ar",1,"w-full","px-4","py-2","rounded","bg-[#173b3c]","border","border-gray-500","text-white","placeholder-gray-400",3,"ngModelChange","ngModel","placeholder"],["name","description_en","rows","3",1,"w-full","px-4","py-2","rounded","bg-[#173b3c]","border","border-gray-500","text-white","placeholder-gray-400",3,"ngModelChange","ngModel","placeholder"],["name","description_ar","rows","3",1,"w-full","px-4","py-2","rounded","bg-[#173b3c]","border","border-gray-500","text-white","placeholder-gray-400",3,"ngModelChange","ngModel","placeholder"],["type","text","name","icon",1,"w-full","px-4","py-2","rounded","bg-[#173b3c]","border","border-gray-500","text-white","placeholder-gray-400",3,"ngModelChange","ngModel","placeholder"],[1,"flex","justify-end","space-x-3","pt-4"],["type","button",1,"px-4","py-2","rounded","bg-gray-600","hover:bg-gray-500","text-white","flex","items-center","gap-2",3,"click"],[1,"fas","fa-times"],["type","submit",1,"px-4","py-2","rounded","bg-[var(--icon-color)]","hover:bg-[#449397]","text-white","font-medium","flex","items-center","gap-2"],[1,"fas","fa-save"]],template:function(e,s){e&1&&(r(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2",4),d(5),o(6,"translate"),n(),r(7,"button",5),x("click",function(){return s.openAddServiceModal()}),g(8,"i",6),d(9),o(10,"translate"),n()(),C(11,ne,2,0,"div",7)(12,re,8,4,"div",7)(13,oe,27,22,"div",8),n(),C(14,le,47,48,"div",9),n()()),e&2&&(i(5),c(l(6,6,"ADMIN.SERVICES_MANAGEMENT.TITLE")),i(4),N(" ",l(10,8,"ADMIN.SERVICES_MANAGEMENT.ADD_SERVICE")," "),i(2),S("ngIf",s.loading),i(),S("ngIf",s.error),i(),S("ngIf",!s.loading&&!s.error),i(),S("ngIf",s.isModalOpen))},dependencies:[H,O,k,Q,K,U,z,Y,J,q,F,$,P,j],encapsulation:2})};export{ee as AdminServices};
