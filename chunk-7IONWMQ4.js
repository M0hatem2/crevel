import{b as c}from"./chunk-SWGBIMMQ.js";import{Q as o,U as i,k as s}from"./chunk-IGH6FCT7.js";var l=class r{constructor(e){this.translate=e;let t=localStorage.getItem("lang"),n=e.getBrowserLang()?.split("-")[0],a="en";t&&(t==="en"||t==="ar")?a=t:n&&(n==="en"||n==="ar")&&(a=n),console.log("LanguageService initializing with language:",a),this.currentLanguageSubject.next(a),localStorage.setItem("lang",a),this.translate.use(a).subscribe({next:()=>{console.log(`Successfully loaded ${a} translations`),this.updateDocumentDirection(a)},error:u=>{console.error(`Error loading ${a} translations:`,u),this.translate.use("en").subscribe({next:()=>{console.log("Fallback to English translations loaded successfully"),this.updateDocumentDirection("en")},error:g=>{console.error("Fallback to English also failed:",g)}})}})}currentLanguageSubject=new s("en");currentLanguage$=this.currentLanguageSubject.asObservable();get currentLanguage(){return this.currentLanguageSubject.value}setLanguage(e){(e==="en"||e==="ar")&&(this.currentLanguageSubject.value!==e?(console.log(`LanguageService: Changing language from ${this.currentLanguageSubject.value} to ${e}`),this.currentLanguageSubject.next(e),localStorage.setItem("lang",e),this.translate.use(e).subscribe({next:()=>{console.log(`LanguageService: Successfully loaded ${e} translations`),this.updateDocumentDirection(e)},error:t=>{console.error(`LanguageService: Error loading ${e} translations:`,t)}})):console.log(`LanguageService: Language is already ${e}, no change needed`))}toggleLanguage(){let e=this.currentLanguage==="en"?"ar":"en";this.setLanguage(e)}updateDocumentDirection(e){let t=e==="ar"?"rtl":"ltr";document.documentElement.setAttribute("dir",t),document.documentElement.setAttribute("lang",e),document.body.setAttribute("dir",t),t==="rtl"?(document.body.classList.add("rtl"),document.body.classList.remove("ltr")):(document.body.classList.add("ltr"),document.body.classList.remove("rtl"))}getTranslation(e){return this.translate.get(e)}getTranslationSync(e){return this.translate.instant(e)}static \u0275fac=function(t){return new(t||r)(i(c))};static \u0275prov=o({token:r,factory:r.\u0275fac,providedIn:"root"})};export{l as a};
