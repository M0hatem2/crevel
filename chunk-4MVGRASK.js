import{a as G}from"./chunk-JSFBMCBE.js";import"./chunk-VGAXELMJ.js";import{d as F,f as O}from"./chunk-VWVY3PMQ.js";import{a as M}from"./chunk-7IONWMQ4.js";import{c as A,d as V}from"./chunk-SWGBIMMQ.js";import{a as j}from"./chunk-DQIHD3SX.js";import"./chunk-E3PR7NZM.js";import{j as k,k as D,o as T}from"./chunk-KT27TMF4.js";import{$ as u,Ab as d,Bb as b,Cb as I,Da as a,Ja as S,Mb as v,Nb as x,Pa as L,Ua as w,aa as _,ba as E,ca as C,db as g,eb as n,fb as o,gb as h,mb as p,qb as f,sb as s,yb as B,za as y}from"./chunk-IGH6FCT7.js";function R(i,t){i&1&&(n(0,"div",5),h(1,"app-loading-spinner"),o())}function z(i,t){if(i&1){let e=p();n(0,"div",6)(1,"div",7)(2,"div",8),d(3,"\u26A0\uFE0F"),o(),n(4,"h2",9),d(5),v(6,"translate"),o(),n(7,"p",10),d(8),v(9,"translate"),o(),n(10,"button",11),f("click",function(){u(e);let l=s();return _(l.retryLoadBlog())}),d(11),v(12,"translate"),o()()()}if(i&2){let e=s();a(5),b(x(6,3,"COMMON.ERROR")),a(3),b(e.errorMessage||x(9,5,"BLOG.DETAILS.FAILED_TO_LOAD_BLOG")),a(3),I(" ",x(12,7,"MESSAGES.TRY_AGAIN")," ")}}function P(i,t){i&1&&(n(0,"div",32),h(1,"div",33),o())}function U(i,t){i&1&&(n(0,"div",34),E(),n(1,"svg",35),h(2,"path",36),o(),C(),n(3,"p"),d(4),v(5,"translate"),o()()),i&2&&(a(4),b(x(5,1,"MESSAGES.FAILED_TO_LOAD")))}function H(i,t){if(i&1){let e=p();n(0,"button",37),f("click",function(){u(e);let l=s(3);return _(l.prevImage())}),h(1,"i",38),o()}}function K(i,t){if(i&1){let e=p();n(0,"button",39),f("click",function(){u(e);let l=s(3);return _(l.nextImage())}),h(1,"i",40),o()}}function Y(i,t){if(i&1){let e=p();n(0,"div",43),f("click",function(){let l=u(e).index,c=s(4);return _(c.goToImage(l))}),o()}if(i&2){let e=t.index,r=s(4);B("bg-[#00FFC6]",r.isImageActive(e))("bg-white/40",!r.isImageActive(e))}}function $(i,t){if(i&1&&(n(0,"div",41),w(1,Y,1,4,"div",42),o()),i&2){let e=s(3);a(),g("ngForOf",e.allImages)}}function q(i,t){if(i&1){let e=p();n(0,"div",24)(1,"p",25),d(2),o(),n(3,"img",26),f("load",function(){let l;u(e);let c=s(2);return _(c.onImageLoad(((l=c.getCurrentImage())==null?null:l.secure_url)||""))})("error",function(){let l;u(e);let c=s(2);return _(c.onImageError(((l=c.getCurrentImage())==null?null:l.secure_url)||""))}),o(),w(4,P,2,0,"div",27)(5,U,6,3,"div",28)(6,H,2,0,"button",29)(7,K,2,0,"button",30)(8,$,2,1,"div",31),o()}if(i&2){let e,r,l,c,m=s(2);a(2),I(" ",m.blog.category," "),a(),g("src",(e=m.getCurrentImage())==null?null:e.secure_url,y)("alt",((r=m.getCurrentImage())==null?null:r.public_id)||"Blog image"),a(),g("ngIf",m.imageLoadingStates[((l=m.getCurrentImage())==null?null:l.secure_url)||""]),a(),g("ngIf",m.imageErrorStates[((c=m.getCurrentImage())==null?null:c.secure_url)||""]),a(),g("ngIf",m.allImages.length>1),a(),g("ngIf",m.allImages.length>1),a(),g("ngIf",m.allImages.length>1)}}function J(i,t){if(i&1){let e=p();n(0,"div",46),f("click",function(){let l=u(e).index,c=s(3);return _(c.goToImage(l))}),h(1,"img",47),o()}if(i&2){let e=t.$implicit,r=t.index,l=s(3);B("border-[#00FFC6]",l.isImageActive(r))("border-white/20",!l.isImageActive(r)),a(),g("src",e.secure_url,y)("alt","Thumbnail "+(r+1))}}function Q(i,t){if(i&1&&(n(0,"div",44),w(1,J,2,6,"div",45),o()),i&2){let e=s(2);a(),g("ngForOf",e.allImages)}}function W(i,t){if(i&1){let e=p();n(0,"div",12),w(1,q,9,8,"div",13)(2,Q,2,1,"div",14),n(3,"div",15)(4,"h1",16),d(5),o(),n(6,"p",17),d(7),o()(),n(8,"div",18)(9,"div",19)(10,"p",20),d(11),o()()(),n(12,"div",21)(13,"button",22),f("click",function(){u(e);let l=s();return _(l.goBack())}),h(14,"i",23),n(15,"span"),d(16),v(17,"translate"),o()()()()}if(i&2){let e=s();a(),g("ngIf",e.hasImages()),a(),g("ngIf",e.allImages.length>1),a(3),I(" ",e.getTitle()," "),a(2),I(" ",e.getSubtitle()," "),a(4),b(e.getContent()),a(5),b(x(17,6,"BLOG.DETAILS.BACK_TO_BLOGS"))}}function X(i,t){if(i&1){let e=p();n(0,"div",6)(1,"div",7)(2,"div",48),d(3,"\u{1F50D}"),o(),n(4,"h2",9),d(5),v(6,"translate"),o(),n(7,"p",10),d(8),v(9,"translate"),o(),n(10,"button",11),f("click",function(){u(e);let l=s();return _(l.goBack())}),d(11),v(12,"translate"),o()()()}if(i&2){let e=s();a(5),b(x(6,3,"BLOG.DETAILS.BLOG_NOT_FOUND")),a(3),I(" ",e.errorMessage||x(9,5,"BLOG.DETAILS.BLOG_NOT_FOUND_MESSAGE")," "),a(3),I(" ",x(12,7,"BLOG.DETAILS.BACK_TO_BLOGS")," ")}}var N=class i{constructor(t,e,r,l){this.route=t;this.router=e;this.languageService=r;this.blogService=l;this.currentLang=this.languageService.currentLanguage}blog=null;isLoading=!0;hasError=!1;errorMessage="";currentLang="en";allImages=[];currentImageIndex=0;imageLoadingStates={};imageErrorStates={};ngOnInit(){let t=this.route.snapshot.paramMap.get("id");t?this.loadBlogDetails(t):(this.hasError=!0,this.errorMessage="Blog ID not found",this.isLoading=!1)}loadBlogDetails(t){this.isLoading=!0,this.hasError=!1,this.errorMessage="",this.blogService.getBlogs().subscribe({next:e=>{let r=e.find(l=>l._id===t);r?(this.blog=r,this.createAllImagesArray()):(this.hasError=!0,this.errorMessage="Blog not found"),this.isLoading=!1},error:e=>{console.error("Error loading blog details:",e),this.hasError=!0,this.errorMessage="Failed to load blog details",this.isLoading=!1}})}retryLoadBlog(){let t=this.route.snapshot.paramMap.get("id");t&&this.loadBlogDetails(t)}getTitle(){return this.blog?this.currentLang==="ar"?this.blog.title_ar||this.blog.title_en:this.blog.title_en:""}getSubtitle(){return this.blog?this.currentLang==="ar"?this.blog.subTitle_ar||this.blog.subTitle_en:this.blog.subTitle_en:""}getContent(){return this.blog?this.currentLang==="ar"?this.blog.content_ar||this.blog.content_en:this.blog.content_en:""}goBack(){this.router.navigate(["/blog"])}createAllImagesArray(){if(!this.blog){this.allImages=[];return}this.allImages=[],this.blog.image&&this.allImages.push(this.blog.image),this.blog.gallery&&this.blog.gallery.length>0&&this.allImages.push(...this.blog.gallery),this.imageLoadingStates={},this.imageErrorStates={},this.allImages.forEach(t=>{this.imageLoadingStates[t.secure_url]=!0,this.imageErrorStates[t.secure_url]=!1})}onImageLoad(t){this.imageLoadingStates[t]=!1}onImageError(t){this.imageLoadingStates[t]=!1,this.imageErrorStates[t]=!0}goToImage(t){t>=0&&t<this.allImages.length&&(this.currentImageIndex=t)}nextImage(){this.currentImageIndex<this.allImages.length-1?this.currentImageIndex++:this.currentImageIndex=0}prevImage(){this.currentImageIndex>0?this.currentImageIndex--:this.currentImageIndex=this.allImages.length-1}isImageActive(t){return t===this.currentImageIndex}getCurrentImage(){return this.allImages.length>0?this.allImages[this.currentImageIndex]:null}hasImages(){return this.allImages.length>0}static \u0275fac=function(e){return new(e||i)(S(F),S(O),S(M),S(G))};static \u0275cmp=L({type:i,selectors:[["app-blog-details"]],decls:6,vars:4,consts:[[1,"min-h-screen","py-8"],[1,"max-w-7xl","mx-auto","px-4","sm:px-6","lg:px-8"],["class","grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",4,"ngIf"],["class","bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-8",4,"ngIf"],["class","rounded-3xl md:p-12 overflow-hidden relative",4,"ngIf"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-6"],[1,"bg-white","dark:bg-gray-800","rounded-2xl","shadow-lg","p-8"],[1,"text-center"],[1,"text-red-500","text-6xl","mb-4"],[1,"text-xl","font-semibold","text-gray-900","dark:text-white","mb-2"],[1,"text-gray-600","dark:text-gray-300","mb-6"],[1,"px-6","py-2","bg-blue-600","text-white","rounded-lg","hover:bg-blue-700","transition",3,"click"],[1,"rounded-3xl","md:p-12","overflow-hidden","relative"],["class","relative group rounded-2xl overflow-hidden shadow-lg",4,"ngIf"],["class","mt-6 flex justify-center gap-3 overflow-x-auto scrollbar-hide",4,"ngIf"],[1,"m-8"],[1,"text-3xl","sm:text-4xl","font-bold","text-gray-900","dark:text-white","mb-2"],[1,"text-gray-600","dark:text-gray-300","my-6"],[1,"mx-8","mb-8"],[1,"blog-content","text-lg","text-gray-700","dark:text-gray-300","leading-relaxed","space-y-6"],[1,"whitespace-pre-line"],[1,"mt-10","mx-8","flex","flex-col","sm:flex-row","gap-4"],[1,"flex-1","flex","items-center","justify-center","gap-2","px-6","py-4","rounded-xl","bg-white/10","border","border-white/20","text-white","font-semibold","hover:bg-white/20","transition-all","hover:-translate-y-1",3,"click"],[1,"fas","fa-arrow-left","text-lg"],[1,"relative","group","rounded-2xl","overflow-hidden","shadow-lg"],[1,"absolute","top-4","right-4","p-3","rounded-full","z-10","bg-gradient-to-r","from-[#173b3c]","to-[#06b6d4]","text-white"],[1,"w-full","h-[350px]","md:h-[500px]","object-cover","transition-all","duration-700","ease-in-out","transform","group-hover:scale-105","rounded-2xl",3,"load","error","src","alt"],["class","absolute inset-0 flex items-center justify-center bg-black/20 backdrop-blur-sm",4,"ngIf"],["class","absolute inset-0 flex flex-col items-center justify-center bg-gray-800/70 text-gray-300",4,"ngIf"],["type","button","class","absolute left-4 top-1/2 -translate-y-1/2 bg-white/20 hover:bg-[#00FFC6]/30 backdrop-blur-lg w-12 h-12 flex items-center justify-center rounded-full shadow-lg transition-all",3,"click",4,"ngIf"],["type","button","class","absolute right-4 top-1/2 -translate-y-1/2 bg-white/20 hover:bg-[#00FFC6]/30 backdrop-blur-lg w-12 h-12 flex items-center justify-center rounded-full shadow-lg transition-all",3,"click",4,"ngIf"],["class","absolute bottom-5 left-1/2 -translate-x-1/2 flex gap-2",4,"ngIf"],[1,"absolute","inset-0","flex","items-center","justify-center","bg-black/20","backdrop-blur-sm"],[1,"animate-spin","rounded-full","h-12","w-12","border-b-2","border-[#00FFC6]"],[1,"absolute","inset-0","flex","flex-col","items-center","justify-center","bg-gray-800/70","text-gray-300"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-16","h-16","mb-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"],["type","button",1,"absolute","left-4","top-1/2","-translate-y-1/2","bg-white/20","hover:bg-[#00FFC6]/30","backdrop-blur-lg","w-12","h-12","flex","items-center","justify-center","rounded-full","shadow-lg","transition-all",3,"click"],[1,"fas","fa-chevron-left","text-white","text-lg"],["type","button",1,"absolute","right-4","top-1/2","-translate-y-1/2","bg-white/20","hover:bg-[#00FFC6]/30","backdrop-blur-lg","w-12","h-12","flex","items-center","justify-center","rounded-full","shadow-lg","transition-all",3,"click"],[1,"fas","fa-chevron-right","text-white","text-lg"],[1,"absolute","bottom-5","left-1/2","-translate-x-1/2","flex","gap-2"],["class","w-3 h-3 rounded-full cursor-pointer transition-all duration-300",3,"bg-[#00FFC6]","bg-white/40","click",4,"ngFor","ngForOf"],[1,"w-3","h-3","rounded-full","cursor-pointer","transition-all","duration-300",3,"click"],[1,"mt-6","flex","justify-center","gap-3","overflow-x-auto","scrollbar-hide"],["class","w-20 h-20 rounded-xl overflow-hidden border-2 transition-all duration-300 cursor-pointer",3,"border-[#00FFC6]","border-white/20","click",4,"ngFor","ngForOf"],[1,"w-20","h-20","rounded-xl","overflow-hidden","border-2","transition-all","duration-300","cursor-pointer",3,"click"],[1,"w-full","h-full","object-cover","hover:scale-105","transition-transform",3,"src","alt"],[1,"text-red-400","text-6xl","mb-4"]],template:function(e,r){e&1&&(n(0,"div",0)(1,"div",1),w(2,R,2,0,"div",2)(3,z,13,9,"div",3)(4,W,18,8,"div",4)(5,X,13,9,"div",3),o()()),e&2&&(a(2),g("ngIf",r.isLoading),a(),g("ngIf",r.hasError&&!r.isLoading),a(),g("ngIf",r.blog&&!r.isLoading&&!r.hasError),a(),g("ngIf",!r.blog&&!r.isLoading&&r.hasError))},dependencies:[T,k,D,j,V,A],encapsulation:2})};export{N as BlogDetails};
