import{c as j,d as F}from"./chunk-SWGBIMMQ.js";import{a as D,c as R,f as H}from"./chunk-E3PR7NZM.js";import{j as M,k as w,m as k,o as B}from"./chunk-KT27TMF4.js";import{$ as T,Ab as o,Bb as l,Cb as g,Da as t,Ja as A,L as b,Mb as d,Nb as s,Ob as O,Pa as _,Q as S,U as y,Ua as f,a as I,aa as E,db as m,eb as e,fb as i,gb as c,j as h,mb as N,qb as u,sb as x}from"./chunk-IGH6FCT7.js";var v=class n{constructor(r){this.http=r}apiUrl=`${H.apiUrl}`;getAuthHeaders(){let r=this.getToken();return new D(I({"Content-Type":"application/json"},r&&{Authorization:`Access ${r}`}))}getToken(){return localStorage.getItem("token")||sessionStorage.getItem("token")}isAuthenticated(){return!!this.getToken()}getContacts(){let r=`${this.apiUrl}/admin/contact`;return console.log("AdminContactService: Making request to:",r),this.http.get(r,{headers:this.getAuthHeaders()})}static \u0275fac=function(a){return new(a||n)(y(R))};static \u0275prov=S({token:n,factory:n.\u0275fac,providedIn:"root"})};function $(n,r){n&1&&c(0,"i",15)}function V(n,r){n&1&&c(0,"i",16)}function G(n,r){if(n&1&&(e(0,"div",17),c(1,"i",18),e(2,"span",19),o(3),i()()),n&2){let a=x();t(3),l(a.message)}}function q(n,r){if(n&1&&(e(0,"div",20),c(1,"i",21),e(2,"span",19),o(3),i()()),n&2){let a=x();t(3),l(a.error)}}function Y(n,r){n&1&&(e(0,"div",22),c(1,"i",23),e(2,"p",24),o(3),d(4,"translate"),i()()),n&2&&(t(3),l(s(4,1,"ADMIN.CONTACT.LOADING")))}function z(n,r){if(n&1&&(e(0,"tr",33)(1,"td",34),o(2),i(),e(3,"td",35),o(4),i(),e(5,"td",36),o(6),i(),e(7,"td",37),o(8),i(),e(9,"td",38),o(10),d(11,"date"),i(),e(12,"td",35)(13,"div",39)(14,"button",40),c(15,"i",41),i(),e(16,"button",42),c(17,"i",43),i(),e(18,"button",44),c(19,"i",45),i()()()()),n&2){let a=r.$implicit;t(2),g("#",a._id.slice(-6)),t(2),l(a.fullName),t(2),l(a.email),t(),m("title",a.message),t(),l(a.message),t(2),l(O(11,6,a.createdAt,"short"))}}function J(n,r){if(n&1){let a=N();e(0,"div",46),c(1,"i",47),e(2,"h3",48),o(3),d(4,"translate"),i(),e(5,"p",49),o(6),d(7,"translate"),i(),e(8,"button",50),u("click",function(){T(a);let C=x(2);return E(C.refreshContacts())}),c(9,"i",16),o(10),d(11,"translate"),i()()}n&2&&(t(3),l(s(4,3,"ADMIN.CONTACT.EMPTY_STATE.TITLE")),t(3),l(s(7,5,"ADMIN.CONTACT.EMPTY_STATE.DESCRIPTION")),t(4),g(" ",s(11,7,"COMPONENTS.BUTTONS.REFRESH")," "))}function K(n,r){if(n&1&&(e(0,"div",25)(1,"div",26)(2,"table",27)(3,"thead",28)(4,"tr")(5,"th",29),o(6,"#"),i(),e(7,"th",29),o(8),d(9,"translate"),i(),e(10,"th",29),o(11),d(12,"translate"),i(),e(13,"th",29),o(14),d(15,"translate"),i(),e(16,"th",29),o(17),d(18,"translate"),i(),e(19,"th",29),o(20),d(21,"translate"),i()()(),e(22,"tbody",30),f(23,z,20,9,"tr",31),i()()(),f(24,J,12,9,"div",32),i()),n&2){let a=x();t(8),l(s(9,8,"COMMON.FULL_NAME")),t(3),l(s(12,10,"COMMON.EMAIL")),t(3),l(s(15,12,"COMMON.MESSAGE")),t(3),l(s(18,14,"ADMIN.SERVICES_MANAGEMENT.CREATED_AT")),t(3),l(s(21,16,"ADMIN.SERVICES_MANAGEMENT.ACTIONS")),t(3),m("ngForOf",a.contacts)("ngForTrackBy",a.trackByContactId),t(),m("ngIf",a.contacts.length===0&&!a.loading)}}function Q(n,r){if(n&1&&(e(0,"div",51)(1,"div",52)(2,"div",53),c(3,"i",54),i(),e(4,"div")(5,"div",55),o(6),i(),e(7,"div",56),o(8),d(9,"translate"),i()()(),e(10,"div",52)(11,"div",57),c(12,"i",58),i(),e(13,"div")(14,"div",55),o(15),i(),e(16,"div",56),o(17),d(18,"translate"),i()()(),e(19,"div",52)(20,"div",59),c(21,"i",60),i(),e(22,"div")(23,"div",55),o(24),i(),e(25,"div",56),o(26),d(27,"translate"),i()()()()),n&2){let a=x();t(6),l(a.contacts.length),t(2),l(s(9,6,"ADMIN.CONTACT.STATS.TOTAL")),t(7),l(a.contacts.length),t(2),l(s(18,8,"ADMIN.CONTACT.STATS.ACTIVE")),t(7),l(a.contacts.length),t(2),l(s(27,10,"ADMIN.CONTACT.STATS.EMAIL"))}}var P=class n{constructor(r){this.adminContactService=r}destroy$=new h;contacts=[];loading=!1;error=null;message="";ngOnInit(){this.loadContacts()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}loadContacts(){this.loading=!0,this.error=null,this.adminContactService.getContacts().pipe(b(this.destroy$)).subscribe({next:r=>{this.loading=!1,this.contacts=r.Contacts.data,this.message=r.message,console.log("Contacts loaded successfully:",r)},error:r=>{this.loading=!1,this.error=r.message||"Failed to load contacts",console.error("Error loading contacts:",r)}})}refreshContacts(){this.loadContacts()}trackByContactId(r,a){return a._id}static \u0275fac=function(a){return new(a||n)(A(v))};static \u0275cmp=_({type:n,selectors:[["app-admin-contact"]],decls:23,vars:19,consts:[[1,"min-h-screen","text-gray-100","p-6","space-y-8","arabic-font"],[1,"flex","flex-col","md:flex-row","justify-between","items-center","mb-10","gap-4"],[1,"flex","items-center"],[1,"bg-gradient-to-r","from-cyan-500","to-blue-600","rounded-lg","p-3","mr-4","shadow-md"],[1,"fa-solid","fa-address-book","text-white","text-2xl"],[1,"text-3xl","font-bold","tracking-tight"],[1,"text-gray-400","text-sm","mt-1"],[1,"inline-flex","items-center","px-5","py-2.5","bg-gradient-to-r","from-cyan-500","to-blue-600","text-white","text-sm","font-medium","rounded-lg","hover:from-cyan-600","hover:to-blue-700","focus:outline-none","focus:ring-2","focus:ring-cyan-400","disabled:opacity-50","transition-all","duration-200","shadow-md",3,"click","disabled"],["class","fa-solid fa-spinner animate-spin mr-2",4,"ngIf"],["class","fa-solid fa-rotate-right mr-2",4,"ngIf"],["class","flex items-center gap-2 bg-green-900/30 border border-green-600 rounded-lg p-4 text-green-300",4,"ngIf"],["class","flex items-center gap-2 bg-red-900/30 border border-red-600 rounded-lg p-4 text-red-300",4,"ngIf"],["class","flex flex-col items-center justify-center py-16",4,"ngIf"],["class","bg-slate-800/60 rounded-xl shadow-md border border-slate-700/40 overflow-hidden",4,"ngIf"],["class","grid grid-cols-1 md:grid-cols-3 gap-6",4,"ngIf"],[1,"fa-solid","fa-spinner","animate-spin","mr-2"],[1,"fa-solid","fa-rotate-right","mr-2"],[1,"flex","items-center","gap-2","bg-green-900/30","border","border-green-600","rounded-lg","p-4","text-green-300"],[1,"fa-solid","fa-circle-check","text-green-400","text-xl"],[1,"text-sm"],[1,"flex","items-center","gap-2","bg-red-900/30","border","border-red-600","rounded-lg","p-4","text-red-300"],[1,"fa-solid","fa-triangle-exclamation","text-red-400","text-xl"],[1,"flex","flex-col","items-center","justify-center","py-16"],[1,"fa-solid","fa-spinner","animate-spin","text-4xl","text-cyan-500","mb-4"],[1,"text-gray-400","text-lg"],[1,"bg-slate-800/60","rounded-xl","shadow-md","border","border-slate-700/40","overflow-hidden"],[1,"overflow-x-auto"],[1,"w-full","text-left","text-sm"],[1,"bg-slate-700/40","uppercase","text-gray-300"],[1,"px-6","py-3"],[1,"divide-y","divide-slate-700"],["class","hover:bg-slate-700/30 transition-colors",4,"ngFor","ngForOf","ngForTrackBy"],["class","text-center py-12",4,"ngIf"],[1,"hover:bg-slate-700/30","transition-colors"],[1,"px-6","py-4","text-cyan-400","font-mono"],[1,"px-6","py-4"],[1,"px-6","py-4","text-gray-300"],[1,"px-6","py-4","text-gray-400","truncate","max-w-xs",3,"title"],[1,"px-6","py-4","text-gray-400"],[1,"flex","items-center","gap-3"],[1,"text-blue-400","hover:text-blue-500","transition"],[1,"fa-solid","fa-eye"],[1,"text-green-400","hover:text-green-500","transition"],[1,"fa-solid","fa-pen-to-square"],[1,"text-red-500","hover:text-red-600","transition"],[1,"fa-solid","fa-trash-can"],[1,"text-center","py-12"],[1,"fa-regular","fa-envelope","text-6xl","text-gray-500","mb-4"],[1,"text-xl","font-semibold","mb-2","text-gray-200"],[1,"text-gray-400"],[1,"mt-4","inline-flex","items-center","px-5","py-2.5","bg-gradient-to-r","from-cyan-500","to-blue-600","text-white","rounded-lg","hover:from-cyan-600","hover:to-blue-700","transition",3,"click"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-6"],[1,"bg-slate-800/60","border","border-slate-700/40","rounded-xl","p-6","shadow-md","flex","items-center","gap-4"],[1,"w-10","h-10","bg-blue-500","rounded-xl","flex","items-center","justify-center","shadow-inner"],[1,"fa-solid","fa-address-card","text-white"],[1,"text-2xl","font-bold","text-white"],[1,"text-gray-400","text-sm"],[1,"w-10","h-10","bg-green-500","rounded-xl","flex","items-center","justify-center","shadow-inner"],[1,"fa-solid","fa-user-check","text-white"],[1,"w-10","h-10","bg-purple-500","rounded-xl","flex","items-center","justify-center","shadow-inner"],[1,"fa-solid","fa-paper-plane","text-white"]],template:function(a,p){a&1&&(e(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),c(4,"i",4),i(),e(5,"div")(6,"h1",5),o(7),d(8,"translate"),i(),e(9,"p",6),o(10),d(11,"translate"),i()()(),e(12,"button",7),u("click",function(){return p.refreshContacts()}),f(13,$,1,0,"i",8)(14,V,1,0,"i",9),o(15),d(16,"translate"),d(17,"translate"),i()(),f(18,G,4,1,"div",10)(19,q,4,1,"div",11)(20,Y,5,3,"div",12)(21,K,25,18,"div",13)(22,Q,28,12,"div",14),i()),a&2&&(t(7),l(s(8,11,"ADMIN.CONTACT.TITLE")),t(3),l(s(11,13,"ADMIN.CONTACT.DESCRIPTION")),t(2),m("disabled",p.loading),t(),m("ngIf",p.loading),t(),m("ngIf",!p.loading),t(),g(" ",p.loading?s(16,15,"COMPONENTS.STATUS.PROCESSING"):s(17,17,"COMPONENTS.BUTTONS.REFRESH")," "),t(3),m("ngIf",p.message&&!p.loading),t(),m("ngIf",p.error),t(),m("ngIf",p.loading&&p.contacts.length===0),t(),m("ngIf",!p.loading||p.contacts.length>0),t(),m("ngIf",p.contacts.length>0))},dependencies:[B,M,w,F,k,j],encapsulation:2})};export{P as AdminContact};
