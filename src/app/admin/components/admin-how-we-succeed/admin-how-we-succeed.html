<div class="p-4 bg-[#041f1e] text-white arabic-font">
    <div class="py-20 px-6 md:px-12 text-white">
        <div class="max-w-6xl mx-auto bg-[#1e4d4e] rounded-2xl shadow-lg p-6 border border-[var(--icon-color)]">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-2xl font-semibold">How We Succeed Management</h2>
                <button
                    class="bg-[var(--icon-color)] hover:bg-[#449397] px-4 py-2 rounded-lg font-medium text-white shadow"
                    (click)="openAddModal()">
                    + Add Item
                </button>
            </div>

            <!-- Loading -->
            <div *ngIf="loading" class="text-center py-8">
      <app-loading-spinner></app-loading-spinner>
            </div>

            <!-- Error -->
            <div *ngIf="error && !loading" class="text-center py-8">
                <p class="text-red-400">{{ error }}</p>
                <button (click)="loadItems()"
                    class="mt-4 bg-[var(--icon-color)] hover:bg-[#449397] px-4 py-2 rounded-lg font-medium text-white">
                    Retry
                </button>
            </div>

            <!-- Table -->
            <div *ngIf="!loading && !error" class="overflow-x-auto">
                <table class="min-w-full text-sm">
                    <thead>
                        <tr class="text-left bg-[#154142] text-gray-300">
                            <th class="py-3 px-4">Icon</th>
                            <th class="py-3 px-4">Title</th>
                            <th class="py-3 px-4">Description</th>
                            <th class="py-3 px-4">Created</th>
                            <th class="py-3 px-4 text-center">Actions</th>
                        </tr>
                    </thead>
                    <tbody class="divide-y divide-gray-600">
                        <tr *ngFor="let item of items">
                            <td class="py-3 px-4">
                                <div class="w-12 h-12 rounded-lg bg-gray-600 flex items-center justify-center text-xs">
                                    <i [class]="item.icon || 'fas fa-star'"></i>
                                </div>
                            </td>
                            <td class="py-3 px-4">
                                <div class="font-medium">
                                    <button (click)="viewDetails(item)"
                                        class="text-blue-400 hover:text-blue-300 underline">{{ item.title_en }}</button>
                                    <br>
                                    <button (click)="viewDetails(item)"
                                        class="text-green-400 hover:text-green-300 underline text-sm">{{ item.title_ar
                                        }}</button>
                                </div>
                            </td>
                            <td class="py-3 px-4">
                                <div class="max-w-xs truncate" [title]="item.description_en">{{ item.description_en }}
                                </div>
                                <br>
                                <div class="max-w-xs truncate text-sm text-gray-400" [title]="item.description_ar">{{
                                    item.description_ar }}</div>
                            </td>
                            <td class="py-3 px-4">
                                <div class="text-xs text-gray-400">{{ item.createdAt | date:'mediumDate' }}</div>
                            </td>
                            <td class="py-3 px-4 text-center space-x-2">
                                <button (click)="editItem(item)" class="text-blue-400 hover:text-blue-300"
                                    title="Edit Item">
                                    <i class="fas fa-edit"></i>
                                </button>
                                <button (click)="deleteItem(item)" class="text-red-500 hover:text-red-400"
                                    title="Delete Item">
                                    <i class="fas fa-trash-alt"></i>
                                </button>
                            </td>
                        </tr>
                    </tbody>
                </table>

                <!-- Empty state -->
                <div *ngIf="items.length === 0" class="text-center py-8">
                    <p class="text-gray-400">No items found. Add your first item to get started.</p>
                </div>
            </div>
        </div>

        <!-- Details Modal -->
        <div *ngIf="isDetailsModalOpen"
            class="fixed inset-0 bg-black/10 backdrop-blur-sm flex items-center justify-center z-50">
            <div
                class="bg-[#1e4d4e] p-6 rounded-xl shadow-lg w-full max-w-lg border border-[var(--icon-color)] md:mx-20 ">
                <h3 class="text-lg font-semibold mb-4">How We Succeed Item Details</h3>

                <div *ngIf="selectedItem" class="space-y-4">
                    <div class="flex items-center space-x-4">
                        <div class="w-16 h-16 rounded-lg bg-gray-600 flex items-center justify-center">
                            <i [class]="selectedItem.icon || 'fas fa-star'" class="text-2xl"></i>
                        </div>
                        <div>
                            <h4 class="text-xl font-bold">{{ selectedItem.title_en }}</h4>
                            <p class="text-green-400">{{ selectedItem.title_ar }}</p>
                        </div>
                    </div>

                    <div class="border-t border-gray-600 pt-4">
                        <h5 class="font-semibold mb-2">Description (English):</h5>
                        <p class="text-gray-300">{{ selectedItem.description_en }}</p>
                    </div>

                    <div class="border-t border-gray-600 pt-4">
                        <h5 class="font-semibold mb-2">Description (Arabic):</h5>
                        <p class="text-gray-300">{{ selectedItem.description_ar }}</p>
                    </div>

                    <div class="border-t border-gray-600 pt-4 text-sm text-gray-400">
                        <p>Created: {{ selectedItem.createdAt | date:'medium' }}</p>
                        <p *ngIf="selectedItem.updatedAt">Updated: {{ selectedItem.updatedAt | date:'medium' }}</p>
                    </div>
                </div>

                <!-- Buttons -->
                <div class="flex justify-end space-x-3 pt-4 border-t border-gray-600 mt-4">
                    <button (click)="editItem(selectedItem)"
                        class="px-4 py-2 rounded bg-blue-600 hover:bg-blue-500 text-white">
                        Edit
                    </button>
                    <button (click)="deleteItem(selectedItem)"
                        class="px-4 py-2 rounded bg-red-600 hover:bg-red-500 text-white">
                        Delete
                    </button>
                    <button (click)="closeDetailsModal()"
                        class="px-4 py-2 rounded bg-gray-600 hover:bg-gray-500 text-white">
                        Close
                    </button>
                </div>
            </div>
        </div>

        <!-- Modal (add/edit) -->
        <div *ngIf="isModalOpen" class="fixed inset-0 bg-black/50 flex items-center justify-center z-50">
            <div class="bg-[#1e4d4e] p-6 rounded-xl shadow-lg w-full max-w-md border border-[var(--icon-color)]">
                <h3 class="text-lg font-semibold mb-4">{{ editMode ? 'Edit' : 'Add' }} How We Succeed Item</h3>

                <form (ngSubmit)="saveItem()" #itemForm="ngForm" class="space-y-4">
                    <!-- Title English -->
                    <div>
                        <label class="block text-sm font-medium mb-2">Title (English) *</label>
                        <input type="text" [(ngModel)]="form.title_en" name="title_en" required
                            placeholder="Enter item title in English"
                            class="w-full px-4 py-2 rounded bg-[#173b3c] border border-gray-500 text-white placeholder-gray-400 focus:border-[var(--icon-color)] focus:outline-none">
                    </div>

                    <!-- Title Arabic -->
                    <div>
                        <label class="block text-sm font-medium mb-2">Title (Arabic) *</label>
                        <input type="text" [(ngModel)]="form.title_ar" name="title_ar" required
                            placeholder="Enter item title in Arabic"
                            class="w-full px-4 py-2 rounded bg-[#173b3c] border border-gray-500 text-white placeholder-gray-400 focus:border-[var(--icon-color)] focus:outline-none">
                    </div>

                    <!-- Description English -->
                    <div>
                        <label class="block text-sm font-medium mb-2">Description (English) *</label>
                        <textarea [(ngModel)]="form.description_en" name="description_en" required rows="4"
                            placeholder="Enter item description in English"
                            class="w-full px-4 py-2 rounded bg-[#173b3c] border border-gray-500 text-white placeholder-gray-400 focus:border-[var(--icon-color)] focus:outline-none"></textarea>
                    </div>

                    <!-- Description Arabic -->
                    <div>
                        <label class="block text-sm font-medium mb-2">Description (Arabic) *</label>
                        <textarea [(ngModel)]="form.description_ar" name="description_ar" required rows="4"
                            placeholder="Enter item description in Arabic"
                            class="w-full px-4 py-2 rounded bg-[#173b3c] border border-gray-500 text-white placeholder-gray-400 focus:border-[var(--icon-color)] focus:outline-none"></textarea>
                    </div>

                    <!-- Error message -->
                    <div *ngIf="error" class="text-red-400 text-sm">
                        {{ error }}
                    </div>

                    <!-- Buttons -->
                    <div class="flex justify-end space-x-3 pt-4">
                        <button type="button" (click)="closeModal()"
                            class="px-4 py-2 rounded bg-gray-600 hover:bg-gray-500 text-white">
                            Cancel
                        </button>
                        <button type="submit"
                            [disabled]="!form.title_en || !form.title_ar || !form.description_en || !form.description_ar"
                            class="px-4 py-2 rounded bg-[var(--icon-color)] hover:bg-[#449397] text-white font-medium disabled:opacity-50 disabled:cursor-not-allowed">
                            {{ editMode ? 'Update' : 'Add' }} Item
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>