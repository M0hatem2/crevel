<div class="reset-container">
  <div class="reset-card">
    <div class="reset-header">
      <h2>إعادة تعيين كلمة المرور</h2>
      <p>أدخل رمز OTP وكلمة المرور الجديدة</p>
    </div>

    <form [formGroup]="resetForm" (ngSubmit)="submitResetPassword()" class="reset-form">
      <div class="form-group">
        <label for="otp">رمز OTP</label>
        <input
          type="text"
          id="otp"
          formControlName="otp"
          placeholder="أدخل 6 أرقام"
          maxlength="6"
          class="form-control"
          [class.is-invalid]="resetForm.get('otp')?.invalid && resetForm.get('otp')?.touched"
        >
        <div class="invalid-feedback" *ngIf="resetForm.get('otp')?.invalid && resetForm.get('otp')?.touched">
          <div *ngIf="resetForm.get('otp')?.errors?.['required']">رمز OTP مطلوب</div>
          <div *ngIf="resetForm.get('otp')?.errors?.['pattern']">يجب أن يكون رمز OTP 6 أرقام</div>
        </div>
      </div>

      <div class="form-group">
        <label for="newPassword">كلمة المرور الجديدة</label>
        <input
          type="password"
          id="newPassword"
          formControlName="newPassword"
          placeholder="أدخل كلمة المرور الجديدة"
          class="form-control"
          [class.is-invalid]="resetForm.get('newPassword')?.invalid && resetForm.get('newPassword')?.touched"
        >
        <div class="invalid-feedback" *ngIf="resetForm.get('newPassword')?.invalid && resetForm.get('newPassword')?.touched">
          <div *ngIf="resetForm.get('newPassword')?.errors?.['required']">كلمة المرور الجديدة مطلوبة</div>
          <div *ngIf="resetForm.get('newPassword')?.errors?.['minlength']">يجب أن تكون كلمة المرور 6 أحرف على الأقل</div>
        </div>
      </div>

      <div class="form-group">
        <label for="confirmPassword">تأكيد كلمة المرور</label>
        <input
          type="password"
          id="confirmPassword"
          formControlName="confirmPassword"
          placeholder="أعد إدخال كلمة المرور الجديدة"
          class="form-control"
          [class.is-invalid]="resetForm.get('confirmPassword')?.invalid && resetForm.get('confirmPassword')?.touched"
        >
        <div class="invalid-feedback" *ngIf="resetForm.get('confirmPassword')?.invalid && resetForm.get('confirmPassword')?.touched">
          <div *ngIf="resetForm.get('confirmPassword')?.errors?.['required']">تأكيد كلمة المرور مطلوب</div>
          <div *ngIf="resetForm.get('confirmPassword')?.errors?.['passwordMismatch']">كلمات المرور غير متطابقة</div>
        </div>
      </div>

      <div class="form-actions">
        <button 
          type="submit"
          class="btn btn-primary"
          [disabled]="loading || resetForm.invalid"
        >
          <span *ngIf="loading" class="spinner-border spinner-border-sm me-2"></span>
          إعادة تعيين كلمة المرور
        </button>
      </div>
    </form>

    <!-- Success Message -->
    <div class="alert alert-success mt-3" *ngIf="successMsg">
      <i class="fas fa-check-circle"></i>
      {{ successMsg }}
    </div>

    <!-- Error Message -->
    <div class="alert alert-danger mt-3" *ngIf="errorMsg">
      <i class="fas fa-exclamation-triangle"></i>
      {{ errorMsg }}
    </div>

    <!-- Back to Login -->
    <div class="text-center mt-3">
      <a routerLink="/auth/login" class="text-decoration-none">
        <i class="fas fa-arrow-left"></i>
        العودة إلى تسجيل الدخول
      </a>
    </div>
  </div>
</div>
