import{a as z}from"./chunk-7LYS66SI.js";import"./chunk-VWVY3PMQ.js";import"./chunk-7IONWMQ4.js";import{b as k,c as q,d as P}from"./chunk-SWGBIMMQ.js";import{b as U,c,d as V,e as G,h as j,k as H,l as $,r as W,t as Y}from"./chunk-UMXV7FSD.js";import{c as D,f as K}from"./chunk-E3PR7NZM.js";import{k as T,o as A}from"./chunk-KT27TMF4.js";import{Ab as s,Bb as v,Cb as f,Da as r,Mb as p,Nb as m,Pa as _,Q as R,U as w,Ua as u,V as I,a as C,b as y,db as l,eb as o,fb as a,gb as d,o as S,qb as L,sb as b,yb as g,z as N}from"./chunk-IGH6FCT7.js";var O=class i{constructor(t){this.http=t}baseUrl=K.baseUrl;createBrief(t){return this.http.post(`${this.baseUrl}/request/brief`,t).pipe(N(this.handleError))}handleError(t){let e="An unknown error occurred!";return t.error instanceof ErrorEvent?e=`Client Error: ${t.error.message}`:e=`Server Error (Code: ${t.status}): ${t.error?.message||t.message}`,console.error("API Error:",e),console.error("Full error object:",t),S(()=>new Error(e))}static \u0275fac=function(e){return new(e||i)(w(D))};static \u0275prov=R({token:i,factory:i.\u0275fac,providedIn:"root"})};function Z(i,t){i&1&&(o(0,"div",19)(1,"p",20),s(2),p(3,"translate"),a(),o(4,"p",21),s(5),p(6,"translate"),a()()),i&2&&(r(2),v(m(3,2,"COMMON.BRIEF_FORM.SUCCESS_TITLE")),r(3),v(m(6,4,"COMMON.BRIEF_FORM.SUCCESS_SUBTITLE")))}function ee(i,t){if(i&1&&(o(0,"div",22)(1,"p",20),s(2),p(3,"translate"),a(),o(4,"p",21),s(5),a()()),i&2){let e=b();r(2),v(m(3,2,"COMMON.BRIEF_FORM.ERROR_TITLE")),r(3),v(e.submitError)}}function te(i,t){if(i&1&&(o(0,"div",23),s(1),a()),i&2){let e=b();r(),f(" ",e.getErrorMessage("companyName")," ")}}function ie(i,t){if(i&1&&(o(0,"div",23),s(1),a()),i&2){let e=b();r(),f(" ",e.getErrorMessage("businessSector")," ")}}function re(i,t){if(i&1&&(o(0,"div",23),s(1),a()),i&2){let e=b();r(),f(" ",e.getErrorMessage("mobileNumber")," ")}}function ne(i,t){if(i&1&&(o(0,"div",23),s(1),a()),i&2){let e=b();r(),f(" ",e.getErrorMessage("email")," ")}}function oe(i,t){if(i&1&&(o(0,"div",23),s(1),a()),i&2){let e=b();r(),f(" ",e.getErrorMessage("website")," ")}}function ae(i,t){i&1&&d(0,"span",24)}var B=class i{fb=I(W);talkService=I(O);translate=I(k);briefForm=this.fb.group({companyName:["",[c.required,c.minLength(2)]],businessSector:["",[c.required,c.minLength(2)]],mobileNumber:["",[c.required,c.pattern(/^[\+]?[0-9\-\s]+$/)]],email:["",[c.required,c.email]],website:["",[c.required,c.pattern(/^https?:\/\/.+/)]],socialMediaLinks:[""]});isLoading=!1;submitError="";submitSuccess=!1;onSubmit(){if(this.briefForm.valid){this.isLoading=!0,this.submitError="",this.submitSuccess=!1;let t=y(C({},this.briefForm.value),{socialMediaLinks:this.parseSocialMediaLinks(this.briefForm.value.socialMediaLinks)});console.log("Sending data to server:",t),this.talkService.createBrief(t).subscribe({next:e=>{this.isLoading=!1,console.log("Server response:",e),e.data?(this.submitSuccess=!0,this.briefForm.reset(),console.log("Brief created successfully:",e)):this.submitError=e.message||"Failed to create brief"},error:e=>{this.isLoading=!1,this.submitError=e.message||"An error occurred while creating the brief",console.error("Error creating brief:",e)}})}else this.markFormGroupTouched()}parseSocialMediaLinks(t){return!t||t.trim()===""?[]:t.split(`
`).map(e=>e.trim()).filter(e=>e.length>0&&e.startsWith("https://"))}markFormGroupTouched(){Object.keys(this.briefForm.controls).forEach(t=>{this.briefForm.get(t)?.markAsTouched()})}getErrorMessage(t){let e=this.briefForm.get(t);if(e?.errors&&e.touched){if(e.errors.required){let n=this.getFieldLabel(t);return this.translate.instant("COMMON.BRIEF_FORM.VALIDATION.COMPANY_NAME_REQUIRED").replace("{{field}}",n)}if(e.errors.email)return this.translate.instant("COMMON.BRIEF_FORM.VALIDATION.EMAIL_INVALID");if(e.errors.minlength){let n=this.getFieldLabel(t);return this.translate.instant("COMMON.BRIEF_FORM.VALIDATION.COMPANY_NAME_MIN_LENGTH").replace("{{field}}",n).replace("{{length}}",e.errors.minlength.requiredLength.toString())}if(e.errors.pattern){if(t==="mobileNumber")return this.translate.instant("COMMON.BRIEF_FORM.VALIDATION.MOBILE_INVALID");if(t==="website")return this.translate.instant("COMMON.BRIEF_FORM.VALIDATION.WEBSITE_INVALID")}}return""}getFieldLabel(t){let e={companyName:"COMMON.BRIEF_FORM.COMPANY_NAME",businessSector:"COMMON.BRIEF_FORM.BUSINESS_SECTOR",mobileNumber:"COMMON.BRIEF_FORM.MOBILE_NUMBER",email:"FORMS.EMAIL_ADDRESS",website:"COMMON.BRIEF_FORM.WEBSITE"};return this.translate.instant(e[t]||t)}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=_({type:i,selectors:[["app-brife-form"]],decls:40,vars:46,consts:[[1,"flex","items-center","justify-center","min-h-screen","px-4","max-w-3xl","mx-auto","arabic-font"],[1,"bg-[#334748]","rounded-2xl","shadow-2xl","p-10","w-full","max-w-3xl"],[1,"text-center","text-4xl","font-bold","text-white","mb-8","tracking-wide"],["class","bg-green-600 text-white p-4 rounded-lg mb-6 text-center",4,"ngIf"],["class","bg-red-600 text-white p-4 rounded-lg mb-6 text-center",4,"ngIf"],[1,"space-y-6",3,"ngSubmit","formGroup"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6"],[1,"form-group"],["type","text","formControlName","companyName",1,"w-full","rounded-lg","bg-[#263B3C]","text-white","px-4","py-3","placeholder-gray-400","focus:outline-none","focus:ring-2","focus:ring-teal-400","focus:border-teal-400","transition",3,"placeholder"],["class","text-red-400 text-sm mt-1",4,"ngIf"],["type","text","formControlName","businessSector",1,"w-full","rounded-lg","bg-[#263B3C]","text-white","px-4","py-3","placeholder-gray-400","focus:outline-none","focus:ring-2","focus:ring-teal-400","focus:border-teal-400","transition",3,"placeholder"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-6"],["type","text","formControlName","mobileNumber",1,"w-full","rounded-lg","bg-[#263B3C]","text-white","px-4","py-3","placeholder-gray-400","focus:outline-none","focus:ring-2","focus:ring-teal-400","focus:border-teal-400","transition",3,"placeholder"],["type","email","formControlName","email",1,"w-full","rounded-lg","bg-[#263B3C]","text-white","px-4","py-3","placeholder-gray-400","focus:outline-none","focus:ring-2","focus:ring-teal-400","focus:border-teal-400","transition",3,"placeholder"],["type","url","formControlName","website",1,"w-full","rounded-lg","bg-[#263B3C]","text-white","px-4","py-3","placeholder-gray-400","focus:outline-none","focus:ring-2","focus:ring-teal-400","focus:border-teal-400","transition",3,"placeholder"],["rows","4","formControlName","socialMediaLinks",1,"w-full","rounded-lg","bg-[#263B3C]","border","border-gray-600","text-white","px-4","py-3","placeholder-gray-400","focus:outline-none","focus:ring-2","focus:ring-teal-400","focus:border-teal-400","transition",3,"placeholder"],[1,"flex","justify-center"],["type","submit",1,"bg-[#52A3A7]","hover:bg-teal-500","disabled:bg-gray-600","disabled:cursor-not-allowed","text-white","font-bold","text-lg","px-12","py-3","rounded-xl","shadow-md","hover:shadow-lg","transition","duration-300","flex","items-center","justify-center","min-w-[120px]",3,"disabled"],["class","inline-block w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2",4,"ngIf"],[1,"bg-green-600","text-white","p-4","rounded-lg","mb-6","text-center"],[1,"text-lg","font-semibold"],[1,"text-sm","mt-1"],[1,"bg-red-600","text-white","p-4","rounded-lg","mb-6","text-center"],[1,"text-red-400","text-sm","mt-1"],[1,"inline-block","w-4","h-4","border-2","border-white","border-t-transparent","rounded-full","animate-spin","mr-2"]],template:function(e,n){if(e&1&&(o(0,"div",0)(1,"div",1)(2,"h2",2),s(3),p(4,"translate"),a(),u(5,Z,7,6,"div",3)(6,ee,6,4,"div",4),o(7,"form",5),L("ngSubmit",function(){return n.onSubmit()}),o(8,"div",6)(9,"div",7),d(10,"input",8),p(11,"translate"),u(12,te,2,1,"div",9),a(),o(13,"div",7),d(14,"input",10),p(15,"translate"),u(16,ie,2,1,"div",9),a()(),o(17,"div",11)(18,"div",7),d(19,"input",12),p(20,"translate"),u(21,re,2,1,"div",9),a(),o(22,"div",7),d(23,"input",13),p(24,"translate"),u(25,ne,2,1,"div",9),a(),o(26,"div",7),d(27,"input",14),p(28,"translate"),u(29,oe,2,1,"div",9),a()(),o(30,"div",7)(31,"textarea",15),p(32,"translate"),s(33,"        "),a()(),o(34,"div",16)(35,"button",17),u(36,ae,1,0,"span",18),s(37),p(38,"translate"),p(39,"translate"),a()()()()()),e&2){let h,E,M,F,x;r(3),f(" ",m(4,28,"COMMON.BRIEF_FORM.CLIENT_INFO_TITLE")," "),r(2),l("ngIf",n.submitSuccess),r(),l("ngIf",n.submitError),r(),l("formGroup",n.briefForm),r(3),g("border-red-500",((h=n.briefForm.get("companyName"))==null?null:h.invalid)&&((h=n.briefForm.get("companyName"))==null?null:h.touched)),l("placeholder",m(11,30,"COMMON.BRIEF_FORM.COMPANY_NAME")),r(2),l("ngIf",n.getErrorMessage("companyName")),r(2),g("border-red-500",((E=n.briefForm.get("businessSector"))==null?null:E.invalid)&&((E=n.briefForm.get("businessSector"))==null?null:E.touched)),l("placeholder",m(15,32,"COMMON.BRIEF_FORM.BUSINESS_SECTOR")),r(2),l("ngIf",n.getErrorMessage("businessSector")),r(3),g("border-red-500",((M=n.briefForm.get("mobileNumber"))==null?null:M.invalid)&&((M=n.briefForm.get("mobileNumber"))==null?null:M.touched)),l("placeholder",m(20,34,"COMMON.BRIEF_FORM.MOBILE_NUMBER")),r(2),l("ngIf",n.getErrorMessage("mobileNumber")),r(2),g("border-red-500",((F=n.briefForm.get("email"))==null?null:F.invalid)&&((F=n.briefForm.get("email"))==null?null:F.touched)),l("placeholder",m(24,36,"FORMS.EMAIL_ADDRESS")),r(2),l("ngIf",n.getErrorMessage("email")),r(2),g("border-red-500",((x=n.briefForm.get("website"))==null?null:x.invalid)&&((x=n.briefForm.get("website"))==null?null:x.touched)),l("placeholder",m(28,38,"COMMON.BRIEF_FORM.WEBSITE")),r(2),l("ngIf",n.getErrorMessage("website")),r(2),l("placeholder",m(32,40,"COMMON.BRIEF_FORM.SOCIAL_MEDIA_LINKS")),r(4),l("disabled",n.isLoading),r(),l("ngIf",n.isLoading),r(),f(" ",n.isLoading?m(38,42,"COMMON.BRIEF_FORM.CREATING"):m(39,44,"COMMON.BRIEF_FORM.CREATE_BRIEF")," ")}},dependencies:[Y,j,U,V,G,H,$,A,T,P,q],encapsulation:2})};var J=class i{static \u0275fac=function(e){return new(e||i)};static \u0275cmp=_({type:i,selectors:[["app-brief"]],decls:13,vars:0,consts:[[1,"m-0","p-0","mt-20","text-white","text-[8rem]","font-bold","text-center"],[1,"absolute","inset-0","-z-10"],[1,"absolute","top-1/4","left-1/4","w-96","h-96","bg-[#57c4c1]","rounded-full","opacity-10","blur-3xl","animate-pulse"],[1,"absolute","bottom-1/4","right-1/4","w-80","h-80","bg-blue-400","rounded-full","opacity-10","blur-3xl","animate-pulse",2,"animation-delay","1s"],[1,"absolute","top-1/2","left-1/2","transform","-translate-x-1/2","-translate-y-1/2","w-64","h-64","bg-purple-400","rounded-full","opacity-5","blur-3xl","animate-pulse",2,"animation-delay","2s"],[1,"absolute","top-20","left-20","w-2","h-2","bg-[#57c4c1]","rounded-full","animate-ping","opacity-75"],[1,"absolute","top-40","right-32","w-3","h-3","bg-blue-400","rounded-full","animate-ping","opacity-60",2,"animation-delay","0.5s"],[1,"absolute","bottom-32","left-1/3","w-2","h-2","bg-purple-400","rounded-full","animate-ping","opacity-80",2,"animation-delay","1s"],[1,"absolute","bottom-20","right-20","w-4","h-4","bg-cyan-300","rounded-full","animate-ping","opacity-50",2,"animation-delay","1.5s"]],template:function(e,n){e&1&&(o(0,"h2",0),s(1,"Brife"),a(),o(2,"div",1),d(3,"div",2)(4,"div",3)(5,"div",4),a(),o(6,"div",1),d(7,"div",5)(8,"div",6)(9,"div",7)(10,"div",8),a(),d(11,"app-brife-form")(12,"app-contact-us"))},dependencies:[B,z],encapsulation:2})};export{J as Brief};
