import{a as Y}from"./chunk-DQIHD3SX.js";import{b as z,d as L,e as R,f as $,g as G,h as J,p as K,s as Q}from"./chunk-UMXV7FSD.js";import{a as A,c as q,f as X}from"./chunk-E3PR7NZM.js";import{j as F,k as U,m as N,o as B}from"./chunk-KT27TMF4.js";import{$ as m,Ab as o,Bb as x,Cb as w,Da as d,Eb as y,Fb as I,Gb as W,Ja as P,M as v,Mb as E,Ob as M,Pa as j,Q as T,U as D,Ua as g,a as C,aa as p,b as H,db as u,eb as n,fb as i,gb as f,mb as S,o as h,qb as _,r as V,sb as a,z as b,zb as O}from"./chunk-IGH6FCT7.js";var k=class c{constructor(t){this.http=t}apiUrl=`${X.apiUrl}/admin/howWeSucceed`;getHowWeSucceedItems(){return console.log("HowWeSucceedService: Getting all items from:",this.apiUrl),this.http.get(this.apiUrl,{headers:new A(this.getAuthHeaders())}).pipe(v(t=>{console.log("HowWeSucceedService: Response received:",t)}),V(t=>{let e=[];return t&&t.howWeSucceed&&t.howWeSucceed.data&&Array.isArray(t.howWeSucceed.data)?e=t.howWeSucceed.data:t&&t.howWeSucceed&&Array.isArray(t.howWeSucceed)?e=t.howWeSucceed:Array.isArray(t)&&(e=t),e}),b(t=>(console.error("HowWeSucceedService: Error occurred:",t),h(()=>t))))}addHowWeSucceedItem(t){return console.log("HowWeSucceedService: Adding new item"),this.http.post(this.apiUrl,t,{headers:new A(H(C({},this.getAuthHeaders()),{"Content-Type":"application/json"}))}).pipe(v(e=>{console.log("HowWeSucceedService: Add response:",e)}),b(e=>(console.error("HowWeSucceedService: Add error:",e),h(()=>e))))}updateHowWeSucceedItem(t,e){return console.log("HowWeSucceedService: Updating item:",t),this.http.patch(`${this.apiUrl}/${t}`,e,{headers:new A(H(C({},this.getAuthHeaders()),{"Content-Type":"application/json"}))}).pipe(v(l=>{console.log("HowWeSucceedService: Update response:",l)}),b(l=>(console.error("HowWeSucceedService: Update error:",l),h(()=>l))))}deleteHowWeSucceedItem(t,e){console.log("HowWeSucceedService: Deleting item:",t);let l=e?{reason:e}:{};return this.http.delete(`${this.apiUrl}/${t}`,{headers:new A(H(C({},this.getAuthHeaders()),{"Content-Type":"application/json"})),body:l}).pipe(v(r=>{console.log("HowWeSucceedService: Delete response:",r)}),b(r=>(console.error("HowWeSucceedService: Delete error:",r),h(()=>r))))}getAuthHeaders(){let t=localStorage.getItem("token");return t?{Authorization:`Access ${t}`}:{}}static \u0275fac=function(e){return new(e||c)(D(q))};static \u0275prov=T({token:c,factory:c.\u0275fac,providedIn:"root"})};function ie(c,t){c&1&&(n(0,"div",11),f(1,"app-loading-spinner"),i())}function ne(c,t){if(c&1){let e=S();n(0,"div",11)(1,"p",12),o(2),i(),n(3,"button",13),_("click",function(){m(e);let r=a();return p(r.loadItems())}),o(4," Retry "),i()()}if(c&2){let e=a();d(2),x(e.error)}}function re(c,t){if(c&1){let e=S();n(0,"tr")(1,"td",17)(2,"div",21),f(3,"i"),i()(),n(4,"td",17)(5,"div",22)(6,"button",23),_("click",function(){let r=m(e).$implicit,s=a(2);return p(s.viewDetails(r))}),o(7),i(),f(8,"br"),n(9,"button",24),_("click",function(){let r=m(e).$implicit,s=a(2);return p(s.viewDetails(r))}),o(10),i()()(),n(11,"td",17)(12,"div",25),o(13),i(),f(14,"br"),n(15,"div",26),o(16),i()(),n(17,"td",17)(18,"div",27),o(19),E(20,"date"),i()(),n(21,"td",28)(22,"button",29),_("click",function(){let r=m(e).$implicit,s=a(2);return p(s.editItem(r))}),f(23,"i",30),i(),n(24,"button",31),_("click",function(){let r=m(e).$implicit,s=a(2);return p(s.deleteItem(r))}),f(25,"i",32),i()()()}if(c&2){let e=t.$implicit;d(3),O(e.icon||"fas fa-star"),d(4),x(e.title_en),d(3),x(e.title_ar),d(2),u("title",e.description_en),d(),w("",e.description_en," "),d(2),u("title",e.description_ar),d(),x(e.description_ar),d(3),x(M(20,9,e.createdAt,"mediumDate"))}}function oe(c,t){c&1&&(n(0,"div",11)(1,"p",33),o(2,"No items found. Add your first item to get started."),i()())}function de(c,t){if(c&1&&(n(0,"div",14)(1,"table",15)(2,"thead")(3,"tr",16)(4,"th",17),o(5,"Icon"),i(),n(6,"th",17),o(7,"Title"),i(),n(8,"th",17),o(9,"Description"),i(),n(10,"th",17),o(11,"Created"),i(),n(12,"th",18),o(13,"Actions"),i()()(),n(14,"tbody",19),g(15,re,26,12,"tr",20),i()(),g(16,oe,3,0,"div",7),i()),c&2){let e=a();d(15),u("ngForOf",e.items),d(),u("ngIf",e.items.length===0)}}function ce(c,t){if(c&1&&(n(0,"p"),o(1),E(2,"date"),i()),c&2){let e=a(3);d(),w("Updated: ",M(2,1,e.selectedItem.updatedAt,"medium"))}}function le(c,t){if(c&1&&(n(0,"div",42)(1,"div",43)(2,"div",44),f(3,"i",45),i(),n(4,"div")(5,"h4",46),o(6),i(),n(7,"p",47),o(8),i()()(),n(9,"div",48)(10,"h5",49),o(11,"Description (English):"),i(),n(12,"p",50),o(13),i()(),n(14,"div",48)(15,"h5",49),o(16,"Description (Arabic):"),i(),n(17,"p",50),o(18),i()(),n(19,"div",51)(20,"p"),o(21),E(22,"date"),i(),g(23,ce,3,4,"p",52),i()()),c&2){let e=a(2);d(3),O(e.selectedItem.icon||"fas fa-star"),d(3),x(e.selectedItem.title_en),d(2),x(e.selectedItem.title_ar),d(5),x(e.selectedItem.description_en),d(5),x(e.selectedItem.description_ar),d(3),w("Created: ",M(22,8,e.selectedItem.createdAt,"medium")),d(2),u("ngIf",e.selectedItem.updatedAt)}}function ae(c,t){if(c&1){let e=S();n(0,"div",34)(1,"div",35)(2,"h3",36),o(3,"How We Succeed Item Details"),i(),g(4,le,24,11,"div",37),n(5,"div",38)(6,"button",39),_("click",function(){m(e);let r=a();return p(r.editItem(r.selectedItem))}),o(7," Edit "),i(),n(8,"button",40),_("click",function(){m(e);let r=a();return p(r.deleteItem(r.selectedItem))}),o(9," Delete "),i(),n(10,"button",41),_("click",function(){m(e);let r=a();return p(r.closeDetailsModal())}),o(11," Close "),i()()()()}if(c&2){let e=a();d(4),u("ngIf",e.selectedItem)}}function se(c,t){if(c&1&&(n(0,"div",65),o(1),i()),c&2){let e=a(2);d(),w(" ",e.error," ")}}function me(c,t){if(c&1){let e=S();n(0,"div",53)(1,"div",54)(2,"h3",36),o(3),i(),n(4,"form",55,0),_("ngSubmit",function(){m(e);let r=a();return p(r.saveItem())}),n(6,"div")(7,"label",56),o(8,"Title (English) *"),i(),n(9,"input",57),W("ngModelChange",function(r){m(e);let s=a();return I(s.form.title_en,r)||(s.form.title_en=r),p(r)}),i()(),n(10,"div")(11,"label",56),o(12,"Title (Arabic) *"),i(),n(13,"input",58),W("ngModelChange",function(r){m(e);let s=a();return I(s.form.title_ar,r)||(s.form.title_ar=r),p(r)}),i()(),n(14,"div")(15,"label",56),o(16,"Description (English) *"),i(),n(17,"textarea",59),W("ngModelChange",function(r){m(e);let s=a();return I(s.form.description_en,r)||(s.form.description_en=r),p(r)}),i()(),n(18,"div")(19,"label",56),o(20,"Description (Arabic) *"),i(),n(21,"textarea",60),W("ngModelChange",function(r){m(e);let s=a();return I(s.form.description_ar,r)||(s.form.description_ar=r),p(r)}),i()(),g(22,se,2,1,"div",61),n(23,"div",62)(24,"button",63),_("click",function(){m(e);let r=a();return p(r.closeModal())}),o(25," Cancel "),i(),n(26,"button",64),o(27),i()()()()()}if(c&2){let e=a();d(3),w("",e.editMode?"Edit":"Add"," How We Succeed Item"),d(6),y("ngModel",e.form.title_en),d(4),y("ngModel",e.form.title_ar),d(4),y("ngModel",e.form.description_en),d(4),y("ngModel",e.form.description_ar),d(),u("ngIf",e.error),d(4),u("disabled",!e.form.title_en||!e.form.title_ar||!e.form.description_en||!e.form.description_ar),d(),w(" ",e.editMode?"Update":"Add"," Item ")}}var Z=class c{constructor(t){this.howWeSucceedService=t}items=[];loading=!1;error=null;ngOnInit(){this.loadItems()}loadItems(){this.loading=!0,this.error=null,console.log("AdminHowWeSucceedComponent: Starting to load items..."),this.howWeSucceedService.getHowWeSucceedItems().subscribe({next:t=>{console.log("AdminHowWeSucceedComponent: Success response:",t);let e=[];Array.isArray(t)?e=t:t&&t.items&&Array.isArray(t.items)?e=t.items:t&&t.data&&Array.isArray(t.data)?e=t.data:e=[],this.items=e,this.loading=!1,console.log("AdminHowWeSucceedComponent: Items loaded:",this.items)},error:t=>{console.error("AdminHowWeSucceedComponent: Error details:",t),this.error=t.message||"Failed to load items",this.loading=!1,console.log("AdminHowWeSucceedComponent: Error message:",this.error)}})}isModalOpen=!1;isDetailsModalOpen=!1;editMode=!1;form={title_en:"",title_ar:"",description_en:"",description_ar:""};editingIndex=null;selectedItem=null;openAddModal(){this.editMode=!1,this.form={title_en:"",title_ar:"",description_en:"",description_ar:""},this.isModalOpen=!0}editItem(t){this.editMode=!0,this.form={title_en:t.title_en||"",title_ar:t.title_ar||"",description_en:t.description_en||"",description_ar:t.description_ar||""},this.editingIndex=this.items.indexOf(t),this.isModalOpen=!0}saveItem(){if(!this.form.title_en||!this.form.title_ar||!this.form.description_en||!this.form.description_ar){this.error="All fields are required";return}let t={title_en:this.form.title_en,title_ar:this.form.title_ar,description_en:this.form.description_en,description_ar:this.form.description_ar};if(this.editMode&&this.editingIndex!==null){let e=this.items[this.editingIndex]._id;this.howWeSucceedService.updateHowWeSucceedItem(e,t).subscribe({next:()=>{this.loadItems(),this.closeModal()},error:l=>{this.error=l.message||"Failed to update item"}})}else this.howWeSucceedService.addHowWeSucceedItem(t).subscribe({next:()=>{this.loadItems(),this.closeModal()},error:e=>{this.error=e.message||"Failed to add item"}})}deleteItem(t){let e=prompt("Please provide a reason for deletion (optional):");confirm("Are you sure you want to delete this item?")&&this.howWeSucceedService.deleteHowWeSucceedItem(t._id,e||void 0).subscribe({next:()=>{this.loadItems()},error:l=>{this.error=l.message||"Failed to delete item"}})}viewDetails(t){this.selectedItem=t,this.isDetailsModalOpen=!0}closeDetailsModal(){this.isDetailsModalOpen=!1,this.selectedItem=null}closeModal(){this.isModalOpen=!1,this.error=null}static \u0275fac=function(e){return new(e||c)(P(k))};static \u0275cmp=j({type:c,selectors:[["app-admin-how-we-succeed"]],decls:13,vars:5,consts:[["itemForm","ngForm"],[1,"p-4","bg-[#041f1e]","text-white","arabic-font"],[1,"py-20","px-6","md:px-12","text-white"],[1,"max-w-6xl","mx-auto","bg-[#1e4d4e]","rounded-2xl","shadow-lg","p-6","border","border-[var(--icon-color)]"],[1,"flex","justify-between","items-center","mb-6"],[1,"text-2xl","font-semibold"],[1,"bg-[var(--icon-color)]","hover:bg-[#449397]","px-4","py-2","rounded-lg","font-medium","text-white","shadow",3,"click"],["class","text-center py-8",4,"ngIf"],["class","overflow-x-auto",4,"ngIf"],["class","fixed inset-0 bg-black/10 backdrop-blur-sm flex items-center justify-center z-50",4,"ngIf"],["class","fixed inset-0 bg-black/50 flex items-center justify-center z-50",4,"ngIf"],[1,"text-center","py-8"],[1,"text-red-400"],[1,"mt-4","bg-[var(--icon-color)]","hover:bg-[#449397]","px-4","py-2","rounded-lg","font-medium","text-white",3,"click"],[1,"overflow-x-auto"],[1,"min-w-full","text-sm"],[1,"text-left","bg-[#154142]","text-gray-300"],[1,"py-3","px-4"],[1,"py-3","px-4","text-center"],[1,"divide-y","divide-gray-600"],[4,"ngFor","ngForOf"],[1,"w-12","h-12","rounded-lg","bg-gray-600","flex","items-center","justify-center","text-xs"],[1,"font-medium"],[1,"text-blue-400","hover:text-blue-300","underline",3,"click"],[1,"text-green-400","hover:text-green-300","underline","text-sm",3,"click"],[1,"max-w-xs","truncate",3,"title"],[1,"max-w-xs","truncate","text-sm","text-gray-400",3,"title"],[1,"text-xs","text-gray-400"],[1,"py-3","px-4","text-center","space-x-2"],["title","Edit Item",1,"text-blue-400","hover:text-blue-300",3,"click"],[1,"fas","fa-edit"],["title","Delete Item",1,"text-red-500","hover:text-red-400",3,"click"],[1,"fas","fa-trash-alt"],[1,"text-gray-400"],[1,"fixed","inset-0","bg-black/10","backdrop-blur-sm","flex","items-center","justify-center","z-50"],[1,"bg-[#1e4d4e]","p-6","rounded-xl","shadow-lg","w-full","max-w-lg","border","border-[var(--icon-color)]","md:mx-20"],[1,"text-lg","font-semibold","mb-4"],["class","space-y-4",4,"ngIf"],[1,"flex","justify-end","space-x-3","pt-4","border-t","border-gray-600","mt-4"],[1,"px-4","py-2","rounded","bg-blue-600","hover:bg-blue-500","text-white",3,"click"],[1,"px-4","py-2","rounded","bg-red-600","hover:bg-red-500","text-white",3,"click"],[1,"px-4","py-2","rounded","bg-gray-600","hover:bg-gray-500","text-white",3,"click"],[1,"space-y-4"],[1,"flex","items-center","space-x-4"],[1,"w-16","h-16","rounded-lg","bg-gray-600","flex","items-center","justify-center"],[1,"text-2xl"],[1,"text-xl","font-bold"],[1,"text-green-400"],[1,"border-t","border-gray-600","pt-4"],[1,"font-semibold","mb-2"],[1,"text-gray-300"],[1,"border-t","border-gray-600","pt-4","text-sm","text-gray-400"],[4,"ngIf"],[1,"fixed","inset-0","bg-black/50","flex","items-center","justify-center","z-50"],[1,"bg-[#1e4d4e]","p-6","rounded-xl","shadow-lg","w-full","max-w-md","border","border-[var(--icon-color)]"],[1,"space-y-4",3,"ngSubmit"],[1,"block","text-sm","font-medium","mb-2"],["type","text","name","title_en","required","","placeholder","Enter item title in English",1,"w-full","px-4","py-2","rounded","bg-[#173b3c]","border","border-gray-500","text-white","placeholder-gray-400","focus:border-[var(--icon-color)]","focus:outline-none",3,"ngModelChange","ngModel"],["type","text","name","title_ar","required","","placeholder","Enter item title in Arabic",1,"w-full","px-4","py-2","rounded","bg-[#173b3c]","border","border-gray-500","text-white","placeholder-gray-400","focus:border-[var(--icon-color)]","focus:outline-none",3,"ngModelChange","ngModel"],["name","description_en","required","","rows","4","placeholder","Enter item description in English",1,"w-full","px-4","py-2","rounded","bg-[#173b3c]","border","border-gray-500","text-white","placeholder-gray-400","focus:border-[var(--icon-color)]","focus:outline-none",3,"ngModelChange","ngModel"],["name","description_ar","required","","rows","4","placeholder","Enter item description in Arabic",1,"w-full","px-4","py-2","rounded","bg-[#173b3c]","border","border-gray-500","text-white","placeholder-gray-400","focus:border-[var(--icon-color)]","focus:outline-none",3,"ngModelChange","ngModel"],["class","text-red-400 text-sm",4,"ngIf"],[1,"flex","justify-end","space-x-3","pt-4"],["type","button",1,"px-4","py-2","rounded","bg-gray-600","hover:bg-gray-500","text-white",3,"click"],["type","submit",1,"px-4","py-2","rounded","bg-[var(--icon-color)]","hover:bg-[#449397]","text-white","font-medium","disabled:opacity-50","disabled:cursor-not-allowed",3,"disabled"],[1,"text-red-400","text-sm"]],template:function(e,l){e&1&&(n(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"h2",5),o(5,"How We Succeed Management"),i(),n(6,"button",6),_("click",function(){return l.openAddModal()}),o(7," + Add Item "),i()(),g(8,ie,2,0,"div",7)(9,ne,5,1,"div",7)(10,de,17,2,"div",8),i(),g(11,ae,12,1,"div",9)(12,me,28,8,"div",10),i()()),e&2&&(d(8),u("ngIf",l.loading),d(),u("ngIf",l.error&&!l.loading),d(),u("ngIf",!l.loading&&!l.error),d(),u("ngIf",l.isDetailsModalOpen),d(),u("ngIf",l.isModalOpen))},dependencies:[B,F,U,Q,J,z,L,R,K,G,$,Y,N],styles:[".admin-how-we-succeed[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]{scrollbar-width:thin;scrollbar-color:var(--icon-color) rgba(255,255,255,.1)}.admin-how-we-succeed[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}.admin-how-we-succeed[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#ffffff1a;border-radius:4px}.admin-how-we-succeed[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:var(--icon-color);border-radius:4px}.admin-how-we-succeed[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#449397}.modal-enter[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_modalFadeIn .3s ease-out}@keyframes _ngcontent-%COMP%_modalFadeIn{0%{opacity:0;transform:scale(.95)}to{opacity:1;transform:scale(1)}}.form-input[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 3px #06b6d41a}.image-preview[_ngcontent-%COMP%]{border-radius:8px;box-shadow:0 2px 8px #0000001a}"]})};export{Z as AdminHowWeSucceed};
