import{a as re}from"./chunk-7IONWMQ4.js";import{b as J,c as Y,d as X}from"./chunk-SWGBIMMQ.js";import{b as Z,d as ee,g as te,s as ie}from"./chunk-UMXV7FSD.js";import{a as g,c as z,f as k}from"./chunk-E3PR7NZM.js";import{j as q,k as W,m as Q,o as K}from"./chunk-KT27TMF4.js";import{$ as v,Ab as m,Bb as S,Cb as x,Da as n,Db as $,Eb as F,Fb as V,Gb as P,Hb as H,Ja as I,M as f,Mb as l,Nb as d,Ob as j,Pa as L,Q as G,U as O,Ua as M,a as y,aa as b,b as D,db as p,eb as o,fb as a,gb as E,kb as C,lb as R,mb as N,o as A,qb as _,sb as u,yb as T,z as U,za as B}from"./chunk-IGH6FCT7.js";var w=class r{constructor(t){this.http=t}baseUrl=`${k.apiUrl}`;userApiUrl=`${k.apiUrl}/admin/user`;superAdminApiUrl=`${k.apiUrl}/admin/super`;getUsers(t){let e=t?this.processParams(t):{};return console.log("AdminUsersService: Making request to:",this.userApiUrl),console.log("AdminUsersService: With params:",e),console.log("AdminUsersService: With headers:",this.getAuthHeaders()),this.http.get(this.userApiUrl+"?seeMore=true",{headers:new g(this.getAuthHeaders()),params:e}).pipe(f(i=>{console.log("AdminUsersService: Response received:",i)}),U(i=>(console.error("AdminUsersService: Error occurred:",i),i.status===500&&(t?.isBlocked!==void 0||t?.isDeleted!==void 0)?(console.log("AdminUsersService: Trying fallback without isBlocked or isDeleted parameters..."),this.getUsersFallback()):i.status===404&&(t?.isBlocked!==void 0||t?.isDeleted!==void 0)?(console.log("AdminUsersService: Trying fallback without query parameters..."),this.getUsersFallback()):A(()=>i))))}processParams(t){let e={};for(let i in t)if(t.hasOwnProperty(i)){let s=t[i];typeof s=="boolean"?e[i]=s.toString():e[i]=s}return e}getUsersFallback(){return console.log("AdminUsersService: Making fallback request to:",this.userApiUrl),this.http.get(this.userApiUrl,{headers:new g(this.getAuthHeaders())}).pipe(f(t=>{console.log("AdminUsersService: Fallback response received:",t)}),U(t=>(console.error("AdminUsersService: Fallback also failed:",t),A(()=>t))))}confirmUser(t){return this.http.patch(`${this.userApiUrl}/confirm/${t}`,{reason:"accept"},{headers:new g(this.getAuthHeaders())})}blockUser(t,e="yassakhairy504@gmail.com",i,s){console.log("AdminUsersService: Blocking user:",t,"Reason:",e),console.log("AdminUsersService: Full URL:",`${this.superAdminApiUrl}/addAdmin/${t}`);let c={id:t,reason:e,userName:i,confirmationPassword:s};return console.log("AdminUsersService: Request body:",c),console.log("AdminUsersService: Authorization header:",this.getAuthHeaders()),this.http.patch(`${this.superAdminApiUrl}/addAdmin/${t}`,c,{headers:new g(this.getAuthHeaders())}).pipe(f(h=>{console.log("AdminUsersService: Block user response:",h)}),U(h=>(console.error("AdminUsersService: Block user error:",h),console.error("AdminUsersService: Error URL:",h.url),console.error("AdminUsersService: Error status:",h.status),A(()=>h))))}unblockUser(t,e="Unblocked by admin"){return console.log("AdminUsersService: Unblocking user:",t,"Reason:",e),this.http.patch(`${this.userApiUrl}/unblock/${t}`,{reason:e},{headers:new g(this.getAuthHeaders())}).pipe(f(i=>{console.log("AdminUsersService: Unblock user response:",i)}),U(i=>(console.error("AdminUsersService: Unblock user error:",i),A(()=>i))))}unblockUserWithAccept(t){return console.log("AdminUsersService: Unblocking user with accept reason:",t),this.http.patch(`${this.userApiUrl}/unblock/${t}`,{reason:"accept"},{headers:new g(this.getAuthHeaders())}).pipe(f(e=>{console.log("AdminUsersService: Unblock user with accept response:",e)}),U(e=>(console.error("AdminUsersService: Unblock user with accept error:",e),A(()=>e))))}deleteUser(t){let e=new g(D(y({},this.getAuthHeaders()),{"Content-Type":"application/json"}));return this.http.request("DELETE",`${this.userApiUrl}/delete/${t}`,{body:{reason:"delete"},headers:e})}undeleteUser(t){return this.http.patch(`${this.userApiUrl}/undelete/${t}`,{reason:"accept"},{headers:new g(this.getAuthHeaders())})}addAdminRole(t,e,i,s){console.log("AdminUsersService: Adding admin role to user:",t),console.log("AdminUsersService: Full URL:",`${this.superAdminApiUrl}/addAdmin/${t}`);let c={id:t,reason:i||"Adding admin role",userName:s||"",confirmationPassword:e};return console.log("AdminUsersService: Request body:",c),console.log("AdminUsersService: Authorization header:",this.getAuthHeaders()),this.http.patch(`${this.superAdminApiUrl}/addAdmin `,c,{headers:new g(this.getAuthHeaders())}).pipe(f(h=>{console.log("AdminUsersService: Add admin role response:",h)}),U(h=>(console.error("AdminUsersService: Add admin role error:",h),console.error("AdminUsersService: Error URL:",h.url),console.error("AdminUsersService: Error status:",h.status),A(()=>h))))}removeAdminRole(t){return console.log("AdminUsersService: Removing admin role from user:",t),this.http.patch(`${this.superAdminApiUrl}/removeAdmin/${t}`,{},{headers:new g(this.getAuthHeaders())}).pipe(f(e=>{console.log("AdminUsersService: Remove admin role response:",e)}),U(e=>(console.error("AdminUsersService: Remove admin role error:",e),A(()=>e))))}changeUserName(t,e){return console.log("AdminUsersService: Changing username for user:",t,"New username:",e),this.http.patch(`${this.superAdminApiUrl}/changeUserName/${t}`,{username:e},{headers:new g(this.getAuthHeaders())}).pipe(f(i=>{console.log("AdminUsersService: Change username response:",i)}),U(i=>(console.error("AdminUsersService: Change username error:",i),A(()=>i))))}getAllAdmins(){return console.log("AdminUsersService: Retrieving all admins"),this.http.get(`${this.superAdminApiUrl}/admins`,{headers:new g(this.getAuthHeaders())}).pipe(f(t=>{console.log("AdminUsersService: Get all admins response:",t)}),U(t=>(console.error("AdminUsersService: Get all admins error:",t),A(()=>t))))}getAdminById(t){return console.log("AdminUsersService: Retrieving admin by ID:",t),this.http.get(`${this.superAdminApiUrl}/admins/${t}`,{headers:new g(this.getAuthHeaders())}).pipe(f(e=>{console.log("AdminUsersService: Get admin by ID response:",e)}),U(e=>(console.error("AdminUsersService: Get admin by ID error:",e),A(()=>e))))}getAuthHeaders(){let t=localStorage.getItem("token");return t?{Authorization:`Access ${t}`}:{}}static \u0275fac=function(e){return new(e||r)(O(z))};static \u0275prov=G({token:r,factory:r.\u0275fac,providedIn:"root"})};function ae(r,t){r&1&&(o(0,"div",20),E(1,"i",21),o(2,"p",22),m(3),l(4,"translate"),a()()),r&2&&(n(3),S(d(4,1,"COMPONENTS.STATUS.LOADING")))}function le(r,t){if(r&1){let e=N();o(0,"div",23)(1,"p",24),m(2),a(),o(3,"button",25),_("click",function(){v(e);let s=u();return b(s.reload())}),m(4),l(5,"translate"),a()()}if(r&2){let e=u();n(2),S(e.error),n(2),x(" ",d(5,2,"ADMIN.USERS_MANAGEMENT.RETRY")," ")}}function de(r,t){if(r&1&&(E(0,"img",45),l(1,"translate")),r&2){let e=u().$implicit;p("src",e.profilePic.secure_url,B)("alt",d(1,2,"COMPONENTS.ACCESSIBILITY.ALT_TEXTS.PROFILE_IMAGE"))}}function ce(r,t){r&1&&(o(0,"div",46),m(1),l(2,"translate"),a()),r&2&&(n(),x(" ",d(2,1,"COMPONENTS.STATUS.NOT_AVAILABLE")," "))}function pe(r,t){r&1&&(o(0,"span",47),m(1),l(2,"translate"),a()),r&2&&(n(),S(d(2,1,"ADMIN.USERS_MANAGEMENT.STATUS.BLOCKED")))}function me(r,t){r&1&&(o(0,"span",48),m(1),l(2,"translate"),a()),r&2&&(n(),S(d(2,1,"ADMIN.USERS_MANAGEMENT.STATUS.ACTIVE")))}function ue(r,t){r&1&&(o(0,"span",49),m(1),l(2,"translate"),a()),r&2&&(n(),S(d(2,1,"ADMIN.USERS_MANAGEMENT.STATUS.UNCONFIRMED")))}function Se(r,t){if(r&1){let e=N();o(0,"button",57),l(1,"translate"),_("click",function(){v(e);let s=u(2).$implicit,c=u(2);return b(c.confirmUser(s))}),E(2,"i",58),a()}r&2&&p("title",d(1,1,"ADMIN.USERS_MANAGEMENT.ACTIONS.CONFIRM_USER"))}function ge(r,t){if(r&1){let e=N();o(0,"button",59),l(1,"translate"),_("click",function(){v(e);let s=u(2).$implicit,c=u(2);return b(c.addAdminRole(s))}),E(2,"i",60),a()}r&2&&p("title",d(1,1,"ADMIN.USERS_MANAGEMENT.ACTIONS.ADD_ADMIN_ROLE"))}function he(r,t){if(r&1){let e=N();o(0,"button",61),l(1,"translate"),_("click",function(){v(e);let s=u(2).$implicit,c=u(2);return b(c.removeAdminRole(s))}),E(2,"i",62),a()}r&2&&p("title",d(1,1,"ADMIN.USERS_MANAGEMENT.ACTIONS.REMOVE_ADMIN_ROLE"))}function _e(r,t){if(r&1){let e=N();C(0),M(1,Se,3,3,"button",50)(2,ge,3,3,"button",51)(3,he,3,3,"button",52),o(4,"button",53),l(5,"translate"),_("click",function(){v(e);let s=u().$implicit,c=u(2);return b(c.blockUser(s))}),E(6,"i",54),a(),o(7,"button",55),l(8,"translate"),_("click",function(){v(e);let s=u().$implicit,c=u(2);return b(c.deleteUser(s))}),E(9,"i",56),a(),R()}if(r&2){let e=u().$implicit;n(),p("ngIf",!e.isConfirmed),n(),p("ngIf",e.role!=="Admin"&&e.role!=="SuperAdmin"),n(),p("ngIf",e.role==="Admin"),n(),p("title",d(5,5,"ADMIN.USERS_MANAGEMENT.ACTIONS.BLOCK_USER")),n(3),p("title",d(8,7,"ADMIN.USERS_MANAGEMENT.ACTIONS.DELETE_USER"))}}function Ee(r,t){if(r&1){let e=N();C(0),o(1,"button",63),l(2,"translate"),_("click",function(){v(e);let s=u().$implicit,c=u(2);return b(c.unblockUser(s))}),E(3,"i",64),m(4),l(5,"translate"),a(),R()}r&2&&(n(),p("title",d(2,2,"ADMIN.USERS_MANAGEMENT.ACTIONS.UNBLOCK_USER")),n(3),x("",d(5,4,"ADMIN.USERS_MANAGEMENT.UNBLOCK")," "))}function Ae(r,t){if(r&1){let e=N();C(0),o(1,"button",65),l(2,"translate"),_("click",function(){v(e);let s=u().$implicit,c=u(2);return b(c.undeleteUser(s))}),E(3,"i",66),m(4),l(5,"translate"),a(),R()}r&2&&(n(),p("title",d(2,2,"ADMIN.USERS_MANAGEMENT.ACTIONS.RESTORE_USER")),n(3),x("",d(5,4,"ADMIN.USERS_MANAGEMENT.RESTORE")," "))}function Ue(r,t){if(r&1&&(o(0,"tr",34)(1,"td",30),M(2,de,2,4,"img",35)(3,ce,3,3,"div",36),a(),o(4,"td",30)(5,"div",37),m(6),a(),o(7,"div",38),m(8),l(9,"translate"),l(10,"date"),a()(),o(11,"td",39),m(12),a(),o(13,"td",40),m(14),a(),o(15,"td",30),M(16,pe,3,3,"span",41)(17,me,3,3,"span",42)(18,ue,3,3,"span",43),a(),o(19,"td",44),M(20,_e,10,9,"ng-container",19)(21,Ee,6,6,"ng-container",19)(22,Ae,6,6,"ng-container",19),a()()),r&2){let e=t.$implicit,i=u(2);n(2),p("ngIf",e.profilePic==null?null:e.profilePic.secure_url),n(),p("ngIf",!(e.profilePic!=null&&e.profilePic.secure_url)),n(3),S(e.fullName),n(2),$("",d(9,13,"ADMIN.USERS_MANAGEMENT.TABLE.JOINED")," ",j(10,15,e.createdAt,"mediumDate")),n(4),S(e.email),n(2),S(e.role),n(2),p("ngIf",e.isBlocked),n(),p("ngIf",!e.isBlocked&&e.isConfirmed),n(),p("ngIf",!e.isConfirmed),n(2),p("ngIf",i.activeTab==="active"),n(),p("ngIf",i.activeTab==="blocked"),n(),p("ngIf",i.activeTab==="deleted")}}function fe(r,t){if(r&1&&(o(0,"div")(1,"div",26)(2,"table",27)(3,"thead",28)(4,"tr",29)(5,"th",30),m(6),l(7,"translate"),a(),o(8,"th",30),m(9),l(10,"translate"),a(),o(11,"th",30),m(12),l(13,"translate"),a(),o(14,"th",30),m(15),l(16,"translate"),a(),o(17,"th",30),m(18),l(19,"translate"),a(),o(20,"th",31),m(21),l(22,"translate"),a()()(),o(23,"tbody",32),M(24,Ue,23,18,"tr",33),a()()()()),r&2){let e=u();n(6),S(d(7,7,"ADMIN.USERS_MANAGEMENT.TABLE.PROFILE")),n(3),S(d(10,9,"ADMIN.USERS_MANAGEMENT.TABLE.NAME")),n(3),S(d(13,11,"ADMIN.USERS_MANAGEMENT.TABLE.EMAIL")),n(3),S(d(16,13,"ADMIN.USERS_MANAGEMENT.TABLE.ROLE")),n(3),S(d(19,15,"ADMIN.USERS_MANAGEMENT.TABLE.STATUS")),n(3),S(d(22,17,"ADMIN.USERS_MANAGEMENT.TABLE.ACTIONS")),n(3),p("ngForOf",e.getCurrentTabData())}}var ne=class r{constructor(t,e,i){this.adminUsersService=t;this.languageService=e;this.translateService=i}users=[];blockedUsers=[];deletedUsers=[];filteredUsers=[];filteredBlockedUsers=[];filteredDeletedUsers=[];loading=!1;blockedLoading=!1;deletedLoading=!1;error=null;activeTab="active";searchQuery="";isSuperAdmin(){let t=JSON.parse(localStorage.getItem("currentUser")||"{}");return t.role==="SuperAdmin"||t.role==="Admin"}ngOnInit(){this.loadUsers()}loadUsers(){this.loading=!0,this.error=null,console.log("UsersSettingsComponent: Starting to load users..."),console.log("UsersSettingsComponent: Current token:",localStorage.getItem("token"));let t={isBlocked:!1,isDeleted:!1};this.adminUsersService.getUsers(t).subscribe({next:e=>{console.log("UsersSettingsComponent: Success response:",e);let i=e.users?.data||e.data||e;(t?.isBlocked===!1||t?.isDeleted===!1)&&Array.isArray(i)&&(i=i.filter(s=>!s.isBlocked&&!s.isDeleted),console.log("UsersSettingsComponent: Filtered users (frontend):",i)),this.users=i,this.filteredUsers=i,this.applySearchFilter(),this.loading=!1,console.log("UsersSettingsComponent: Users loaded:",this.users)},error:e=>{console.error("UsersSettingsComponent: Error details:",e),this.error=e.message||this.translateService.instant("ADMIN.USERS_MANAGEMENT.MESSAGES.GENERIC_ERROR")||"Failed to load users",this.loading=!1,console.log("UsersSettingsComponent: Error message:",this.error)}})}loadBlockedUsers(){this.blockedLoading=!0,this.error=null,console.log("UsersSettingsComponent: Starting to load blocked users...");let t={isBlocked:!0,isDeleted:!1};this.adminUsersService.getUsers(t).subscribe({next:e=>{console.log("UsersSettingsComponent: Blocked users response:",e);let i=e.users?.data||e.data||e;(t?.isBlocked===!0||t?.isDeleted===!1)&&Array.isArray(i)&&(i=i.filter(s=>s.isBlocked&&!s.isDeleted),console.log("UsersSettingsComponent: Filtered blocked users (frontend):",i)),this.blockedUsers=i,this.filteredBlockedUsers=i,this.applySearchFilter(),this.blockedLoading=!1,console.log("UsersSettingsComponent: Blocked users loaded:",this.blockedUsers)},error:e=>{console.error("UsersSettingsComponent: Error loading blocked users:",e),this.error=e.message||this.translateService.instant("ADMIN.USERS_MANAGEMENT.MESSAGES.GENERIC_ERROR")||"Failed to load blocked users",this.blockedLoading=!1,console.log("UsersSettingsComponent: Error message:",this.error)}})}loadDeletedUsers(){this.deletedLoading=!0,this.error=null,console.log("UsersSettingsComponent: Starting to load deleted users...");let t={isDeleted:!0};this.adminUsersService.getUsers(t).subscribe({next:e=>{console.log("UsersSettingsComponent: Deleted users response:",e);let i=e.users?.data||e.data||e;t?.isDeleted===!0&&Array.isArray(i)&&(i=i.filter(s=>s.isDeleted),console.log("UsersSettingsComponent: Filtered deleted users (frontend):",i)),this.deletedUsers=i,this.filteredDeletedUsers=i,this.applySearchFilter(),this.deletedLoading=!1,console.log("UsersSettingsComponent: Deleted users loaded:",this.deletedUsers)},error:e=>{console.error("UsersSettingsComponent: Error loading deleted users:",e),this.error=e.message||this.translateService.instant("ADMIN.USERS_MANAGEMENT.MESSAGES.GENERIC_ERROR")||"Failed to load deleted users",this.deletedLoading=!1,console.log("UsersSettingsComponent: Error message:",this.error)}})}switchTab(t){this.activeTab=t,t==="blocked"&&this.blockedUsers.length===0&&this.loadBlockedUsers(),t==="deleted"&&this.deletedUsers.length===0&&this.loadDeletedUsers()}isModalOpen=!1;editMode=!1;form={name:"",email:"",role:"Viewer"};editingIndex=null;openAddUserModal(){this.editMode=!1,this.form={name:"",email:"",role:"Viewer"},this.isModalOpen=!0}editUser(t){this.editMode=!0,this.form=y({},t),this.editingIndex=this.users.indexOf(t),this.isModalOpen=!0}saveUser(){this.editMode&&this.editingIndex!==null?this.users[this.editingIndex]=y({},this.form):this.users.push(y({},this.form)),this.closeModal()}confirmUser(t){this.adminUsersService.confirmUser(t._id).subscribe({next:()=>{this.loadUsers()},error:e=>{this.error=e.message||this.translateService.instant("ADMIN.USERS_MANAGEMENT.MESSAGES.GENERIC_ERROR")}})}blockUser(t){let e=prompt(this.translateService.instant("ADMIN.USERS_MANAGEMENT.MESSAGES.ENTER_BLOCK_REASON"))||"Blocked by admin",i=prompt("Enter userName:")||t.username||t.name||"",s=prompt("Enter confirmation password:");s?this.adminUsersService.blockUser(t._id,e,i,s).subscribe({next:()=>{this.loadUsers()},error:c=>{this.error=c.message||this.translateService.instant("ADMIN.USERS_MANAGEMENT.MESSAGES.GENERIC_ERROR")}}):this.error="Confirmation password is required"}unblockUser(t){this.adminUsersService.unblockUserWithAccept(t._id).subscribe({next:()=>{this.activeTab==="blocked"?this.loadBlockedUsers():this.loadUsers()},error:e=>{this.error=e.message||this.translateService.instant("ADMIN.USERS_MANAGEMENT.MESSAGES.GENERIC_ERROR")}})}deleteUser(t){confirm(this.translateService.instant("ADMIN.USERS_MANAGEMENT.MESSAGES.CONFIRM_DELETE"))&&this.adminUsersService.deleteUser(t._id).subscribe({next:()=>{this.loadUsers()},error:e=>{this.error=e.message||this.translateService.instant("ADMIN.USERS_MANAGEMENT.MESSAGES.GENERIC_ERROR")}})}undeleteUser(t){confirm(this.translateService.instant("ADMIN.USERS_MANAGEMENT.MESSAGES.CONFIRM_UNDELETE"))&&this.adminUsersService.undeleteUser(t._id).subscribe({next:()=>{this.activeTab==="deleted"?this.loadDeletedUsers():this.loadUsers()},error:e=>{this.error=e.message||this.translateService.instant("ADMIN.USERS_MANAGEMENT.MESSAGES.GENERIC_ERROR")}})}addAdminRole(t){if(confirm(this.translateService.instant("ADMIN.USERS_MANAGEMENT.MESSAGES.CONFIRM_ADD_ADMIN"))){let e=prompt("Enter userName:");if(e){let i=prompt("Enter confirmation password:");if(i){let s=JSON.parse(localStorage.getItem("currentUser")||"{}");this.adminUsersService.addAdminRole(t._id,i,s.email||t.email,e).subscribe({next:()=>{this.loadUsers()},error:c=>{this.error=c.message||this.translateService.instant("ADMIN.USERS_MANAGEMENT.MESSAGES.GENERIC_ERROR")}})}else this.error="Confirmation password is required"}else this.error="UserName is required"}}removeAdminRole(t){confirm(this.translateService.instant("ADMIN.USERS_MANAGEMENT.MESSAGES.CONFIRM_REMOVE_ADMIN"))&&this.adminUsersService.removeAdminRole(t._id).subscribe({next:()=>{this.loadUsers()},error:e=>{this.error=e.message||this.translateService.instant("ADMIN.USERS_MANAGEMENT.MESSAGES.GENERIC_ERROR")}})}changeUserName(t){let e=prompt(this.translateService.instant("ADMIN.USERS_MANAGEMENT.MESSAGES.ENTER_NEW_USERNAME"),t.username||t.name||"");e&&e.trim()&&this.adminUsersService.changeUserName(t._id,e.trim()).subscribe({next:()=>{this.loadUsers()},error:i=>{this.error=i.message||this.translateService.instant("ADMIN.USERS_MANAGEMENT.MESSAGES.GENERIC_ERROR")}})}loadAllAdmins(){this.loading=!0,this.error=null,this.adminUsersService.getAllAdmins().subscribe({next:t=>{console.log("UsersSettingsComponent: All admins response:",t);let e=t.admins?.data||t.data||t;this.users=e,this.loading=!1},error:t=>{console.error("UsersSettingsComponent: Error loading all admins:",t),this.error=t.message||this.translateService.instant("ADMIN.USERS_MANAGEMENT.MESSAGES.GENERIC_ERROR"),this.loading=!1}})}loadAdminById(t){this.loading=!0,this.error=null,this.adminUsersService.getAdminById(t).subscribe({next:e=>{console.log("UsersSettingsComponent: Admin by ID response:",e);let i=e.admin?.data||e.data||e;this.users=[i],this.loading=!1},error:e=>{console.error("UsersSettingsComponent: Error loading admin by ID:",e),this.error=e.message||this.translateService.instant("ADMIN.USERS_MANAGEMENT.MESSAGES.GENERIC_ERROR"),this.loading=!1}})}onSearchChange(){this.applySearchFilter()}applySearchFilter(){if(!this.searchQuery||this.searchQuery.trim()===""){this.filteredUsers=[...this.users],this.filteredBlockedUsers=[...this.blockedUsers],this.filteredDeletedUsers=[...this.deletedUsers];return}let t=this.searchQuery.toLowerCase().trim();this.filteredUsers=this.users.filter(e=>e.email&&e.email.toLowerCase().includes(t)),this.filteredBlockedUsers=this.blockedUsers.filter(e=>e.email&&e.email.toLowerCase().includes(t)),this.filteredDeletedUsers=this.deletedUsers.filter(e=>e.email&&e.email.toLowerCase().includes(t))}getCurrentTabData(){switch(this.activeTab){case"active":return this.filteredUsers;case"blocked":return this.filteredBlockedUsers;case"deleted":return this.filteredDeletedUsers;default:return this.filteredUsers}}closeModal(){this.isModalOpen=!1}reload(){switch(this.error=null,this.activeTab){case"active":this.loadUsers();break;case"blocked":this.loadBlockedUsers();break;case"deleted":this.loadDeletedUsers();break}}static \u0275fac=function(e){return new(e||r)(I(w),I(re),I(J))};static \u0275cmp=L({type:r,selectors:[["app-users-settings"]],decls:29,vars:32,consts:[[1,"min-h-screen","bg-gradient-to-b","from-[#041f1e]","to-[#072927]","text-white","py-16","px-6","md:px-12","arabic-font"],[1,"max-w-7xl","mx-auto","bg-[#103d3e]/90","backdrop-blur-xl","rounded-2xl","shadow-2xl","border","border-cyan-600/30","p-8"],[1,"flex","flex-col","gap-6","mb-10"],[1,"flex","flex-col","md:flex-row","justify-between","items-center","gap-4"],[1,"flex","items-center","gap-3"],[1,"bg-gradient-to-r","from-cyan-500","to-emerald-600","p-3","rounded-xl","shadow-md"],[1,"fa-solid","fa-users","text-white","text-2xl"],[1,"text-3xl","font-bold","tracking-tight","text-cyan-400"],[1,"flex","bg-[#123837]/70","rounded-lg","overflow-hidden","border","border-cyan-600/20","shadow-inner"],[1,"px-5","py-2","text-sm","font-medium","hover:bg-cyan-500/70","transition-colors",3,"click"],[1,"px-5","py-2","text-sm","font-medium","hover:bg-orange-500/70","transition-colors",3,"click"],[1,"px-5","py-2","text-sm","font-medium","hover:bg-red-500/70","transition-colors",3,"click"],[1,"flex","justify-center"],[1,"relative","w-full","max-w-md"],[1,"absolute","inset-y-0","left-0","pl-3","flex","items-center","pointer-events-none"],[1,"fa-solid","fa-search","text-gray-400"],["type","text",1,"w-full","pl-10","pr-4","py-3","bg-[#123837]/70","border","border-cyan-600/20","rounded-lg","text-white","placeholder-gray-400","focus:outline-none","focus:ring-2","focus:ring-cyan-500","focus:border-transparent","backdrop-blur-sm",3,"ngModelChange","input","ngModel","placeholder"],["class","flex flex-col items-center py-20",4,"ngIf"],["class","text-center bg-red-900/20 border border-red-500/30 rounded-lg py-8 px-4 shadow-md",4,"ngIf"],[4,"ngIf"],[1,"flex","flex-col","items-center","py-20"],[1,"fa-solid","fa-spinner","animate-spin","text-4xl","text-cyan-400","mb-4"],[1,"text-gray-400","text-lg"],[1,"text-center","bg-red-900/20","border","border-red-500/30","rounded-lg","py-8","px-4","shadow-md"],[1,"text-red-300","mb-4","font-medium"],[1,"bg-red-600","hover:bg-red-700","px-4","py-2","rounded-lg","font-medium",3,"click"],[1,"overflow-x-auto","rounded-xl","border","border-cyan-600/10","shadow-inner"],[1,"min-w-full","text-sm","bg-[#0f2f2f]/70"],[1,"bg-[#0d2728]/80","border-b","border-cyan-600/30"],[1,"text-left","text-cyan-200","uppercase","tracking-wider","text-xs"],[1,"py-3","px-4"],[1,"py-3","px-4","text-center"],[1,"divide-y","divide-slate-700/50"],["class","hover:bg-[#164747]/40 transition-colors duration-150",4,"ngFor","ngForOf"],[1,"hover:bg-[#164747]/40","transition-colors","duration-150"],["class","w-9 h-9 rounded-full object-cover border border-cyan-600/30 shadow-sm",3,"src","alt",4,"ngIf"],["class","w-9 h-9 rounded-full bg-slate-600 flex items-center justify-center text-xs text-white",4,"ngIf"],[1,"font-semibold","text-white"],[1,"text-xs","text-gray-400"],[1,"py-3","px-4","text-gray-300"],[1,"py-3","px-4","text-cyan-300"],["class","text-red-400",4,"ngIf"],["class","text-green-400",4,"ngIf"],["class","text-yellow-400",4,"ngIf"],[1,"py-3","px-4","text-center","space-x-1"],[1,"w-9","h-9","rounded-full","object-cover","border","border-cyan-600/30","shadow-sm",3,"src","alt"],[1,"w-9","h-9","rounded-full","bg-slate-600","flex","items-center","justify-center","text-xs","text-white"],[1,"text-red-400"],[1,"text-green-400"],[1,"text-yellow-400"],["class","text-green-400 hover:text-green-300 p-1.5 rounded transition",3,"title","click",4,"ngIf"],["class","text-blue-400 hover:text-blue-300 p-1.5 rounded transition",3,"title","click",4,"ngIf"],["class","text-purple-400 hover:text-purple-300 p-1.5 rounded transition",3,"title","click",4,"ngIf"],[1,"text-orange-400","hover:text-orange-300","p-1.5","rounded","transition",3,"click","title"],[1,"fas","fa-ban"],[1,"text-red-500","hover:text-red-400","p-1.5","rounded","transition",3,"click","title"],[1,"fas","fa-trash-alt"],[1,"text-green-400","hover:text-green-300","p-1.5","rounded","transition",3,"click","title"],[1,"fas","fa-check"],[1,"text-blue-400","hover:text-blue-300","p-1.5","rounded","transition",3,"click","title"],[1,"fas","fa-user-plus"],[1,"text-purple-400","hover:text-purple-300","p-1.5","rounded","transition",3,"click","title"],[1,"fas","fa-user-minus"],[1,"bg-green-600","hover:bg-green-700","text-white","px-3","py-1.5","rounded","text-sm","font-medium","transition",3,"click","title"],[1,"fas","fa-unlock-alt","mr-1"],[1,"bg-blue-600","hover:bg-blue-700","text-white","px-3","py-1.5","rounded","text-sm","font-medium","transition",3,"click","title"],[1,"fas","fa-undo","mr-1"]],template:function(e,i){e&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),E(6,"i",6),a(),o(7,"h2",7),m(8),l(9,"translate"),a()(),o(10,"div",8)(11,"button",9),_("click",function(){return i.switchTab("active")}),m(12),l(13,"translate"),a(),o(14,"button",10),_("click",function(){return i.switchTab("blocked")}),m(15),l(16,"translate"),a(),o(17,"button",11),_("click",function(){return i.switchTab("deleted")}),m(18),l(19,"translate"),a()()(),o(20,"div",12)(21,"div",13)(22,"div",14),E(23,"i",15),a(),o(24,"input",16),l(25,"translate"),P("ngModelChange",function(c){return V(i.searchQuery,c)||(i.searchQuery=c),c}),_("input",function(){return i.onSearchChange()}),a()()()(),M(26,ae,5,3,"div",17)(27,le,6,4,"div",18)(28,fe,25,19,"div",19),a()()),e&2&&(n(8),x(" ",d(9,22,"ADMIN.USERS_MANAGEMENT.TITLE")," "),n(3),T("bg-cyan-600",i.activeTab==="active")("text-white",i.activeTab==="active"),n(),x(" ",d(13,24,"ADMIN.USERS_MANAGEMENT.ACTIVE_USERS")," "),n(2),T("bg-orange-600",i.activeTab==="blocked")("text-white",i.activeTab==="blocked"),n(),x(" ",d(16,26,"ADMIN.USERS_MANAGEMENT.BLOCKED_USERS")," "),n(2),T("bg-red-600",i.activeTab==="deleted")("text-white",i.activeTab==="deleted"),n(),x(" ",d(19,28,"ADMIN.USERS_MANAGEMENT.DELETED_USERS")," "),n(6),p("placeholder",H(d(25,30,"ADMIN.USERS_MANAGEMENT.SEARCH_PLACEHOLDER"))),F("ngModel",i.searchQuery),n(2),p("ngIf",i.loading||i.blockedLoading||i.deletedLoading),n(),p("ngIf",i.error),n(),p("ngIf",!i.loading&&!i.error))},dependencies:[K,q,W,ie,Z,ee,te,X,Q,Y],encapsulation:2})};export{ne as UsersSettingsComponent};
