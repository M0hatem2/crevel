import{c as j,d as H}from"./chunk-SWGBIMMQ.js";import{a as $}from"./chunk-DQIHD3SX.js";import{a as C,b as M,c as O,f as U}from"./chunk-E3PR7NZM.js";import{j as F,k as D,o as R}from"./chunk-KT27TMF4.js";import{$ as E,Ab as o,Bb as x,Cb as l,Da as i,Ja as A,L as y,M as w,Mb as p,Nb as c,Pa as T,Q as I,U as _,Ua as v,aa as S,db as f,eb as r,fb as n,gb as m,j as B,mb as k,o as h,qb as b,sb as g,z as N}from"./chunk-IGH6FCT7.js";var u=class a{constructor(e){this.http=e}apiUrl=`${U.apiUrl}`;getNewBriefs(e){let t=`${this.apiUrl}/admin/newBrief`;console.log("AdminBrifNaveService: Making request to:",t);let d=new M;return e&&Object.keys(e).forEach(s=>{e[s]!==void 0&&(d=d.set(s,e[s]))}),this.http.get(t,{headers:new C(this.getAuthHeaders()),params:d}).pipe(w(s=>{console.log("AdminBrifNaveService: Response received:",s)}),N(s=>(console.error("AdminBrifNaveService: Error occurred:",s),h(()=>s))))}getAuthHeaders(){let e=localStorage.getItem("token");return e?{Authorization:`Access ${e}`}:{}}static \u0275fac=function(t){return new(t||a)(_(O))};static \u0275prov=I({token:a,factory:a.\u0275fac,providedIn:"root"})};function V(a,e){a&1&&m(0,"i",13)}function G(a,e){a&1&&m(0,"i",14)}function q(a,e){a&1&&(r(0,"div",15),m(1,"app-loading-spinner"),n())}function z(a,e){if(a&1){let t=k();r(0,"div",16),m(1,"i",17),r(2,"p",18),o(3),n(),r(4,"button",19),b("click",function(){E(t);let s=g();return S(s.onRefresh())}),o(5),p(6,"translate"),n()()}if(a&2){let t=g();i(3),x(t.error),i(2),l(" ",c(6,2,"BUTTONS.TRY_AGAIN")," ")}}function Y(a,e){a&1&&(r(0,"div",23),m(1,"i",24),r(2,"h3",25),o(3),p(4,"translate"),n(),r(5,"p",26),o(6),p(7,"translate"),n()()),a&2&&(i(3),x(c(4,2,"ADMIN.NEW_BRIEFS.NO_BRIEFS")),i(3),x(c(7,4,"ADMIN.NEW_BRIEFS.NO_BRIEFS_DESC")))}function J(a,e){if(a&1&&(r(0,"div",27)(1,"div",28)(2,"div",29)(3,"div",30),o(4),n(),r(5,"div")(6,"h3",31),o(7),n(),r(8,"p",32),m(9,"i",33),o(10),n()()(),r(11,"div",34)(12,"div",35),o(13),n(),r(14,"div",36),o(15),n()()(),r(16,"div",37)(17,"div")(18,"label",38),o(19),p(20,"translate"),n(),r(21,"div",39),o(22),n()(),r(23,"div",40)(24,"div")(25,"label",38),o(26),p(27,"translate"),n(),r(28,"div",41),m(29,"i",42),o(30),n()(),r(31,"div")(32,"label",38),o(33),p(34,"translate"),n(),r(35,"div",43),m(36,"i",44),o(37),n()()(),r(38,"div")(39,"label",45),o(40),p(41,"translate"),n(),r(42,"div",46),o(43),n()(),r(44,"div",47),m(45,"i",48),o(46),n()()()),a&2){let t=e.$implicit,d=g(2);i(4),l(" ",t.projectName.charAt(0).toUpperCase()," "),i(3),x(t.projectName),i(3),x(t.email),i(3),l(" #",t._id.slice(-8)," "),i(2),x(d.formatDate(t.createdAt)),i(4),l(" ",c(20,14,"ADMIN.NEW_BRIEFS.BUDGET")," "),i(3),l(" ",d.formatCurrency(t.budget)," "),i(4),l(" ",c(27,16,"ADMIN.NEW_BRIEFS.EMAIL")," "),i(4),l("",t.email," "),i(3),l(" ",c(34,18,"ADMIN.NEW_BRIEFS.CREATED_AT")," "),i(4),l("",d.formatDate(t.createdAt)," "),i(3),l(" ",c(41,20,"ADMIN.NEW_BRIEFS.DESCRIPTION")," "),i(3),l(" ",t.description," "),i(3),l(" Version: ",t.__v," ")}}function K(a,e){if(a&1&&(r(0,"div",20),v(1,Y,8,6,"div",21)(2,J,47,22,"div",22),n()),a&2){let t=g();i(),f("ngIf",t.newBriefs.length===0),i(),f("ngForOf",t.newBriefs)("ngForTrackBy",t.trackByBriefId)}}var W=class a{constructor(e){this.adminBrifNaveService=e}destroy$=new B;newBriefs=[];loading=!1;error=null;filters={};hasMore=!1;ngOnInit(){this.loadNewBriefs()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}loadNewBriefs(){this.loading=!0,this.error=null,this.adminBrifNaveService.getNewBriefs(this.filters).pipe(y(this.destroy$)).subscribe({next:e=>{this.newBriefs=e.newBriefs.data,this.hasMore=e.newBriefs.seeMore,this.loading=!1},error:e=>{this.error="\u0641\u0634\u0644 \u0641\u064A \u062A\u062D\u0645\u064A\u0644 \u0627\u0644\u0646\u0628\u0630\u0627\u062A \u0627\u0644\u062C\u062F\u064A\u062F\u0629. \u064A\u0631\u062C\u0649 \u0627\u0644\u0645\u062D\u0627\u0648\u0644\u0629 \u0645\u0631\u0629 \u0623\u062E\u0631\u0649.",this.loading=!1,console.error("\u062E\u0637\u0623 \u0641\u064A \u062A\u062D\u0645\u064A\u0644 \u0628\u064A\u0627\u0646\u0627\u062A \u0627\u0644\u0646\u0628\u0630\u0627\u062A \u0627\u0644\u062C\u062F\u064A\u062F\u0629:",e)}})}onRefresh(){this.loadNewBriefs()}trackByBriefId(e,t){return t._id}formatDate(e){return new Date(e).toLocaleDateString("ar-SA",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",calendar:"gregory"})}formatCurrency(e){return new Intl.NumberFormat("ar-SA",{style:"currency",currency:"EGP"}).format(e)}static \u0275fac=function(t){return new(t||a)(A(u))};static \u0275cmp=T({type:a,selectors:[["app-admin-brif-nave"]],decls:17,vars:12,consts:[[1,"min-h-screen","text-gray-100","py-16","px-6","flex","flex-col","items-center","arabic-font"],[1,"max-w-7xl","w-full"],[1,"flex","flex-col","md:flex-row","justify-between","items-center","mb-12","gap-6"],[1,"flex","items-center","gap-4"],[1,"bg-gradient-to-r","from-cyan-500","to-blue-600","rounded-xl","p-4","shadow-lg"],[1,"fa-solid","fa-file-alt","text-white","text-2xl"],[1,"text-4xl","font-bold","text-white","tracking-tight","drop-shadow-md"],[1,"flex","items-center","gap-2","px-6","py-2.5","bg-gradient-to-r","from-cyan-500","to-blue-600","text-white","text-sm","font-semibold","rounded-xl","hover:from-cyan-600","hover:to-blue-700","focus:outline-none","focus:ring-2","focus:ring-cyan-400","disabled:opacity-50","shadow-md","transition-all",3,"click","disabled"],["class","fa-solid fa-spinner animate-spin",4,"ngIf"],["class","fa-solid fa-rotate-right",4,"ngIf"],["class","flex flex-col items-center justify-center py-20",4,"ngIf"],["class","bg-red-900/30 border border-red-700/60 rounded-xl p-8 text-center shadow-lg max-w-xl mx-auto backdrop-blur-md",4,"ngIf"],["class","grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-8 mt-8",4,"ngIf"],[1,"fa-solid","fa-spinner","animate-spin"],[1,"fa-solid","fa-rotate-right"],[1,"flex","flex-col","items-center","justify-center","py-20"],[1,"bg-red-900/30","border","border-red-700/60","rounded-xl","p-8","text-center","shadow-lg","max-w-xl","mx-auto","backdrop-blur-md"],[1,"fa-solid","fa-triangle-exclamation","text-red-500","text-5xl","mb-3"],[1,"text-red-400","font-medium","mb-5"],[1,"px-6","py-2","bg-red-600","text-white","text-sm","font-semibold","rounded-lg","hover:bg-red-700","focus:ring-2","focus:ring-red-400","transition",3,"click"],[1,"grid","grid-cols-1","md:grid-cols-2","xl:grid-cols-3","gap-8","mt-8"],["class","col-span-full bg-[#101b1a]/70 rounded-2xl shadow-lg p-16 text-center border border-[#1e2f2d]/40 backdrop-blur-md",4,"ngIf"],["class","bg-[#101b1a]/60 border border-[#1e2f2d]/40 backdrop-blur-md rounded-2xl p-5 shadow-md hover:shadow-cyan-700/30 hover:scale-[1.02] transition-all duration-300 flex flex-col justify-between",4,"ngFor","ngForOf","ngForTrackBy"],[1,"col-span-full","bg-[#101b1a]/70","rounded-2xl","shadow-lg","p-16","text-center","border","border-[#1e2f2d]/40","backdrop-blur-md"],[1,"fa-regular","fa-file-alt","text-6xl","text-gray-500","mb-4"],[1,"text-xl","font-semibold","mb-2","text-gray-200"],[1,"text-gray-400"],[1,"bg-[#101b1a]/60","border","border-[#1e2f2d]/40","backdrop-blur-md","rounded-2xl","p-5","shadow-md","hover:shadow-cyan-700/30","hover:scale-[1.02]","transition-all","duration-300","flex","flex-col","justify-between"],[1,"flex","items-center","justify-between","mb-4","border-b","border-[#1e2f2d]/50","pb-3"],[1,"flex","items-center"],[1,"w-12","h-12","rounded-full","bg-gradient-to-r","from-cyan-500","to-blue-600","flex","items-center","justify-center","text-white","font-semibold","text-lg","shadow-md","mr-3"],[1,"text-lg","font-semibold","text-white"],[1,"text-gray-400","text-sm"],[1,"fa-regular","fa-envelope","mr-1"],[1,"text-xs","text-gray-400","text-right"],[1,"bg-slate-800/70","px-2","py-1","rounded-full","inline-block","font-mono","text-gray-300"],[1,"mt-1"],[1,"space-y-4"],[1,"text-xs","text-gray-400","uppercase","font-semibold","mb-1","block"],[1,"text-lg","text-green-400","font-bold","bg-slate-800/60","px-3","py-2","rounded-md"],[1,"grid","grid-cols-2","gap-4"],[1,"text-sm","bg-slate-800/60","px-3","py-2","rounded-md","truncate","text-gray-100"],[1,"fa-solid","fa-envelope","mr-1"],[1,"text-sm","bg-slate-800/60","px-3","py-2","rounded-md","text-gray-100"],[1,"fa-solid","fa-calendar","mr-1"],[1,"text-xs","text-gray-400","uppercase","font-semibold","mb-2","block"],[1,"bg-slate-800/60","border","border-slate-700/50","rounded-md","p-3","text-sm","text-gray-100","min-h-[80px]","max-h-[120px]","overflow-y-auto"],[1,"text-xs","text-gray-500","mt-3","flex","items-center","gap-1"],[1,"fa-solid","fa-code-branch"]],template:function(t,d){t&1&&(r(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),m(5,"i",5),n(),r(6,"h1",6),o(7),p(8,"translate"),n()(),r(9,"button",7),b("click",function(){return d.onRefresh()}),v(10,V,1,0,"i",8)(11,G,1,0,"i",9),o(12),p(13,"translate"),n()(),v(14,q,2,0,"div",10)(15,z,7,4,"div",11)(16,K,3,3,"div",12),n()()),t&2&&(i(7),l(" ",c(8,8,"ADMIN.NEW_BRIEFS.TITLE")," "),i(2),f("disabled",d.loading),i(),f("ngIf",d.loading),i(),f("ngIf",!d.loading),i(),l(" ",c(13,10,"COMPONENTS.BUTTONS.REFRESH")," "),i(2),f("ngIf",d.loading),i(),f("ngIf",d.error&&!d.loading),i(),f("ngIf",!d.loading&&!d.error))},dependencies:[R,F,D,H,$,j],encapsulation:2})};export{W as AdminBrifNave};
