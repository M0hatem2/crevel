import{a as H}from"./chunk-DQIHD3SX.js";import{b as W,d as A,g as T,p as I,s as R}from"./chunk-UMXV7FSD.js";import{a as E,c as V,f as U}from"./chunk-E3PR7NZM.js";import{i as P,j as L,k as O,o as k}from"./chunk-KT27TMF4.js";import{$ as m,Ab as a,Cb as F,Da as d,Eb as f,Fb as u,Gb as _,Ja as S,Pa as D,Q as w,U as v,Ua as b,aa as p,db as h,eb as i,fb as n,gb as c,mb as y,qb as x,sb as g,za as M}from"./chunk-IGH6FCT7.js";var C=class l{constructor(r){this.http=r}baseURL=U.baseUrl;token=localStorage.getItem("token");getHeaders(){return new E({Authorization:`Access ${this.token}`})}getFooter(){return this.http.get(`${this.baseURL}/admin/footer`,{headers:this.getHeaders()})}updateFooter(r){return console.log("API URL:",`${this.baseURL}/admin/footer`),console.log("Request data:",r),console.log("Headers:",this.getHeaders().keys()),this.http.patch(`${this.baseURL}/admin/footer`,r,{headers:this.getHeaders()})}changeLogo(r){let e=new FormData;return e.append("logo",r),this.http.patch(`${this.baseURL}/admin/footer/changeLogo`,e,{headers:this.getHeaders()})}setToken(r){this.token=r}static \u0275fac=function(e){return new(e||l)(v(V))};static \u0275prov=w({token:l,factory:l.\u0275fac,providedIn:"root"})};function q(l,r){l&1&&(i(0,"div",6),c(1,"app-loading-spinner"),n())}function Y(l,r){if(l&1){let e=y();i(0,"div",36)(1,"input",37),_("ngModelChange",function(t){let o=m(e).$implicit;return u(o.platform,t)||(o.platform=t),p(t)}),n(),i(2,"input",38),_("ngModelChange",function(t){let o=m(e).$implicit;return u(o.url,t)||(o.url=t),p(t)}),n(),i(3,"button",39),x("click",function(){let t=m(e).index,o=g(2);return p(o.removeSocialLink(t))}),c(4,"i",40),n()()}if(l&2){let e=r.$implicit;d(),f("ngModel",e.platform),d(),f("ngModel",e.url)}}function z(l,r){if(l&1&&(i(0,"div",41),a(1),n()),l&2){let e=g(2);h("ngClass",e.message.includes("\u2705")?"text-green-400":"text-red-400"),d(),F(" ",e.message," ")}}function G(l,r){if(l&1){let e=y();i(0,"div",7)(1,"div",8),c(2,"img",9),i(3,"input",10),x("change",function(t){m(e);let o=g();return p(o.onLogoSelect(t))}),n(),i(4,"button",11),x("click",function(){m(e);let t=g();return p(t.uploadLogo())}),c(5,"i",12),a(6," Upload New Logo "),n()(),i(7,"div",13)(8,"div")(9,"label",14),c(10,"i",15),a(11," Website Name "),i(12,"span",16),a(13,"*"),n()(),i(14,"input",17),_("ngModelChange",function(t){m(e);let o=g();return u(o.footerData.website.name,t)||(o.footerData.website.name=t),p(t)}),n()(),i(15,"div")(16,"label",14),c(17,"i",18),a(18," Website URL "),i(19,"span",16),a(20,"*"),n()(),i(21,"input",17),_("ngModelChange",function(t){m(e);let o=g();return u(o.footerData.website.url,t)||(o.footerData.website.url=t),p(t)}),n()(),i(22,"div")(23,"label",14),c(24,"i",19),a(25," Location (EN) "),n(),i(26,"input",20),_("ngModelChange",function(t){m(e);let o=g();return u(o.footerData.location.title_en,t)||(o.footerData.location.title_en=t),p(t)}),n()(),i(27,"div")(28,"label",14),c(29,"i",21),a(30," Location (AR) "),n(),i(31,"input",20),_("ngModelChange",function(t){m(e);let o=g();return u(o.footerData.location.title_ar,t)||(o.footerData.location.title_ar=t),p(t)}),n()(),i(32,"div")(33,"label",14),c(34,"i",22),a(35," Google Maps URL "),n(),i(36,"input",20),_("ngModelChange",function(t){m(e);let o=g();return u(o.footerData.location.url,t)||(o.footerData.location.url=t),p(t)}),n()(),i(37,"div")(38,"label",14),c(39,"i",23),a(40," Mobile "),i(41,"span",16),a(42,"*"),n()(),i(43,"input",17),_("ngModelChange",function(t){m(e);let o=g();return u(o.footerData.mobile,t)||(o.footerData.mobile=t),p(t)}),n()(),i(44,"div")(45,"label",14),c(46,"i",24),a(47," Email "),i(48,"span",16),a(49,"*"),n()(),i(50,"input",17),_("ngModelChange",function(t){m(e);let o=g();return u(o.footerData.email,t)||(o.footerData.email=t),p(t)}),n()(),i(51,"div")(52,"label",14),c(53,"i",25),a(54," Copyright "),n(),i(55,"input",20),_("ngModelChange",function(t){m(e);let o=g();return u(o.footerData.copyright,t)||(o.footerData.copyright=t),p(t)}),n()()(),i(56,"div")(57,"div",26)(58,"h3",27),c(59,"i",28),a(60," Social Links "),n(),i(61,"button",29),x("click",function(){m(e);let t=g();return p(t.addSocialLink())}),c(62,"i",30),a(63," Add "),n()(),b(64,Y,5,2,"div",31),n(),i(65,"div",32)(66,"button",33),x("click",function(){m(e);let t=g();return p(t.saveChanges())}),c(67,"i",34),a(68," Save All Changes "),n()(),b(69,z,2,2,"div",35),n()}if(l&2){let e=g();d(2),h("src",e.footerData.logo.secure_url,M),d(12),f("ngModel",e.footerData.website.name),d(7),f("ngModel",e.footerData.website.url),d(5),f("ngModel",e.footerData.location.title_en),d(5),f("ngModel",e.footerData.location.title_ar),d(5),f("ngModel",e.footerData.location.url),d(7),f("ngModel",e.footerData.mobile),d(7),f("ngModel",e.footerData.email),d(5),f("ngModel",e.footerData.copyright),d(9),h("ngForOf",e.footerData.social),d(5),h("ngIf",e.message)}}var B=class l{constructor(r){this.footerService=r}footerData=null;loading=!1;message="";selectedLogo=null;ngOnInit(){this.loadFooter()}loadFooter(){this.loading=!0,this.footerService.getFooter().subscribe({next:r=>{this.footerData=r.footer,this.loading=!1},error:()=>{this.message="Error loading footer data",this.loading=!1}})}saveChanges(){if(!this.footerData)return;if(!this.footerData.website?.name||!this.footerData.website?.url){this.message="Website name and URL are required \u274C";return}if(!this.footerData.mobile||!this.footerData.email){this.message="Mobile and email are required \u274C";return}let r={website:{name:this.footerData.website.name,url:this.footerData.website.url},location:{title_en:this.footerData.location.title_en,title_ar:this.footerData.location.title_ar,url:this.footerData.location.url},mobile:this.footerData.mobile,email:this.footerData.email,copyright:this.footerData.copyright,social:this.footerData.social.filter(e=>e.platform&&e.url).map(e=>({platform:e.platform,url:e.url}))};console.log("Sending update data:",r),this.footerService.updateFooter(r).subscribe({next:e=>{this.message=e.message||"Updated successfully \u2705",this.loadFooter()},error:e=>{console.error("Update error:",e),e.status===400?this.message="Invalid data provided. Please check all fields \u274C":this.message=`Error updating footer: ${e.message||"Unknown error"} \u274C`}})}onLogoSelect(r){this.selectedLogo=r.target.files[0]}uploadLogo(){this.selectedLogo&&this.footerService.changeLogo(this.selectedLogo).subscribe({next:r=>{this.message=r.message||"Logo updated successfully \u2705",this.loadFooter()},error:()=>{this.message="Error uploading logo \u274C"}})}addSocialLink(){this.footerData&&this.footerData.social.push({platform:"",url:""})}removeSocialLink(r){this.footerData&&this.footerData.social.splice(r,1)}static \u0275fac=function(e){return new(e||l)(S(C))};static \u0275cmp=D({type:l,selectors:[["app-admin-footer"]],decls:7,vars:2,consts:[[1,"min-h-screen","flex","items-center","justify-center","text-white","arabic-font"],[1,"w-full","max-w-5xl","border","border-[#1e2f2d]","rounded-2xl","shadow-2xl","p-8"],[1,"text-4xl","font-bold","mb-10","text-center","text-[#57c4c1]","flex","items-center","justify-center","gap-2"],[1,"fa-solid","fa-gear"],["class","text-center py-6",4,"ngIf"],["class","space-y-10",4,"ngIf"],[1,"text-center","py-6"],[1,"space-y-10"],[1,"flex","flex-col","items-center","space-y-3"],["alt","Logo",1,"w-28","h-28","object-contain","rounded-xl","border","border-white/10","shadow-md",3,"src"],["type","file",1,"text-sm","text-gray-300",3,"change"],[1,"bg-[#57c4c1]","hover:bg-[#3fa9a7]","transition-all","text-white","px-4","py-2","rounded-lg","font-medium",3,"click"],[1,"fa-solid","fa-upload","mr-2"],[1,"grid","md:grid-cols-2","gap-6"],[1,"block","text-sm","mb-1","flex","items-center","gap-2"],[1,"fa-solid","fa-globe"],[1,"text-red-400"],["placeholder","Required","required","",1,"w-full","p-2","rounded-lg","bg-[#0f1c20]","border","border-[#1e2f2d]",3,"ngModelChange","ngModel"],[1,"fa-solid","fa-link"],[1,"fa-solid","fa-location-dot"],[1,"w-full","p-2","rounded-lg","bg-[#0f1c20]","border","border-[#1e2f2d]",3,"ngModelChange","ngModel"],[1,"fa-solid","fa-map-pin"],[1,"fa-solid","fa-map-location-dot"],[1,"fa-solid","fa-phone"],[1,"fa-solid","fa-envelope"],[1,"fa-regular","fa-copyright"],[1,"flex","justify-between","items-center","mt-6","mb-2"],[1,"text-lg","font-semibold","flex","items-center","gap-2"],[1,"fa-solid","fa-share-nodes"],[1,"bg-green-600","hover:bg-green-700","text-white","px-3","py-1","rounded-lg","text-sm","flex","items-center","gap-1",3,"click"],[1,"fa-solid","fa-plus"],["class","flex items-center gap-2 mb-2",4,"ngFor","ngForOf"],[1,"text-center","mt-10"],[1,"bg-[#57c4c1]","hover:bg-[#3fa9a7]","text-white","px-8","py-3","rounded-xl","font-semibold","transition-all",3,"click"],[1,"fa-solid","fa-floppy-disk","mr-2"],["class","message text-center mt-4 text-sm",3,"ngClass",4,"ngIf"],[1,"flex","items-center","gap-2","mb-2"],["placeholder","Platform (e.g., Facebook)",1,"flex-1","p-2","rounded-lg","bg-[#0f1c20]","border","border-[#1e2f2d]",3,"ngModelChange","ngModel"],["placeholder","URL",1,"flex-[2]","p-2","rounded-lg","bg-[#0f1c20]","border","border-[#1e2f2d]",3,"ngModelChange","ngModel"],["title","Remove",1,"bg-red-600","hover:bg-red-700","text-white","px-2","py-2","rounded-lg",3,"click"],[1,"fa-solid","fa-trash"],[1,"message","text-center","mt-4","text-sm",3,"ngClass"]],template:function(e,s){e&1&&(i(0,"section",0)(1,"div",1)(2,"h2",2),c(3,"i",3),a(4," Footer Settings "),n(),b(5,q,2,0,"div",4)(6,G,70,11,"div",5),n()()),e&2&&(d(5),h("ngIf",s.loading),d(),h("ngIf",s.footerData))},dependencies:[k,P,L,O,R,W,A,I,T,H],styles:[".container[_ngcontent-%COMP%]{min-height:100vh}button[_ngcontent-%COMP%]{transition:all .3s ease;transform:translateY(0)}button[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 8px 25px #57c4c14d}button[_ngcontent-%COMP%]:active{transform:translateY(0)}input[type=text][_ngcontent-%COMP%], input[type=email][_ngcontent-%COMP%], input[type=url][_ngcontent-%COMP%], input[type=file][_ngcontent-%COMP%]{transition:all .3s ease}input[type=text][_ngcontent-%COMP%]:focus, input[type=email][_ngcontent-%COMP%]:focus, input[type=url][_ngcontent-%COMP%]:focus, input[type=file][_ngcontent-%COMP%]:focus{border-color:#57c4c1;box-shadow:0 0 0 3px #57c4c11a;outline:none}input[type=text][_ngcontent-%COMP%]:invalid, input[type=email][_ngcontent-%COMP%]:invalid, input[type=url][_ngcontent-%COMP%]:invalid, input[type=file][_ngcontent-%COMP%]:invalid{border-color:#ef4444}input[type=text][_ngcontent-%COMP%]:invalid:focus, input[type=email][_ngcontent-%COMP%]:invalid:focus, input[type=url][_ngcontent-%COMP%]:invalid:focus, input[type=file][_ngcontent-%COMP%]:invalid:focus{border-color:#ef4444;box-shadow:0 0 0 3px #ef44441a}.logo-upload-section[_ngcontent-%COMP%]{background:#ffffff0d;border:2px dashed rgba(255,255,255,.2);border-radius:1rem;padding:2rem;transition:all .3s ease}.logo-upload-section[_ngcontent-%COMP%]:hover{border-color:#57c4c1;background:#57c4c10d}.loading-spinner[_ngcontent-%COMP%]{display:inline-block;width:20px;height:20px;border:3px solid rgba(255,255,255,.3);border-radius:50%;border-top-color:#57c4c1;animation:_ngcontent-%COMP%_spin 1s ease-in-out infinite}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.message[_ngcontent-%COMP%]{padding:1rem;border-radius:.5rem;font-weight:500}.message.success[_ngcontent-%COMP%]{background-color:#57c4c11a;border:1px solid #57c4c1;color:#57c4c1}.message.error[_ngcontent-%COMP%]{background-color:#ef44441a;border:1px solid #ef4444;color:#ef4444}@media (max-width: 768px){.container[_ngcontent-%COMP%]{padding:1rem}.grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]})};export{B as AdminFooterComponent};
